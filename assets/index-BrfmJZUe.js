(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const f of r)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function l(r){const f={};return r.integrity&&(f.integrity=r.integrity),r.referrerPolicy&&(f.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?f.credentials="include":r.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(r){if(r.ep)return;r.ep=!0;const f=l(r);fetch(r.href,f)}})();function Gy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cf={exports:{}},tl={};var Kp;function Bb(){if(Kp)return tl;Kp=1;var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function l(s,r,f){var d=null;if(f!==void 0&&(d=""+f),r.key!==void 0&&(d=""+r.key),"key"in r){f={};for(var g in r)g!=="key"&&(f[g]=r[g])}else f=r;return r=f.ref,{$$typeof:n,type:s,key:d,ref:r!==void 0?r:null,props:f}}return tl.Fragment=i,tl.jsx=l,tl.jsxs=l,tl}var Zp;function Ib(){return Zp||(Zp=1,cf.exports=Bb()),cf.exports}var y=Ib(),uf={exports:{}},xe={};var Qp;function qb(){if(Qp)return xe;Qp=1;var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),m=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=m&&O[m]||O["@@iterator"],typeof O=="function"?O:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,D={};function j(O,U,ee){this.props=O,this.context=U,this.refs=D,this.updater=ee||w}j.prototype.isReactComponent={},j.prototype.setState=function(O,U){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,U,"setState")},j.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function H(){}H.prototype=j.prototype;function _(O,U,ee){this.props=O,this.context=U,this.refs=D,this.updater=ee||w}var M=_.prototype=new H;M.constructor=_,N(M,j.prototype),M.isPureReactComponent=!0;var A=Array.isArray;function T(){}var G={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function Y(O,U,ee){var q=ee.ref;return{$$typeof:n,type:O,key:U,ref:q!==void 0?q:null,props:ee}}function se(O,U){return Y(O.type,U,O.props)}function J(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function $(O){var U={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ee){return U[ee]})}var ie=/\/+/g;function z(O,U){return typeof O=="object"&&O!==null&&O.key!=null?$(""+O.key):U.toString(36)}function X(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(T,T):(O.status="pending",O.then(function(U){O.status==="pending"&&(O.status="fulfilled",O.value=U)},function(U){O.status==="pending"&&(O.status="rejected",O.reason=U)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function C(O,U,ee,q,le){var ue=typeof O;(ue==="undefined"||ue==="boolean")&&(O=null);var ce=!1;if(O===null)ce=!0;else switch(ue){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(O.$$typeof){case n:case i:ce=!0;break;case b:return ce=O._init,C(ce(O._payload),U,ee,q,le)}}if(ce)return le=le(O),ce=q===""?"."+z(O,0):q,A(le)?(ee="",ce!=null&&(ee=ce.replace(ie,"$&/")+"/"),C(le,U,ee,"",function(we){return we})):le!=null&&(J(le)&&(le=se(le,ee+(le.key==null||O&&O.key===le.key?"":(""+le.key).replace(ie,"$&/")+"/")+ce)),U.push(le)),1;ce=0;var re=q===""?".":q+":";if(A(O))for(var fe=0;fe<O.length;fe++)q=O[fe],ue=re+z(q,fe),ce+=C(q,U,ee,ue,le);else if(fe=S(O),typeof fe=="function")for(O=fe.call(O),fe=0;!(q=O.next()).done;)q=q.value,ue=re+z(q,fe++),ce+=C(q,U,ee,ue,le);else if(ue==="object"){if(typeof O.then=="function")return C(X(O),U,ee,q,le);throw U=String(O),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return ce}function k(O,U,ee){if(O==null)return O;var q=[],le=0;return C(O,q,"","",function(ue){return U.call(ee,ue,le++)}),q}function I(O){if(O._status===-1){var U=O._result;U=U(),U.then(function(ee){(O._status===0||O._status===-1)&&(O._status=1,O._result=ee)},function(ee){(O._status===0||O._status===-1)&&(O._status=2,O._result=ee)}),O._status===-1&&(O._status=0,O._result=U)}if(O._status===1)return O._result.default;throw O._result}var K=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},te={map:k,forEach:function(O,U,ee){k(O,function(){U.apply(this,arguments)},ee)},count:function(O){var U=0;return k(O,function(){U++}),U},toArray:function(O){return k(O,function(U){return U})||[]},only:function(O){if(!J(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return xe.Activity=x,xe.Children=te,xe.Component=j,xe.Fragment=l,xe.Profiler=r,xe.PureComponent=_,xe.StrictMode=s,xe.Suspense=p,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,xe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return G.H.useMemoCache(O)}},xe.cache=function(O){return function(){return O.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(O,U,ee){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var q=N({},O.props),le=O.key;if(U!=null)for(ue in U.key!==void 0&&(le=""+U.key),U)!B.call(U,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&U.ref===void 0||(q[ue]=U[ue]);var ue=arguments.length-2;if(ue===1)q.children=ee;else if(1<ue){for(var ce=Array(ue),re=0;re<ue;re++)ce[re]=arguments[re+2];q.children=ce}return Y(O.type,le,q)},xe.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:f,_context:O},O},xe.createElement=function(O,U,ee){var q,le={},ue=null;if(U!=null)for(q in U.key!==void 0&&(ue=""+U.key),U)B.call(U,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(le[q]=U[q]);var ce=arguments.length-2;if(ce===1)le.children=ee;else if(1<ce){for(var re=Array(ce),fe=0;fe<ce;fe++)re[fe]=arguments[fe+2];le.children=re}if(O&&O.defaultProps)for(q in ce=O.defaultProps,ce)le[q]===void 0&&(le[q]=ce[q]);return Y(O,ue,le)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(O){return{$$typeof:g,render:O}},xe.isValidElement=J,xe.lazy=function(O){return{$$typeof:b,_payload:{_status:-1,_result:O},_init:I}},xe.memo=function(O,U){return{$$typeof:h,type:O,compare:U===void 0?null:U}},xe.startTransition=function(O){var U=G.T,ee={};G.T=ee;try{var q=O(),le=G.S;le!==null&&le(ee,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(T,K)}catch(ue){K(ue)}finally{U!==null&&ee.types!==null&&(U.types=ee.types),G.T=U}},xe.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},xe.use=function(O){return G.H.use(O)},xe.useActionState=function(O,U,ee){return G.H.useActionState(O,U,ee)},xe.useCallback=function(O,U){return G.H.useCallback(O,U)},xe.useContext=function(O){return G.H.useContext(O)},xe.useDebugValue=function(){},xe.useDeferredValue=function(O,U){return G.H.useDeferredValue(O,U)},xe.useEffect=function(O,U){return G.H.useEffect(O,U)},xe.useEffectEvent=function(O){return G.H.useEffectEvent(O)},xe.useId=function(){return G.H.useId()},xe.useImperativeHandle=function(O,U,ee){return G.H.useImperativeHandle(O,U,ee)},xe.useInsertionEffect=function(O,U){return G.H.useInsertionEffect(O,U)},xe.useLayoutEffect=function(O,U){return G.H.useLayoutEffect(O,U)},xe.useMemo=function(O,U){return G.H.useMemo(O,U)},xe.useOptimistic=function(O,U){return G.H.useOptimistic(O,U)},xe.useReducer=function(O,U,ee){return G.H.useReducer(O,U,ee)},xe.useRef=function(O){return G.H.useRef(O)},xe.useState=function(O){return G.H.useState(O)},xe.useSyncExternalStore=function(O,U,ee){return G.H.useSyncExternalStore(O,U,ee)},xe.useTransition=function(){return G.H.useTransition()},xe.version="19.2.3",xe}var Jp;function Nl(){return Jp||(Jp=1,uf.exports=qb()),uf.exports}var W=Nl();const sl=Gy(W);var ff={exports:{}},nl={},df={exports:{}},gf={};var Fp;function Yb(){return Fp||(Fp=1,(function(n){function i(C,k){var I=C.length;C.push(k);e:for(;0<I;){var K=I-1>>>1,te=C[K];if(0<r(te,k))C[K]=k,C[I]=te,I=K;else break e}}function l(C){return C.length===0?null:C[0]}function s(C){if(C.length===0)return null;var k=C[0],I=C.pop();if(I!==k){C[0]=I;e:for(var K=0,te=C.length,O=te>>>1;K<O;){var U=2*(K+1)-1,ee=C[U],q=U+1,le=C[q];if(0>r(ee,I))q<te&&0>r(le,ee)?(C[K]=le,C[q]=I,K=q):(C[K]=ee,C[U]=I,K=U);else if(q<te&&0>r(le,I))C[K]=le,C[q]=I,K=q;else break e}}return k}function r(C,k){var I=C.sortIndex-k.sortIndex;return I!==0?I:C.id-k.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;n.unstable_now=function(){return f.now()}}else{var d=Date,g=d.now();n.unstable_now=function(){return d.now()-g}}var p=[],h=[],b=1,x=null,m=3,S=!1,w=!1,N=!1,D=!1,j=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function M(C){for(var k=l(h);k!==null;){if(k.callback===null)s(h);else if(k.startTime<=C)s(h),k.sortIndex=k.expirationTime,i(p,k);else break;k=l(h)}}function A(C){if(N=!1,M(C),!w)if(l(p)!==null)w=!0,T||(T=!0,$());else{var k=l(h);k!==null&&X(A,k.startTime-C)}}var T=!1,G=-1,B=5,Y=-1;function se(){return D?!0:!(n.unstable_now()-Y<B)}function J(){if(D=!1,T){var C=n.unstable_now();Y=C;var k=!0;try{e:{w=!1,N&&(N=!1,H(G),G=-1),S=!0;var I=m;try{t:{for(M(C),x=l(p);x!==null&&!(x.expirationTime>C&&se());){var K=x.callback;if(typeof K=="function"){x.callback=null,m=x.priorityLevel;var te=K(x.expirationTime<=C);if(C=n.unstable_now(),typeof te=="function"){x.callback=te,M(C),k=!0;break t}x===l(p)&&s(p),M(C)}else s(p);x=l(p)}if(x!==null)k=!0;else{var O=l(h);O!==null&&X(A,O.startTime-C),k=!1}}break e}finally{x=null,m=I,S=!1}k=void 0}}finally{k?$():T=!1}}}var $;if(typeof _=="function")$=function(){_(J)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,z=ie.port2;ie.port1.onmessage=J,$=function(){z.postMessage(null)}}else $=function(){j(J,0)};function X(C,k){G=j(function(){C(n.unstable_now())},k)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(C){C.callback=null},n.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<C?Math.floor(1e3/C):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(C){switch(m){case 1:case 2:case 3:var k=3;break;default:k=m}var I=m;m=k;try{return C()}finally{m=I}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(C,k){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var I=m;m=C;try{return k()}finally{m=I}},n.unstable_scheduleCallback=function(C,k,I){var K=n.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?K+I:K):I=K,C){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=I+te,C={id:b++,callback:k,priorityLevel:C,startTime:I,expirationTime:te,sortIndex:-1},I>K?(C.sortIndex=I,i(h,C),l(p)===null&&C===l(h)&&(N?(H(G),G=-1):N=!0,X(A,I-K))):(C.sortIndex=te,i(p,C),w||S||(w=!0,T||(T=!0,$()))),C},n.unstable_shouldYield=se,n.unstable_wrapCallback=function(C){var k=m;return function(){var I=m;m=k;try{return C.apply(this,arguments)}finally{m=I}}}})(gf)),gf}var Wp;function Vb(){return Wp||(Wp=1,df.exports=Yb()),df.exports}var hf={exports:{}},pt={};var Pp;function $b(){if(Pp)return pt;Pp=1;var n=Nl();function i(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)h+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var s={d:{f:l,r:function(){throw Error(i(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},r=Symbol.for("react.portal");function f(p,h,b){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:x==null?null:""+x,children:p,containerInfo:h,implementation:b}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return pt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,pt.createPortal=function(p,h){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(i(299));return f(p,h,null,b)},pt.flushSync=function(p){var h=d.T,b=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=h,s.p=b,s.d.f()}},pt.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(p,h))},pt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},pt.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var b=h.as,x=g(b,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,S=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;b==="style"?s.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:x,integrity:m,fetchPriority:S}):b==="script"&&s.d.X(p,{crossOrigin:x,integrity:m,fetchPriority:S,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},pt.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var b=g(h.as,h.crossOrigin);s.d.M(p,{crossOrigin:b,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(p)},pt.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var b=h.as,x=g(b,h.crossOrigin);s.d.L(p,b,{crossOrigin:x,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},pt.preloadModule=function(p,h){if(typeof p=="string")if(h){var b=g(h.as,h.crossOrigin);s.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:b,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(p)},pt.requestFormReset=function(p){s.d.r(p)},pt.unstable_batchedUpdates=function(p,h){return p(h)},pt.useFormState=function(p,h,b){return d.H.useFormState(p,h,b)},pt.useFormStatus=function(){return d.H.useHostTransitionStatus()},pt.version="19.2.3",pt}var em;function ky(){if(em)return hf.exports;em=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(i){console.error(i)}}return n(),hf.exports=$b(),hf.exports}var tm;function Xb(){if(tm)return nl;tm=1;var n=Vb(),i=Nl(),l=ky();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(s(188))}function h(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(s(188));return t!==e?null:e}for(var a=e,o=t;;){var c=a.return;if(c===null)break;var u=c.alternate;if(u===null){if(o=c.return,o!==null){a=o;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===a)return p(c),e;if(u===o)return p(c),t;u=u.sibling}throw Error(s(188))}if(a.return!==o.return)a=c,o=u;else{for(var v=!1,E=c.child;E;){if(E===a){v=!0,a=c,o=u;break}if(E===o){v=!0,o=c,a=u;break}E=E.sibling}if(!v){for(E=u.child;E;){if(E===a){v=!0,a=u,o=c;break}if(E===o){v=!0,o=u,a=c;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,m=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),_=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function $(e){return e===null||typeof e!="object"?null:(e=J&&e[J]||e["@@iterator"],typeof e=="function"?e:null)}var ie=Symbol.for("react.client.reference");function z(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ie?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case N:return"Fragment";case j:return"Profiler";case D:return"StrictMode";case A:return"Suspense";case T:return"SuspenseList";case Y:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case _:return e.displayName||"Context";case H:return(e._context.displayName||"Context")+".Consumer";case M:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case G:return t=e.displayName||null,t!==null?t:z(e.type)||"Memo";case B:t=e._payload,e=e._init;try{return z(e(t))}catch{}}return null}var X=Array.isArray,C=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},K=[],te=-1;function O(e){return{current:e}}function U(e){0>te||(e.current=K[te],K[te]=null,te--)}function ee(e,t){te++,K[te]=e.current,e.current=t}var q=O(null),le=O(null),ue=O(null),ce=O(null);function re(e,t){switch(ee(ue,t),ee(le,e),ee(q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?mp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=mp(t),e=yp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(q),ee(q,e)}function fe(){U(q),U(le),U(ue)}function we(e){e.memoizedState!==null&&ee(ce,e);var t=q.current,a=yp(t,e.type);t!==a&&(ee(le,e),ee(q,a))}function be(e){le.current===e&&(U(q),U(le)),ce.current===e&&(U(ce),Fo._currentValue=I)}var me,ve;function Ae(e){if(me===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);me=t&&t[1]||"",ve=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+me+e+ve}var ke=!1;function Re(e,t){if(!e||ke)return"";ke=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(P){var F=P}Reflect.construct(e,[],oe)}else{try{oe.call()}catch(P){F=P}e.call(oe.prototype)}}else{try{throw Error()}catch(P){F=P}(oe=e())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(P){if(P&&F&&typeof P.stack=="string")return[P.stack,F.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=o.DetermineComponentFrameRoot(),v=u[0],E=u[1];if(v&&E){var R=v.split(`
`),Q=E.split(`
`);for(c=o=0;o<R.length&&!R[o].includes("DetermineComponentFrameRoot");)o++;for(;c<Q.length&&!Q[c].includes("DetermineComponentFrameRoot");)c++;if(o===R.length||c===Q.length)for(o=R.length-1,c=Q.length-1;1<=o&&0<=c&&R[o]!==Q[c];)c--;for(;1<=o&&0<=c;o--,c--)if(R[o]!==Q[c]){if(o!==1||c!==1)do if(o--,c--,0>c||R[o]!==Q[c]){var ne=`
`+R[o].replace(" at new "," at ");return e.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",e.displayName)),ne}while(1<=o&&0<=c);break}}}finally{ke=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ae(a):""}function ot(e,t){switch(e.tag){case 26:case 27:case 5:return Ae(e.type);case 16:return Ae("Lazy");case 13:return e.child!==t&&t!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return Re(e.type,!1);case 11:return Re(e.type.render,!1);case 1:return Re(e.type,!0);case 31:return Ae("Activity");default:return""}}function Kt(e){try{var t="",a=null;do t+=ot(e,a),a=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Mt=Object.prototype.hasOwnProperty,Zt=n.unstable_scheduleCallback,mn=n.unstable_cancelCallback,_a=n.unstable_shouldYield,Na=n.unstable_requestPaint,st=n.unstable_now,li=n.unstable_getCurrentPriorityLevel,yn=n.unstable_ImmediatePriority,Vn=n.unstable_UserBlockingPriority,Aa=n.unstable_NormalPriority,$r=n.unstable_LowPriority,si=n.unstable_IdlePriority,Xr=n.log,Kr=n.unstable_setDisableYieldValue,Ta=null,yt=null;function on(e){if(typeof Xr=="function"&&Kr(e),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode(Ta,e)}catch{}}var vt=Math.clz32?Math.clz32:Jr,Zr=Math.log,Qr=Math.LN2;function Jr(e){return e>>>=0,e===0?32:31-(Zr(e)/Qr|0)|0}var ri=256,ci=262144,ui=4194304;function vn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function fi(e,t,a){var o=e.pendingLanes;if(o===0)return 0;var c=0,u=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~u,o!==0?c=vn(o):(v&=E,v!==0?c=vn(v):a||(a=E&~e,a!==0&&(c=vn(a))))):(E=o&~u,E!==0?c=vn(E):v!==0?c=vn(v):a||(a=o&~e,a!==0&&(c=vn(a)))),c===0?0:t!==0&&t!==c&&(t&u)===0&&(u=c&-c,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:c}function Ca(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Fr(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rl(){var e=ui;return ui<<=1,(ui&62914560)===0&&(ui=4194304),e}function so(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Ma(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Wr(e,t,a,o,c,u){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,R=e.expirationTimes,Q=e.hiddenUpdates;for(a=v&~a;0<a;){var ne=31-vt(a),oe=1<<ne;E[ne]=0,R[ne]=-1;var F=Q[ne];if(F!==null)for(Q[ne]=null,ne=0;ne<F.length;ne++){var P=F[ne];P!==null&&(P.lane&=-536870913)}a&=~oe}o!==0&&Hl(e,o,0),u!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=u&~(v&~t))}function Hl(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-vt(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function Gl(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var o=31-vt(a),c=1<<o;c&t|e[o]&t&&(e[o]|=t),a&=~c}}function kl(e,t){var a=t&-t;return a=(a&42)!==0?1:ro(a),(a&(e.suspendedLanes|t))!==0?0:a}function ro(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function co(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ul(){var e=k.p;return e!==0?e:(e=window.event,e===void 0?32:Bp(e.type))}function Ll(e,t){var a=k.p;try{return k.p=e,t()}finally{k.p=a}}var ln=Math.random().toString(36).slice(2),at="__reactFiber$"+ln,ht="__reactProps$"+ln,xn="__reactContainer$"+ln,di="__reactEvents$"+ln,Bl="__reactListeners$"+ln,Pr="__reactHandles$"+ln,Il="__reactResources$"+ln,Oa="__reactMarker$"+ln;function uo(e){delete e[at],delete e[ht],delete e[di],delete e[Bl],delete e[Pr]}function $n(e){var t=e[at];if(t)return t;for(var a=e.parentNode;a;){if(t=a[xn]||a[at]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=_p(e);e!==null;){if(a=e[at])return a;e=_p(e)}return t}e=a,a=e.parentNode}return null}function Xn(e){if(e=e[at]||e[xn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Kn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function Zn(e){var t=e[Il];return t||(t=e[Il]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Fe(e){e[Oa]=!0}var ql=new Set,Yl={};function bn(e,t){Qn(e,t),Qn(e+"Capture",t)}function Qn(e,t){for(Yl[e]=t,e=0;e<t.length;e++)ql.add(t[e])}var ec=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fo={},Vl={};function tc(e){return Mt.call(Vl,e)?!0:Mt.call(fo,e)?!1:ec.test(e)?Vl[e]=!0:(fo[e]=!0,!1)}function gi(e,t,a){if(tc(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function hi(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Qt(e,t,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+o)}}function bt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $l(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nc(e,t,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,u=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(v){a=""+v,u.call(this,v)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pi(e){if(!e._valueTracker){var t=$l(e)?"checked":"value";e._valueTracker=nc(e,t,""+e[t])}}function Xl(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),o="";return e&&(o=$l(e)?e.checked?"true":"false":e.value),e=o,e!==a?(t.setValue(e),!0):!1}function Da(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ac=/[\n"\\]/g;function St(e){return e.replace(ac,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ja(e,t,a,o,c,u,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+bt(t)):e.value!==""+bt(t)&&(e.value=""+bt(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?go(e,v,bt(t)):a!=null?go(e,v,bt(a)):o!=null&&e.removeAttribute("value"),c==null&&u!=null&&(e.defaultChecked=!!u),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+bt(E):e.removeAttribute("name")}function Kl(e,t,a,o,c,u,v,E){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){pi(e);return}a=a!=null?""+bt(a):"",t=t!=null?""+bt(t):a,E||t===e.value||(e.value=t),e.defaultValue=t}o=o??c,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),pi(e)}function go(e,t,a){t==="number"&&Da(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Sn(e,t,a,o){if(e=e.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=t.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&o&&(e[a].defaultSelected=!0)}else{for(a=""+bt(a),t=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function fd(e,t,a){if(t!=null&&(t=""+bt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+bt(a):""}function dd(e,t,a,o){if(t==null){if(o!=null){if(a!=null)throw Error(s(92));if(X(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),t=a}a=bt(t),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),pi(e)}function mi(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Hv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gd(e,t,a){var o=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,a):typeof a!="number"||a===0||Hv.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function hd(e,t,a){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var c in t)o=t[c],t.hasOwnProperty(c)&&a[c]!==o&&gd(e,c,o)}else for(var u in t)t.hasOwnProperty(u)&&gd(e,u,t[u])}function ic(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zl(e){return kv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function wn(){}var oc=null;function lc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yi=null,vi=null;function pd(e){var t=Xn(e);if(t&&(e=t.stateNode)){var a=e[ht]||null;e:switch(e=t.stateNode,t.type){case"input":if(ja(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+St(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var o=a[t];if(o!==e&&o.form===e.form){var c=o[ht]||null;if(!c)throw Error(s(90));ja(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)o=a[t],o.form===e.form&&Xl(o)}break e;case"textarea":fd(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Sn(e,!!a.multiple,t,!1)}}}var sc=!1;function md(e,t,a){if(sc)return e(t,a);sc=!0;try{var o=e(t);return o}finally{if(sc=!1,(yi!==null||vi!==null)&&(Hs(),yi&&(t=yi,e=vi,vi=yi=null,pd(t),e)))for(t=0;t<e.length;t++)pd(e[t])}}function ho(e,t){var a=e.stateNode;if(a===null)return null;var o=a[ht]||null;if(o===null)return null;a=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,t,typeof a));return a}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rc=!1;if(En)try{var po={};Object.defineProperty(po,"passive",{get:function(){rc=!0}}),window.addEventListener("test",po,po),window.removeEventListener("test",po,po)}catch{rc=!1}var Jn=null,cc=null,Ql=null;function yd(){if(Ql)return Ql;var e,t=cc,a=t.length,o,c="value"in Jn?Jn.value:Jn.textContent,u=c.length;for(e=0;e<a&&t[e]===c[e];e++);var v=a-e;for(o=1;o<=v&&t[a-o]===c[u-o];o++);return Ql=c.slice(e,1<o?1-o:void 0)}function Jl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fl(){return!0}function vd(){return!1}function wt(e){function t(a,o,c,u,v){this._reactName=a,this._targetInst=c,this.type=o,this.nativeEvent=u,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(u):u[E]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Fl:vd,this.isPropagationStopped=vd,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Fl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Fl)},persist:function(){},isPersistent:Fl}),t}var za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wl=wt(za),mo=x({},za,{view:0,detail:0}),Uv=wt(mo),uc,fc,yo,Pl=x({},mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yo&&(yo&&e.type==="mousemove"?(uc=e.screenX-yo.screenX,fc=e.screenY-yo.screenY):fc=uc=0,yo=e),uc)},movementY:function(e){return"movementY"in e?e.movementY:fc}}),xd=wt(Pl),Lv=x({},Pl,{dataTransfer:0}),Bv=wt(Lv),Iv=x({},mo,{relatedTarget:0}),dc=wt(Iv),qv=x({},za,{animationName:0,elapsedTime:0,pseudoElement:0}),Yv=wt(qv),Vv=x({},za,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$v=wt(Vv),Xv=x({},za,{data:0}),bd=wt(Xv),Kv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Qv[e])?!!t[e]:!1}function gc(){return Jv}var Fv=x({},mo,{key:function(e){if(e.key){var t=Kv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gc,charCode:function(e){return e.type==="keypress"?Jl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wv=wt(Fv),Pv=x({},Pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sd=wt(Pv),ex=x({},mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gc}),tx=wt(ex),nx=x({},za,{propertyName:0,elapsedTime:0,pseudoElement:0}),ax=wt(nx),ix=x({},Pl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ox=wt(ix),lx=x({},za,{newState:0,oldState:0}),sx=wt(lx),rx=[9,13,27,32],hc=En&&"CompositionEvent"in window,vo=null;En&&"documentMode"in document&&(vo=document.documentMode);var cx=En&&"TextEvent"in window&&!vo,wd=En&&(!hc||vo&&8<vo&&11>=vo),Ed=" ",_d=!1;function Nd(e,t){switch(e){case"keyup":return rx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ad(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xi=!1;function ux(e,t){switch(e){case"compositionend":return Ad(t);case"keypress":return t.which!==32?null:(_d=!0,Ed);case"textInput":return e=t.data,e===Ed&&_d?null:e;default:return null}}function fx(e,t){if(xi)return e==="compositionend"||!hc&&Nd(e,t)?(e=yd(),Ql=cc=Jn=null,xi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wd&&t.locale!=="ko"?null:t.data;default:return null}}var dx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Td(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dx[e.type]:t==="textarea"}function Cd(e,t,a,o){yi?vi?vi.push(o):vi=[o]:yi=o,t=qs(t,"onChange"),0<t.length&&(a=new Wl("onChange","change",null,a,o),e.push({event:a,listeners:t}))}var xo=null,bo=null;function gx(e){up(e,0)}function es(e){var t=Kn(e);if(Xl(t))return e}function Md(e,t){if(e==="change")return t}var Od=!1;if(En){var pc;if(En){var mc="oninput"in document;if(!mc){var Dd=document.createElement("div");Dd.setAttribute("oninput","return;"),mc=typeof Dd.oninput=="function"}pc=mc}else pc=!1;Od=pc&&(!document.documentMode||9<document.documentMode)}function jd(){xo&&(xo.detachEvent("onpropertychange",zd),bo=xo=null)}function zd(e){if(e.propertyName==="value"&&es(bo)){var t=[];Cd(t,bo,e,lc(e)),md(gx,t)}}function hx(e,t,a){e==="focusin"?(jd(),xo=t,bo=a,xo.attachEvent("onpropertychange",zd)):e==="focusout"&&jd()}function px(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return es(bo)}function mx(e,t){if(e==="click")return es(t)}function yx(e,t){if(e==="input"||e==="change")return es(t)}function vx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ot=typeof Object.is=="function"?Object.is:vx;function So(e,t){if(Ot(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var c=a[o];if(!Mt.call(t,c)||!Ot(e[c],t[c]))return!1}return!0}function Rd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hd(e,t){var a=Rd(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=t&&o>=t)return{node:a,offset:t-e};e=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Rd(a)}}function Gd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Da(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Da(e.document)}return t}function yc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var xx=En&&"documentMode"in document&&11>=document.documentMode,bi=null,vc=null,wo=null,xc=!1;function Ud(e,t,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;xc||bi==null||bi!==Da(o)||(o=bi,"selectionStart"in o&&yc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),wo&&So(wo,o)||(wo=o,o=qs(vc,"onSelect"),0<o.length&&(t=new Wl("onSelect","select",null,t,a),e.push({event:t,listeners:o}),t.target=bi)))}function Ra(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Si={animationend:Ra("Animation","AnimationEnd"),animationiteration:Ra("Animation","AnimationIteration"),animationstart:Ra("Animation","AnimationStart"),transitionrun:Ra("Transition","TransitionRun"),transitionstart:Ra("Transition","TransitionStart"),transitioncancel:Ra("Transition","TransitionCancel"),transitionend:Ra("Transition","TransitionEnd")},bc={},Ld={};En&&(Ld=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);function Ha(e){if(bc[e])return bc[e];if(!Si[e])return e;var t=Si[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Ld)return bc[e]=t[a];return e}var Bd=Ha("animationend"),Id=Ha("animationiteration"),qd=Ha("animationstart"),bx=Ha("transitionrun"),Sx=Ha("transitionstart"),wx=Ha("transitioncancel"),Yd=Ha("transitionend"),Vd=new Map,Sc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sc.push("scrollEnd");function Jt(e,t){Vd.set(e,t),bn(t,[e])}var ts=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Lt=[],wi=0,wc=0;function ns(){for(var e=wi,t=wc=wi=0;t<e;){var a=Lt[t];Lt[t++]=null;var o=Lt[t];Lt[t++]=null;var c=Lt[t];Lt[t++]=null;var u=Lt[t];if(Lt[t++]=null,o!==null&&c!==null){var v=o.pending;v===null?c.next=c:(c.next=v.next,v.next=c),o.pending=c}u!==0&&$d(a,c,u)}}function as(e,t,a,o){Lt[wi++]=e,Lt[wi++]=t,Lt[wi++]=a,Lt[wi++]=o,wc|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Ec(e,t,a,o){return as(e,t,a,o),is(e)}function Ga(e,t){return as(e,null,null,t),is(e)}function $d(e,t,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var c=!1,u=e.return;u!==null;)u.childLanes|=a,o=u.alternate,o!==null&&(o.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(c=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,c&&t!==null&&(c=31-vt(a),e=u.hiddenUpdates,o=e[c],o===null?e[c]=[t]:o.push(t),t.lane=a|536870912),u):null}function is(e){if(50<Vo)throw Vo=0,ju=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ei={};function Ex(e,t,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,t,a,o){return new Ex(e,t,a,o)}function _c(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _n(e,t){var a=e.alternate;return a===null?(a=Dt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Xd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function os(e,t,a,o,c,u){var v=0;if(o=e,typeof e=="function")_c(e)&&(v=1);else if(typeof e=="string")v=Cb(e,a,q.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Y:return e=Dt(31,a,t,c),e.elementType=Y,e.lanes=u,e;case N:return ka(a.children,c,u,t);case D:v=8,c|=24;break;case j:return e=Dt(12,a,t,c|2),e.elementType=j,e.lanes=u,e;case A:return e=Dt(13,a,t,c),e.elementType=A,e.lanes=u,e;case T:return e=Dt(19,a,t,c),e.elementType=T,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _:v=10;break e;case H:v=9;break e;case M:v=11;break e;case G:v=14;break e;case B:v=16,o=null;break e}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return t=Dt(v,a,t,c),t.elementType=e,t.type=o,t.lanes=u,t}function ka(e,t,a,o){return e=Dt(7,e,o,t),e.lanes=a,e}function Nc(e,t,a){return e=Dt(6,e,null,t),e.lanes=a,e}function Kd(e){var t=Dt(18,null,null,0);return t.stateNode=e,t}function Ac(e,t,a){return t=Dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Zd=new WeakMap;function Bt(e,t){if(typeof e=="object"&&e!==null){var a=Zd.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Kt(t)},Zd.set(e,t),t)}return{value:e,source:t,stack:Kt(t)}}var _i=[],Ni=0,ls=null,Eo=0,It=[],qt=0,Fn=null,sn=1,rn="";function Nn(e,t){_i[Ni++]=Eo,_i[Ni++]=ls,ls=e,Eo=t}function Qd(e,t,a){It[qt++]=sn,It[qt++]=rn,It[qt++]=Fn,Fn=e;var o=sn;e=rn;var c=32-vt(o)-1;o&=~(1<<c),a+=1;var u=32-vt(t)+c;if(30<u){var v=c-c%5;u=(o&(1<<v)-1).toString(32),o>>=v,c-=v,sn=1<<32-vt(t)+c|a<<c|o,rn=u+e}else sn=1<<u|a<<c|o,rn=e}function Tc(e){e.return!==null&&(Nn(e,1),Qd(e,1,0))}function Cc(e){for(;e===ls;)ls=_i[--Ni],_i[Ni]=null,Eo=_i[--Ni],_i[Ni]=null;for(;e===Fn;)Fn=It[--qt],It[qt]=null,rn=It[--qt],It[qt]=null,sn=It[--qt],It[qt]=null}function Jd(e,t){It[qt++]=sn,It[qt++]=rn,It[qt++]=Fn,sn=t.id,rn=t.overflow,Fn=e}var rt=null,qe=null,Me=!1,Wn=null,Yt=!1,Mc=Error(s(519));function Pn(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _o(Bt(t,e)),Mc}function Fd(e){var t=e.stateNode,a=e.type,o=e.memoizedProps;switch(t[at]=e,t[ht]=o,a){case"dialog":Ne("cancel",t),Ne("close",t);break;case"iframe":case"object":case"embed":Ne("load",t);break;case"video":case"audio":for(a=0;a<Xo.length;a++)Ne(Xo[a],t);break;case"source":Ne("error",t);break;case"img":case"image":case"link":Ne("error",t),Ne("load",t);break;case"details":Ne("toggle",t);break;case"input":Ne("invalid",t),Kl(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ne("invalid",t);break;case"textarea":Ne("invalid",t),dd(t,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||o.suppressHydrationWarning===!0||hp(t.textContent,a)?(o.popover!=null&&(Ne("beforetoggle",t),Ne("toggle",t)),o.onScroll!=null&&Ne("scroll",t),o.onScrollEnd!=null&&Ne("scrollend",t),o.onClick!=null&&(t.onclick=wn),t=!0):t=!1,t||Pn(e,!0)}function Wd(e){for(rt=e.return;rt;)switch(rt.tag){case 5:case 31:case 13:Yt=!1;return;case 27:case 3:Yt=!0;return;default:rt=rt.return}}function Ai(e){if(e!==rt)return!1;if(!Me)return Wd(e),Me=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Ku(e.type,e.memoizedProps)),a=!a),a&&qe&&Pn(e),Wd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));qe=Ep(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));qe=Ep(e)}else t===27?(t=qe,ga(e.type)?(e=Wu,Wu=null,qe=e):qe=t):qe=rt?$t(e.stateNode.nextSibling):null;return!0}function Ua(){qe=rt=null,Me=!1}function Oc(){var e=Wn;return e!==null&&(At===null?At=e:At.push.apply(At,e),Wn=null),e}function _o(e){Wn===null?Wn=[e]:Wn.push(e)}var Dc=O(null),La=null,An=null;function ea(e,t,a){ee(Dc,t._currentValue),t._currentValue=a}function Tn(e){e._currentValue=Dc.current,U(Dc)}function jc(e,t,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===a)break;e=e.return}}function zc(e,t,a,o){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var u=c.dependencies;if(u!==null){var v=c.child;u=u.firstContext;e:for(;u!==null;){var E=u;u=c;for(var R=0;R<t.length;R++)if(E.context===t[R]){u.lanes|=a,E=u.alternate,E!==null&&(E.lanes|=a),jc(u.return,a,e),o||(v=null);break e}u=E.next}}else if(c.tag===18){if(v=c.return,v===null)throw Error(s(341));v.lanes|=a,u=v.alternate,u!==null&&(u.lanes|=a),jc(v,a,e),v=null}else v=c.child;if(v!==null)v.return=c;else for(v=c;v!==null;){if(v===e){v=null;break}if(c=v.sibling,c!==null){c.return=v.return,v=c;break}v=v.return}c=v}}function Ti(e,t,a,o){e=null;for(var c=t,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var v=c.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=c.type;Ot(c.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(c===ce.current){if(v=c.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Fo):e=[Fo])}c=c.return}e!==null&&zc(t,e,a,o),t.flags|=262144}function ss(e){for(e=e.firstContext;e!==null;){if(!Ot(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ba(e){La=e,An=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ct(e){return Pd(La,e)}function rs(e,t){return La===null&&Ba(e),Pd(e,t)}function Pd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},An===null){if(e===null)throw Error(s(308));An=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else An=An.next=t;return a}var _x=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Nx=n.unstable_scheduleCallback,Ax=n.unstable_NormalPriority,We={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rc(){return{controller:new _x,data:new Map,refCount:0}}function No(e){e.refCount--,e.refCount===0&&Nx(Ax,function(){e.controller.abort()})}var Ao=null,Hc=0,Ci=0,Mi=null;function Tx(e,t){if(Ao===null){var a=Ao=[];Hc=0,Ci=Uu(),Mi={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Hc++,t.then(eg,eg),t}function eg(){if(--Hc===0&&Ao!==null){Mi!==null&&(Mi.status="fulfilled");var e=Ao;Ao=null,Ci=0,Mi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Cx(e,t){var a=[],o={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(o.status="rejected",o.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),o}var tg=C.S;C.S=function(e,t){Uh=st(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Tx(e,t),tg!==null&&tg(e,t)};var Ia=O(null);function Gc(){var e=Ia.current;return e!==null?e:Ie.pooledCache}function cs(e,t){t===null?ee(Ia,Ia.current):ee(Ia,t.pool)}function ng(){var e=Gc();return e===null?null:{parent:We._currentValue,pool:e}}var Oi=Error(s(460)),kc=Error(s(474)),us=Error(s(542)),fs={then:function(){}};function ag(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ig(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(wn,wn),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,lg(e),e;default:if(typeof t.status=="string")t.then(wn,wn);else{if(e=Ie,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=o}},function(o){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,lg(e),e}throw Ya=t,Oi}}function qa(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ya=a,Oi):a}}var Ya=null;function og(){if(Ya===null)throw Error(s(459));var e=Ya;return Ya=null,e}function lg(e){if(e===Oi||e===us)throw Error(s(483))}var Di=null,To=0;function ds(e){var t=To;return To+=1,Di===null&&(Di=[]),ig(Di,e,t)}function Co(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function gs(e,t){throw t.$$typeof===m?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function sg(e){function t(V,L){if(e){var Z=V.deletions;Z===null?(V.deletions=[L],V.flags|=16):Z.push(L)}}function a(V,L){if(!e)return null;for(;L!==null;)t(V,L),L=L.sibling;return null}function o(V){for(var L=new Map;V!==null;)V.key!==null?L.set(V.key,V):L.set(V.index,V),V=V.sibling;return L}function c(V,L){return V=_n(V,L),V.index=0,V.sibling=null,V}function u(V,L,Z){return V.index=Z,e?(Z=V.alternate,Z!==null?(Z=Z.index,Z<L?(V.flags|=67108866,L):Z):(V.flags|=67108866,L)):(V.flags|=1048576,L)}function v(V){return e&&V.alternate===null&&(V.flags|=67108866),V}function E(V,L,Z,ae){return L===null||L.tag!==6?(L=Nc(Z,V.mode,ae),L.return=V,L):(L=c(L,Z),L.return=V,L)}function R(V,L,Z,ae){var pe=Z.type;return pe===N?ne(V,L,Z.props.children,ae,Z.key):L!==null&&(L.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===B&&qa(pe)===L.type)?(L=c(L,Z.props),Co(L,Z),L.return=V,L):(L=os(Z.type,Z.key,Z.props,null,V.mode,ae),Co(L,Z),L.return=V,L)}function Q(V,L,Z,ae){return L===null||L.tag!==4||L.stateNode.containerInfo!==Z.containerInfo||L.stateNode.implementation!==Z.implementation?(L=Ac(Z,V.mode,ae),L.return=V,L):(L=c(L,Z.children||[]),L.return=V,L)}function ne(V,L,Z,ae,pe){return L===null||L.tag!==7?(L=ka(Z,V.mode,ae,pe),L.return=V,L):(L=c(L,Z),L.return=V,L)}function oe(V,L,Z){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Nc(""+L,V.mode,Z),L.return=V,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case S:return Z=os(L.type,L.key,L.props,null,V.mode,Z),Co(Z,L),Z.return=V,Z;case w:return L=Ac(L,V.mode,Z),L.return=V,L;case B:return L=qa(L),oe(V,L,Z)}if(X(L)||$(L))return L=ka(L,V.mode,Z,null),L.return=V,L;if(typeof L.then=="function")return oe(V,ds(L),Z);if(L.$$typeof===_)return oe(V,rs(V,L),Z);gs(V,L)}return null}function F(V,L,Z,ae){var pe=L!==null?L.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return pe!==null?null:E(V,L,""+Z,ae);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case S:return Z.key===pe?R(V,L,Z,ae):null;case w:return Z.key===pe?Q(V,L,Z,ae):null;case B:return Z=qa(Z),F(V,L,Z,ae)}if(X(Z)||$(Z))return pe!==null?null:ne(V,L,Z,ae,null);if(typeof Z.then=="function")return F(V,L,ds(Z),ae);if(Z.$$typeof===_)return F(V,L,rs(V,Z),ae);gs(V,Z)}return null}function P(V,L,Z,ae,pe){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return V=V.get(Z)||null,E(L,V,""+ae,pe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:return V=V.get(ae.key===null?Z:ae.key)||null,R(L,V,ae,pe);case w:return V=V.get(ae.key===null?Z:ae.key)||null,Q(L,V,ae,pe);case B:return ae=qa(ae),P(V,L,Z,ae,pe)}if(X(ae)||$(ae))return V=V.get(Z)||null,ne(L,V,ae,pe,null);if(typeof ae.then=="function")return P(V,L,Z,ds(ae),pe);if(ae.$$typeof===_)return P(V,L,Z,rs(L,ae),pe);gs(L,ae)}return null}function ge(V,L,Z,ae){for(var pe=null,De=null,he=L,Ee=L=0,Ce=null;he!==null&&Ee<Z.length;Ee++){he.index>Ee?(Ce=he,he=null):Ce=he.sibling;var je=F(V,he,Z[Ee],ae);if(je===null){he===null&&(he=Ce);break}e&&he&&je.alternate===null&&t(V,he),L=u(je,L,Ee),De===null?pe=je:De.sibling=je,De=je,he=Ce}if(Ee===Z.length)return a(V,he),Me&&Nn(V,Ee),pe;if(he===null){for(;Ee<Z.length;Ee++)he=oe(V,Z[Ee],ae),he!==null&&(L=u(he,L,Ee),De===null?pe=he:De.sibling=he,De=he);return Me&&Nn(V,Ee),pe}for(he=o(he);Ee<Z.length;Ee++)Ce=P(he,V,Ee,Z[Ee],ae),Ce!==null&&(e&&Ce.alternate!==null&&he.delete(Ce.key===null?Ee:Ce.key),L=u(Ce,L,Ee),De===null?pe=Ce:De.sibling=Ce,De=Ce);return e&&he.forEach(function(va){return t(V,va)}),Me&&Nn(V,Ee),pe}function ye(V,L,Z,ae){if(Z==null)throw Error(s(151));for(var pe=null,De=null,he=L,Ee=L=0,Ce=null,je=Z.next();he!==null&&!je.done;Ee++,je=Z.next()){he.index>Ee?(Ce=he,he=null):Ce=he.sibling;var va=F(V,he,je.value,ae);if(va===null){he===null&&(he=Ce);break}e&&he&&va.alternate===null&&t(V,he),L=u(va,L,Ee),De===null?pe=va:De.sibling=va,De=va,he=Ce}if(je.done)return a(V,he),Me&&Nn(V,Ee),pe;if(he===null){for(;!je.done;Ee++,je=Z.next())je=oe(V,je.value,ae),je!==null&&(L=u(je,L,Ee),De===null?pe=je:De.sibling=je,De=je);return Me&&Nn(V,Ee),pe}for(he=o(he);!je.done;Ee++,je=Z.next())je=P(he,V,Ee,je.value,ae),je!==null&&(e&&je.alternate!==null&&he.delete(je.key===null?Ee:je.key),L=u(je,L,Ee),De===null?pe=je:De.sibling=je,De=je);return e&&he.forEach(function(Lb){return t(V,Lb)}),Me&&Nn(V,Ee),pe}function Be(V,L,Z,ae){if(typeof Z=="object"&&Z!==null&&Z.type===N&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case S:e:{for(var pe=Z.key;L!==null;){if(L.key===pe){if(pe=Z.type,pe===N){if(L.tag===7){a(V,L.sibling),ae=c(L,Z.props.children),ae.return=V,V=ae;break e}}else if(L.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===B&&qa(pe)===L.type){a(V,L.sibling),ae=c(L,Z.props),Co(ae,Z),ae.return=V,V=ae;break e}a(V,L);break}else t(V,L);L=L.sibling}Z.type===N?(ae=ka(Z.props.children,V.mode,ae,Z.key),ae.return=V,V=ae):(ae=os(Z.type,Z.key,Z.props,null,V.mode,ae),Co(ae,Z),ae.return=V,V=ae)}return v(V);case w:e:{for(pe=Z.key;L!==null;){if(L.key===pe)if(L.tag===4&&L.stateNode.containerInfo===Z.containerInfo&&L.stateNode.implementation===Z.implementation){a(V,L.sibling),ae=c(L,Z.children||[]),ae.return=V,V=ae;break e}else{a(V,L);break}else t(V,L);L=L.sibling}ae=Ac(Z,V.mode,ae),ae.return=V,V=ae}return v(V);case B:return Z=qa(Z),Be(V,L,Z,ae)}if(X(Z))return ge(V,L,Z,ae);if($(Z)){if(pe=$(Z),typeof pe!="function")throw Error(s(150));return Z=pe.call(Z),ye(V,L,Z,ae)}if(typeof Z.then=="function")return Be(V,L,ds(Z),ae);if(Z.$$typeof===_)return Be(V,L,rs(V,Z),ae);gs(V,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,L!==null&&L.tag===6?(a(V,L.sibling),ae=c(L,Z),ae.return=V,V=ae):(a(V,L),ae=Nc(Z,V.mode,ae),ae.return=V,V=ae),v(V)):a(V,L)}return function(V,L,Z,ae){try{To=0;var pe=Be(V,L,Z,ae);return Di=null,pe}catch(he){if(he===Oi||he===us)throw he;var De=Dt(29,he,null,V.mode);return De.lanes=ae,De.return=V,De}}}var Va=sg(!0),rg=sg(!1),ta=!1;function Uc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function na(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function aa(e,t,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(ze&2)!==0){var c=o.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),o.pending=t,t=is(e),$d(e,null,a),t}return as(e,o,t,a),is(e)}function Mo(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,a|=o,t.lanes=a,Gl(e,a)}}function Bc(e,t){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var c=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?c=u=v:u=u.next=v,a=a.next}while(a!==null);u===null?c=u=t:u=u.next=t}else c=u=t;a={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Ic=!1;function Oo(){if(Ic){var e=Mi;if(e!==null)throw e}}function Do(e,t,a,o){Ic=!1;var c=e.updateQueue;ta=!1;var u=c.firstBaseUpdate,v=c.lastBaseUpdate,E=c.shared.pending;if(E!==null){c.shared.pending=null;var R=E,Q=R.next;R.next=null,v===null?u=Q:v.next=Q,v=R;var ne=e.alternate;ne!==null&&(ne=ne.updateQueue,E=ne.lastBaseUpdate,E!==v&&(E===null?ne.firstBaseUpdate=Q:E.next=Q,ne.lastBaseUpdate=R))}if(u!==null){var oe=c.baseState;v=0,ne=Q=R=null,E=u;do{var F=E.lane&-536870913,P=F!==E.lane;if(P?(Te&F)===F:(o&F)===F){F!==0&&F===Ci&&(Ic=!0),ne!==null&&(ne=ne.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ge=e,ye=E;F=t;var Be=a;switch(ye.tag){case 1:if(ge=ye.payload,typeof ge=="function"){oe=ge.call(Be,oe,F);break e}oe=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ye.payload,F=typeof ge=="function"?ge.call(Be,oe,F):ge,F==null)break e;oe=x({},oe,F);break e;case 2:ta=!0}}F=E.callback,F!==null&&(e.flags|=64,P&&(e.flags|=8192),P=c.callbacks,P===null?c.callbacks=[F]:P.push(F))}else P={lane:F,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ne===null?(Q=ne=P,R=oe):ne=ne.next=P,v|=F;if(E=E.next,E===null){if(E=c.shared.pending,E===null)break;P=E,E=P.next,P.next=null,c.lastBaseUpdate=P,c.shared.pending=null}}while(!0);ne===null&&(R=oe),c.baseState=R,c.firstBaseUpdate=Q,c.lastBaseUpdate=ne,u===null&&(c.shared.lanes=0),ra|=v,e.lanes=v,e.memoizedState=oe}}function cg(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function ug(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)cg(a[e],t)}var ji=O(null),hs=O(0);function fg(e,t){e=Gn,ee(hs,e),ee(ji,t),Gn=e|t.baseLanes}function qc(){ee(hs,Gn),ee(ji,ji.current)}function Yc(){Gn=hs.current,U(ji),U(hs)}var jt=O(null),Vt=null;function ia(e){var t=e.alternate;ee(Qe,Qe.current&1),ee(jt,e),Vt===null&&(t===null||ji.current!==null||t.memoizedState!==null)&&(Vt=e)}function Vc(e){ee(Qe,Qe.current),ee(jt,e),Vt===null&&(Vt=e)}function dg(e){e.tag===22?(ee(Qe,Qe.current),ee(jt,e),Vt===null&&(Vt=e)):oa()}function oa(){ee(Qe,Qe.current),ee(jt,jt.current)}function zt(e){U(jt),Vt===e&&(Vt=null),U(Qe)}var Qe=O(0);function ps(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Ju(a)||Fu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cn=0,Se=null,Ue=null,Pe=null,ms=!1,zi=!1,$a=!1,ys=0,jo=0,Ri=null,Mx=0;function Ke(){throw Error(s(321))}function $c(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Ot(e[a],t[a]))return!1;return!0}function Xc(e,t,a,o,c,u){return Cn=u,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,C.H=e===null||e.memoizedState===null?Qg:su,$a=!1,u=a(o,c),$a=!1,zi&&(u=hg(t,a,o,c)),gg(e),u}function gg(e){C.H=Ho;var t=Ue!==null&&Ue.next!==null;if(Cn=0,Pe=Ue=Se=null,ms=!1,jo=0,Ri=null,t)throw Error(s(300));e===null||et||(e=e.dependencies,e!==null&&ss(e)&&(et=!0))}function hg(e,t,a,o){Se=e;var c=0;do{if(zi&&(Ri=null),jo=0,zi=!1,25<=c)throw Error(s(301));if(c+=1,Pe=Ue=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}C.H=Jg,u=t(a,o)}while(zi);return u}function Ox(){var e=C.H,t=e.useState()[0];return t=typeof t.then=="function"?zo(t):t,e=e.useState()[0],(Ue!==null?Ue.memoizedState:null)!==e&&(Se.flags|=1024),t}function Kc(){var e=ys!==0;return ys=0,e}function Zc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Qc(e){if(ms){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ms=!1}Cn=0,Pe=Ue=Se=null,zi=!1,jo=ys=0,Ri=null}function xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?Se.memoizedState=Pe=e:Pe=Pe.next=e,Pe}function Je(){if(Ue===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=Pe===null?Se.memoizedState:Pe.next;if(t!==null)Pe=t,Ue=e;else{if(e===null)throw Se.alternate===null?Error(s(467)):Error(s(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Pe===null?Se.memoizedState=Pe=e:Pe=Pe.next=e}return Pe}function vs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zo(e){var t=jo;return jo+=1,Ri===null&&(Ri=[]),e=ig(Ri,e,t),t=Se,(Pe===null?t.memoizedState:Pe.next)===null&&(t=t.alternate,C.H=t===null||t.memoizedState===null?Qg:su),e}function xs(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return zo(e);if(e.$$typeof===_)return ct(e)}throw Error(s(438,String(e)))}function Jc(e){var t=null,a=Se.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var o=Se.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=vs(),Se.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),o=0;o<e;o++)a[o]=se;return t.index++,a}function Mn(e,t){return typeof t=="function"?t(e):t}function bs(e){var t=Je();return Fc(t,Ue,e)}function Fc(e,t,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var c=e.baseQueue,u=o.pending;if(u!==null){if(c!==null){var v=c.next;c.next=u.next,u.next=v}t.baseQueue=c=u,o.pending=null}if(u=e.baseState,c===null)e.memoizedState=u;else{t=c.next;var E=v=null,R=null,Q=t,ne=!1;do{var oe=Q.lane&-536870913;if(oe!==Q.lane?(Te&oe)===oe:(Cn&oe)===oe){var F=Q.revertLane;if(F===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),oe===Ci&&(ne=!0);else if((Cn&F)===F){Q=Q.next,F===Ci&&(ne=!0);continue}else oe={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},R===null?(E=R=oe,v=u):R=R.next=oe,Se.lanes|=F,ra|=F;oe=Q.action,$a&&a(u,oe),u=Q.hasEagerState?Q.eagerState:a(u,oe)}else F={lane:oe,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},R===null?(E=R=F,v=u):R=R.next=F,Se.lanes|=oe,ra|=oe;Q=Q.next}while(Q!==null&&Q!==t);if(R===null?v=u:R.next=E,!Ot(u,e.memoizedState)&&(et=!0,ne&&(a=Mi,a!==null)))throw a;e.memoizedState=u,e.baseState=v,e.baseQueue=R,o.lastRenderedState=u}return c===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Wc(e){var t=Je(),a=t.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,c=a.pending,u=t.memoizedState;if(c!==null){a.pending=null;var v=c=c.next;do u=e(u,v.action),v=v.next;while(v!==c);Ot(u,t.memoizedState)||(et=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,o]}function pg(e,t,a){var o=Se,c=Je(),u=Me;if(u){if(a===void 0)throw Error(s(407));a=a()}else a=t();var v=!Ot((Ue||c).memoizedState,a);if(v&&(c.memoizedState=a,et=!0),c=c.queue,tu(vg.bind(null,o,c,e),[e]),c.getSnapshot!==t||v||Pe!==null&&Pe.memoizedState.tag&1){if(o.flags|=2048,Hi(9,{destroy:void 0},yg.bind(null,o,c,a,t),null),Ie===null)throw Error(s(349));u||(Cn&127)!==0||mg(o,t,a)}return a}function mg(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Se.updateQueue,t===null?(t=vs(),Se.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function yg(e,t,a,o){t.value=a,t.getSnapshot=o,xg(t)&&bg(e)}function vg(e,t,a){return a(function(){xg(t)&&bg(e)})}function xg(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Ot(e,a)}catch{return!0}}function bg(e){var t=Ga(e,2);t!==null&&Tt(t,e,2)}function Pc(e){var t=xt();if(typeof e=="function"){var a=e;if(e=a(),$a){on(!0);try{a()}finally{on(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:e},t}function Sg(e,t,a,o){return e.baseState=a,Fc(e,Ue,typeof o=="function"?o:Mn)}function Dx(e,t,a,o,c){if(Es(e))throw Error(s(485));if(e=t.action,e!==null){var u={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){u.listeners.push(v)}};C.T!==null?a(!0):u.isTransition=!1,o(u),a=t.pending,a===null?(u.next=t.pending=u,wg(t,u)):(u.next=a.next,t.pending=a.next=u)}}function wg(e,t){var a=t.action,o=t.payload,c=e.state;if(t.isTransition){var u=C.T,v={};C.T=v;try{var E=a(c,o),R=C.S;R!==null&&R(v,E),Eg(e,t,E)}catch(Q){eu(e,t,Q)}finally{u!==null&&v.types!==null&&(u.types=v.types),C.T=u}}else try{u=a(c,o),Eg(e,t,u)}catch(Q){eu(e,t,Q)}}function Eg(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){_g(e,t,o)},function(o){return eu(e,t,o)}):_g(e,t,a)}function _g(e,t,a){t.status="fulfilled",t.value=a,Ng(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,wg(e,a)))}function eu(e,t,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=a,Ng(t),t=t.next;while(t!==o)}e.action=null}function Ng(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ag(e,t){return t}function Tg(e,t){if(Me){var a=Ie.formState;if(a!==null){e:{var o=Se;if(Me){if(qe){t:{for(var c=qe,u=Yt;c.nodeType!==8;){if(!u){c=null;break t}if(c=$t(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){qe=$t(c.nextSibling),o=c.data==="F!";break e}}Pn(o)}o=!1}o&&(t=a[0])}}return a=xt(),a.memoizedState=a.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ag,lastRenderedState:t},a.queue=o,a=Xg.bind(null,Se,o),o.dispatch=a,o=Pc(!1),u=lu.bind(null,Se,!1,o.queue),o=xt(),c={state:t,dispatch:null,action:e,pending:null},o.queue=c,a=Dx.bind(null,Se,c,u,a),c.dispatch=a,o.memoizedState=e,[t,a,!1]}function Cg(e){var t=Je();return Mg(t,Ue,e)}function Mg(e,t,a){if(t=Fc(e,t,Ag)[0],e=bs(Mn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=zo(t)}catch(v){throw v===Oi?us:v}else o=t;t=Je();var c=t.queue,u=c.dispatch;return a!==t.memoizedState&&(Se.flags|=2048,Hi(9,{destroy:void 0},jx.bind(null,c,a),null)),[o,u,e]}function jx(e,t){e.action=t}function Og(e){var t=Je(),a=Ue;if(a!==null)return Mg(t,a,e);Je(),t=t.memoizedState,a=Je();var o=a.queue.dispatch;return a.memoizedState=e,[t,o,!1]}function Hi(e,t,a,o){return e={tag:e,create:a,deps:o,inst:t,next:null},t=Se.updateQueue,t===null&&(t=vs(),Se.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,t.lastEffect=e),e}function Dg(){return Je().memoizedState}function Ss(e,t,a,o){var c=xt();Se.flags|=e,c.memoizedState=Hi(1|t,{destroy:void 0},a,o===void 0?null:o)}function ws(e,t,a,o){var c=Je();o=o===void 0?null:o;var u=c.memoizedState.inst;Ue!==null&&o!==null&&$c(o,Ue.memoizedState.deps)?c.memoizedState=Hi(t,u,a,o):(Se.flags|=e,c.memoizedState=Hi(1|t,u,a,o))}function jg(e,t){Ss(8390656,8,e,t)}function tu(e,t){ws(2048,8,e,t)}function zx(e){Se.flags|=4;var t=Se.updateQueue;if(t===null)t=vs(),Se.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function zg(e){var t=Je().memoizedState;return zx({ref:t,nextImpl:e}),function(){if((ze&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Rg(e,t){return ws(4,2,e,t)}function Hg(e,t){return ws(4,4,e,t)}function Gg(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kg(e,t,a){a=a!=null?a.concat([e]):null,ws(4,4,Gg.bind(null,t,e),a)}function nu(){}function Ug(e,t){var a=Je();t=t===void 0?null:t;var o=a.memoizedState;return t!==null&&$c(t,o[1])?o[0]:(a.memoizedState=[e,t],e)}function Lg(e,t){var a=Je();t=t===void 0?null:t;var o=a.memoizedState;if(t!==null&&$c(t,o[1]))return o[0];if(o=e(),$a){on(!0);try{e()}finally{on(!1)}}return a.memoizedState=[o,t],o}function au(e,t,a){return a===void 0||(Cn&1073741824)!==0&&(Te&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Bh(),Se.lanes|=e,ra|=e,a)}function Bg(e,t,a,o){return Ot(a,t)?a:ji.current!==null?(e=au(e,a,o),Ot(e,t)||(et=!0),e):(Cn&42)===0||(Cn&1073741824)!==0&&(Te&261930)===0?(et=!0,e.memoizedState=a):(e=Bh(),Se.lanes|=e,ra|=e,t)}function Ig(e,t,a,o,c){var u=k.p;k.p=u!==0&&8>u?u:8;var v=C.T,E={};C.T=E,lu(e,!1,t,a);try{var R=c(),Q=C.S;if(Q!==null&&Q(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var ne=Cx(R,o);Ro(e,t,ne,Gt(e))}else Ro(e,t,o,Gt(e))}catch(oe){Ro(e,t,{then:function(){},status:"rejected",reason:oe},Gt())}finally{k.p=u,v!==null&&E.types!==null&&(v.types=E.types),C.T=v}}function Rx(){}function iu(e,t,a,o){if(e.tag!==5)throw Error(s(476));var c=qg(e).queue;Ig(e,c,t,I,a===null?Rx:function(){return Yg(e),a(o)})}function qg(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:I},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Yg(e){var t=qg(e);t.next===null&&(t=e.alternate.memoizedState),Ro(e,t.next.queue,{},Gt())}function ou(){return ct(Fo)}function Vg(){return Je().memoizedState}function $g(){return Je().memoizedState}function Hx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Gt();e=na(a);var o=aa(t,e,a);o!==null&&(Tt(o,t,a),Mo(o,t,a)),t={cache:Rc()},e.payload=t;return}t=t.return}}function Gx(e,t,a){var o=Gt();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Es(e)?Kg(t,a):(a=Ec(e,t,a,o),a!==null&&(Tt(a,e,o),Zg(a,t,o)))}function Xg(e,t,a){var o=Gt();Ro(e,t,a,o)}function Ro(e,t,a,o){var c={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Es(e))Kg(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var v=t.lastRenderedState,E=u(v,a);if(c.hasEagerState=!0,c.eagerState=E,Ot(E,v))return as(e,t,c,0),Ie===null&&ns(),!1}catch{}if(a=Ec(e,t,c,o),a!==null)return Tt(a,e,o),Zg(a,t,o),!0}return!1}function lu(e,t,a,o){if(o={lane:2,revertLane:Uu(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Es(e)){if(t)throw Error(s(479))}else t=Ec(e,a,o,2),t!==null&&Tt(t,e,2)}function Es(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function Kg(e,t){zi=ms=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Zg(e,t,a){if((a&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,a|=o,t.lanes=a,Gl(e,a)}}var Ho={readContext:ct,use:xs,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke,useHostTransitionStatus:Ke,useFormState:Ke,useActionState:Ke,useOptimistic:Ke,useMemoCache:Ke,useCacheRefresh:Ke};Ho.useEffectEvent=Ke;var Qg={readContext:ct,use:xs,useCallback:function(e,t){return xt().memoizedState=[e,t===void 0?null:t],e},useContext:ct,useEffect:jg,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Ss(4194308,4,Gg.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Ss(4194308,4,e,t)},useInsertionEffect:function(e,t){Ss(4,2,e,t)},useMemo:function(e,t){var a=xt();t=t===void 0?null:t;var o=e();if($a){on(!0);try{e()}finally{on(!1)}}return a.memoizedState=[o,t],o},useReducer:function(e,t,a){var o=xt();if(a!==void 0){var c=a(t);if($a){on(!0);try{a(t)}finally{on(!1)}}}else c=t;return o.memoizedState=o.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},o.queue=e,e=e.dispatch=Gx.bind(null,Se,e),[o.memoizedState,e]},useRef:function(e){var t=xt();return e={current:e},t.memoizedState=e},useState:function(e){e=Pc(e);var t=e.queue,a=Xg.bind(null,Se,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:nu,useDeferredValue:function(e,t){var a=xt();return au(a,e,t)},useTransition:function(){var e=Pc(!1);return e=Ig.bind(null,Se,e.queue,!0,!1),xt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var o=Se,c=xt();if(Me){if(a===void 0)throw Error(s(407));a=a()}else{if(a=t(),Ie===null)throw Error(s(349));(Te&127)!==0||mg(o,t,a)}c.memoizedState=a;var u={value:a,getSnapshot:t};return c.queue=u,jg(vg.bind(null,o,u,e),[e]),o.flags|=2048,Hi(9,{destroy:void 0},yg.bind(null,o,u,a,t),null),a},useId:function(){var e=xt(),t=Ie.identifierPrefix;if(Me){var a=rn,o=sn;a=(o&~(1<<32-vt(o)-1)).toString(32)+a,t="_"+t+"R_"+a,a=ys++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Mx++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ou,useFormState:Tg,useActionState:Tg,useOptimistic:function(e){var t=xt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=lu.bind(null,Se,!0,a),a.dispatch=t,[e,t]},useMemoCache:Jc,useCacheRefresh:function(){return xt().memoizedState=Hx.bind(null,Se)},useEffectEvent:function(e){var t=xt(),a={impl:e};return t.memoizedState=a,function(){if((ze&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},su={readContext:ct,use:xs,useCallback:Ug,useContext:ct,useEffect:tu,useImperativeHandle:kg,useInsertionEffect:Rg,useLayoutEffect:Hg,useMemo:Lg,useReducer:bs,useRef:Dg,useState:function(){return bs(Mn)},useDebugValue:nu,useDeferredValue:function(e,t){var a=Je();return Bg(a,Ue.memoizedState,e,t)},useTransition:function(){var e=bs(Mn)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:zo(e),t]},useSyncExternalStore:pg,useId:Vg,useHostTransitionStatus:ou,useFormState:Cg,useActionState:Cg,useOptimistic:function(e,t){var a=Je();return Sg(a,Ue,e,t)},useMemoCache:Jc,useCacheRefresh:$g};su.useEffectEvent=zg;var Jg={readContext:ct,use:xs,useCallback:Ug,useContext:ct,useEffect:tu,useImperativeHandle:kg,useInsertionEffect:Rg,useLayoutEffect:Hg,useMemo:Lg,useReducer:Wc,useRef:Dg,useState:function(){return Wc(Mn)},useDebugValue:nu,useDeferredValue:function(e,t){var a=Je();return Ue===null?au(a,e,t):Bg(a,Ue.memoizedState,e,t)},useTransition:function(){var e=Wc(Mn)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:zo(e),t]},useSyncExternalStore:pg,useId:Vg,useHostTransitionStatus:ou,useFormState:Og,useActionState:Og,useOptimistic:function(e,t){var a=Je();return Ue!==null?Sg(a,Ue,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Jc,useCacheRefresh:$g};Jg.useEffectEvent=zg;function ru(e,t,a,o){t=e.memoizedState,a=a(o,t),a=a==null?t:x({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var cu={enqueueSetState:function(e,t,a){e=e._reactInternals;var o=Gt(),c=na(o);c.payload=t,a!=null&&(c.callback=a),t=aa(e,c,o),t!==null&&(Tt(t,e,o),Mo(t,e,o))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var o=Gt(),c=na(o);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=aa(e,c,o),t!==null&&(Tt(t,e,o),Mo(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Gt(),o=na(a);o.tag=2,t!=null&&(o.callback=t),t=aa(e,o,a),t!==null&&(Tt(t,e,a),Mo(t,e,a))}};function Fg(e,t,a,o,c,u,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,u,v):t.prototype&&t.prototype.isPureReactComponent?!So(a,o)||!So(c,u):!0}function Wg(e,t,a,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,o),t.state!==e&&cu.enqueueReplaceState(t,t.state,null)}function Xa(e,t){var a=t;if("ref"in t){a={};for(var o in t)o!=="ref"&&(a[o]=t[o])}if(e=e.defaultProps){a===t&&(a=x({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}function Pg(e){ts(e)}function eh(e){console.error(e)}function th(e){ts(e)}function _s(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function nh(e,t,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function uu(e,t,a){return a=na(a),a.tag=3,a.payload={element:null},a.callback=function(){_s(e,t)},a}function ah(e){return e=na(e),e.tag=3,e}function ih(e,t,a,o){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var u=o.value;e.payload=function(){return c(u)},e.callback=function(){nh(t,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){nh(t,a,o),typeof c!="function"&&(ca===null?ca=new Set([this]):ca.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function kx(e,t,a,o,c){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=a.alternate,t!==null&&Ti(t,a,c,!0),a=jt.current,a!==null){switch(a.tag){case 31:case 13:return Vt===null?Gs():a.alternate===null&&Ze===0&&(Ze=3),a.flags&=-257,a.flags|=65536,a.lanes=c,o===fs?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([o]):t.add(o),Hu(e,o,c)),!1;case 22:return a.flags|=65536,o===fs?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([o]):a.add(o)),Hu(e,o,c)),!1}throw Error(s(435,a.tag))}return Hu(e,o,c),Gs(),!1}if(Me)return t=jt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,o!==Mc&&(e=Error(s(422),{cause:o}),_o(Bt(e,a)))):(o!==Mc&&(t=Error(s(423),{cause:o}),_o(Bt(t,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,o=Bt(o,a),c=uu(e.stateNode,o,c),Bc(e,c),Ze!==4&&(Ze=2)),!1;var u=Error(s(520),{cause:o});if(u=Bt(u,a),Yo===null?Yo=[u]:Yo.push(u),Ze!==4&&(Ze=2),t===null)return!0;o=Bt(o,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=uu(a.stateNode,o,e),Bc(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(ca===null||!ca.has(u))))return a.flags|=65536,c&=-c,a.lanes|=c,c=ah(c),ih(c,e,a,o),Bc(a,c),!1}a=a.return}while(a!==null);return!1}var fu=Error(s(461)),et=!1;function ut(e,t,a,o){t.child=e===null?rg(t,null,a,o):Va(t,e.child,a,o)}function oh(e,t,a,o,c){a=a.render;var u=t.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Ba(t),o=Xc(e,t,a,v,u,c),E=Kc(),e!==null&&!et?(Zc(e,t,c),On(e,t,c)):(Me&&E&&Tc(t),t.flags|=1,ut(e,t,o,c),t.child)}function lh(e,t,a,o,c){if(e===null){var u=a.type;return typeof u=="function"&&!_c(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,sh(e,t,u,o,c)):(e=os(a.type,null,o,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!xu(e,c)){var v=u.memoizedProps;if(a=a.compare,a=a!==null?a:So,a(v,o)&&e.ref===t.ref)return On(e,t,c)}return t.flags|=1,e=_n(u,o),e.ref=t.ref,e.return=t,t.child=e}function sh(e,t,a,o,c){if(e!==null){var u=e.memoizedProps;if(So(u,o)&&e.ref===t.ref)if(et=!1,t.pendingProps=o=u,xu(e,c))(e.flags&131072)!==0&&(et=!0);else return t.lanes=e.lanes,On(e,t,c)}return du(e,t,a,o,c)}function rh(e,t,a,o){var c=o.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(o=t.child=e.child,c=0;o!==null;)c=c|o.lanes|o.childLanes,o=o.sibling;o=c&~u}else o=0,t.child=null;return ch(e,t,u,a,o)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&cs(t,u!==null?u.cachePool:null),u!==null?fg(t,u):qc(),dg(t);else return o=t.lanes=536870912,ch(e,t,u!==null?u.baseLanes|a:a,a,o)}else u!==null?(cs(t,u.cachePool),fg(t,u),oa(),t.memoizedState=null):(e!==null&&cs(t,null),qc(),oa());return ut(e,t,c,a),t.child}function Go(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ch(e,t,a,o,c){var u=Gc();return u=u===null?null:{parent:We._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&cs(t,null),qc(),dg(t),e!==null&&Ti(e,t,o,!0),t.childLanes=c,null}function Ns(e,t){return t=Ts({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function uh(e,t,a){return Va(t,e.child,null,a),e=Ns(t,t.pendingProps),e.flags|=2,zt(t),t.memoizedState=null,e}function Ux(e,t,a){var o=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Me){if(o.mode==="hidden")return e=Ns(t,o),t.lanes=536870912,Go(null,e);if(Vc(t),(e=qe)?(e=wp(e,Yt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Fn!==null?{id:sn,overflow:rn}:null,retryLane:536870912,hydrationErrors:null},a=Kd(e),a.return=t,t.child=a,rt=t,qe=null)):e=null,e===null)throw Pn(t);return t.lanes=536870912,null}return Ns(t,o)}var u=e.memoizedState;if(u!==null){var v=u.dehydrated;if(Vc(t),c)if(t.flags&256)t.flags&=-257,t=uh(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(et||Ti(e,t,a,!1),c=(a&e.childLanes)!==0,et||c){if(o=Ie,o!==null&&(v=kl(o,a),v!==0&&v!==u.retryLane))throw u.retryLane=v,Ga(e,v),Tt(o,e,v),fu;Gs(),t=uh(e,t,a)}else e=u.treeContext,qe=$t(v.nextSibling),rt=t,Me=!0,Wn=null,Yt=!1,e!==null&&Jd(t,e),t=Ns(t,o),t.flags|=4096;return t}return e=_n(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function As(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function du(e,t,a,o,c){return Ba(t),a=Xc(e,t,a,o,void 0,c),o=Kc(),e!==null&&!et?(Zc(e,t,c),On(e,t,c)):(Me&&o&&Tc(t),t.flags|=1,ut(e,t,a,c),t.child)}function fh(e,t,a,o,c,u){return Ba(t),t.updateQueue=null,a=hg(t,o,a,c),gg(e),o=Kc(),e!==null&&!et?(Zc(e,t,u),On(e,t,u)):(Me&&o&&Tc(t),t.flags|=1,ut(e,t,a,u),t.child)}function dh(e,t,a,o,c){if(Ba(t),t.stateNode===null){var u=Ei,v=a.contextType;typeof v=="object"&&v!==null&&(u=ct(v)),u=new a(o,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=cu,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=o,u.state=t.memoizedState,u.refs={},Uc(t),v=a.contextType,u.context=typeof v=="object"&&v!==null?ct(v):Ei,u.state=t.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(ru(t,a,v,o),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(v=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),v!==u.state&&cu.enqueueReplaceState(u,u.state,null),Do(t,o,u,c),Oo(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){u=t.stateNode;var E=t.memoizedProps,R=Xa(a,E);u.props=R;var Q=u.context,ne=a.contextType;v=Ei,typeof ne=="object"&&ne!==null&&(v=ct(ne));var oe=a.getDerivedStateFromProps;ne=typeof oe=="function"||typeof u.getSnapshotBeforeUpdate=="function",E=t.pendingProps!==E,ne||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(E||Q!==v)&&Wg(t,u,o,v),ta=!1;var F=t.memoizedState;u.state=F,Do(t,o,u,c),Oo(),Q=t.memoizedState,E||F!==Q||ta?(typeof oe=="function"&&(ru(t,a,oe,o),Q=t.memoizedState),(R=ta||Fg(t,a,R,o,F,Q,v))?(ne||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=Q),u.props=o,u.state=Q,u.context=v,o=R):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{u=t.stateNode,Lc(e,t),v=t.memoizedProps,ne=Xa(a,v),u.props=ne,oe=t.pendingProps,F=u.context,Q=a.contextType,R=Ei,typeof Q=="object"&&Q!==null&&(R=ct(Q)),E=a.getDerivedStateFromProps,(Q=typeof E=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(v!==oe||F!==R)&&Wg(t,u,o,R),ta=!1,F=t.memoizedState,u.state=F,Do(t,o,u,c),Oo();var P=t.memoizedState;v!==oe||F!==P||ta||e!==null&&e.dependencies!==null&&ss(e.dependencies)?(typeof E=="function"&&(ru(t,a,E,o),P=t.memoizedState),(ne=ta||Fg(t,a,ne,o,F,P,R)||e!==null&&e.dependencies!==null&&ss(e.dependencies))?(Q||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(o,P,R),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(o,P,R)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||v===e.memoizedProps&&F===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&F===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=P),u.props=o,u.state=P,u.context=R,o=ne):(typeof u.componentDidUpdate!="function"||v===e.memoizedProps&&F===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&F===e.memoizedState||(t.flags|=1024),o=!1)}return u=o,As(e,t),o=(t.flags&128)!==0,u||o?(u=t.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&o?(t.child=Va(t,e.child,null,c),t.child=Va(t,null,a,c)):ut(e,t,a,c),t.memoizedState=u.state,e=t.child):e=On(e,t,c),e}function gh(e,t,a,o){return Ua(),t.flags|=256,ut(e,t,a,o),t.child}var gu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hu(e){return{baseLanes:e,cachePool:ng()}}function pu(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Ht),e}function hh(e,t,a){var o=t.pendingProps,c=!1,u=(t.flags&128)!==0,v;if((v=u)||(v=e!==null&&e.memoizedState===null?!1:(Qe.current&2)!==0),v&&(c=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(Me){if(c?ia(t):oa(),(e=qe)?(e=wp(e,Yt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Fn!==null?{id:sn,overflow:rn}:null,retryLane:536870912,hydrationErrors:null},a=Kd(e),a.return=t,t.child=a,rt=t,qe=null)):e=null,e===null)throw Pn(t);return Fu(e)?t.lanes=32:t.lanes=536870912,null}var E=o.children;return o=o.fallback,c?(oa(),c=t.mode,E=Ts({mode:"hidden",children:E},c),o=ka(o,c,a,null),E.return=t,o.return=t,E.sibling=o,t.child=E,o=t.child,o.memoizedState=hu(a),o.childLanes=pu(e,v,a),t.memoizedState=gu,Go(null,o)):(ia(t),mu(t,E))}var R=e.memoizedState;if(R!==null&&(E=R.dehydrated,E!==null)){if(u)t.flags&256?(ia(t),t.flags&=-257,t=yu(e,t,a)):t.memoizedState!==null?(oa(),t.child=e.child,t.flags|=128,t=null):(oa(),E=o.fallback,c=t.mode,o=Ts({mode:"visible",children:o.children},c),E=ka(E,c,a,null),E.flags|=2,o.return=t,E.return=t,o.sibling=E,t.child=o,Va(t,e.child,null,a),o=t.child,o.memoizedState=hu(a),o.childLanes=pu(e,v,a),t.memoizedState=gu,t=Go(null,o));else if(ia(t),Fu(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var Q=v.dgst;v=Q,o=Error(s(419)),o.stack="",o.digest=v,_o({value:o,source:null,stack:null}),t=yu(e,t,a)}else if(et||Ti(e,t,a,!1),v=(a&e.childLanes)!==0,et||v){if(v=Ie,v!==null&&(o=kl(v,a),o!==0&&o!==R.retryLane))throw R.retryLane=o,Ga(e,o),Tt(v,e,o),fu;Ju(E)||Gs(),t=yu(e,t,a)}else Ju(E)?(t.flags|=192,t.child=e.child,t=null):(e=R.treeContext,qe=$t(E.nextSibling),rt=t,Me=!0,Wn=null,Yt=!1,e!==null&&Jd(t,e),t=mu(t,o.children),t.flags|=4096);return t}return c?(oa(),E=o.fallback,c=t.mode,R=e.child,Q=R.sibling,o=_n(R,{mode:"hidden",children:o.children}),o.subtreeFlags=R.subtreeFlags&65011712,Q!==null?E=_n(Q,E):(E=ka(E,c,a,null),E.flags|=2),E.return=t,o.return=t,o.sibling=E,t.child=o,Go(null,o),o=t.child,E=e.child.memoizedState,E===null?E=hu(a):(c=E.cachePool,c!==null?(R=We._currentValue,c=c.parent!==R?{parent:R,pool:R}:c):c=ng(),E={baseLanes:E.baseLanes|a,cachePool:c}),o.memoizedState=E,o.childLanes=pu(e,v,a),t.memoizedState=gu,Go(e.child,o)):(ia(t),a=e.child,e=a.sibling,a=_n(a,{mode:"visible",children:o.children}),a.return=t,a.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=a,t.memoizedState=null,a)}function mu(e,t){return t=Ts({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ts(e,t){return e=Dt(22,e,null,t),e.lanes=0,e}function yu(e,t,a){return Va(t,e.child,null,a),e=mu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ph(e,t,a){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),jc(e.return,t,a)}function vu(e,t,a,o,c,u){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:c,treeForkCount:u}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=a,v.tailMode=c,v.treeForkCount=u)}function mh(e,t,a){var o=t.pendingProps,c=o.revealOrder,u=o.tail;o=o.children;var v=Qe.current,E=(v&2)!==0;if(E?(v=v&1|2,t.flags|=128):v&=1,ee(Qe,v),ut(e,t,o,a),o=Me?Eo:0,!E&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ph(e,a,t);else if(e.tag===19)ph(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(a=t.child,c=null;a!==null;)e=a.alternate,e!==null&&ps(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),vu(t,!1,c,a,u,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&ps(e)===null){t.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}vu(t,!0,a,null,u,o);break;case"together":vu(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function On(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),ra|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Ti(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,a=_n(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=_n(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function xu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ss(e)))}function Lx(e,t,a){switch(t.tag){case 3:re(t,t.stateNode.containerInfo),ea(t,We,e.memoizedState.cache),Ua();break;case 27:case 5:we(t);break;case 4:re(t,t.stateNode.containerInfo);break;case 10:ea(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Vc(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(ia(t),t.flags|=128,null):(a&t.child.childLanes)!==0?hh(e,t,a):(ia(t),e=On(e,t,a),e!==null?e.sibling:null);ia(t);break;case 19:var c=(e.flags&128)!==0;if(o=(a&t.childLanes)!==0,o||(Ti(e,t,a,!1),o=(a&t.childLanes)!==0),c){if(o)return mh(e,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ee(Qe,Qe.current),o)break;return null;case 22:return t.lanes=0,rh(e,t,a,t.pendingProps);case 24:ea(t,We,e.memoizedState.cache)}return On(e,t,a)}function yh(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)et=!0;else{if(!xu(e,a)&&(t.flags&128)===0)return et=!1,Lx(e,t,a);et=(e.flags&131072)!==0}else et=!1,Me&&(t.flags&1048576)!==0&&Qd(t,Eo,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=qa(t.elementType),t.type=e,typeof e=="function")_c(e)?(o=Xa(e,o),t.tag=1,t=dh(null,t,e,o,a)):(t.tag=0,t=du(null,t,e,o,a));else{if(e!=null){var c=e.$$typeof;if(c===M){t.tag=11,t=oh(null,t,e,o,a);break e}else if(c===G){t.tag=14,t=lh(null,t,e,o,a);break e}}throw t=z(e)||e,Error(s(306,t,""))}}return t;case 0:return du(e,t,t.type,t.pendingProps,a);case 1:return o=t.type,c=Xa(o,t.pendingProps),dh(e,t,o,c,a);case 3:e:{if(re(t,t.stateNode.containerInfo),e===null)throw Error(s(387));o=t.pendingProps;var u=t.memoizedState;c=u.element,Lc(e,t),Do(t,o,null,a);var v=t.memoizedState;if(o=v.cache,ea(t,We,o),o!==u.cache&&zc(t,[We],a,!0),Oo(),o=v.element,u.isDehydrated)if(u={element:o,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=gh(e,t,o,a);break e}else if(o!==c){c=Bt(Error(s(424)),t),_o(c),t=gh(e,t,o,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,qe=$t(e.firstChild),rt=t,Me=!0,Wn=null,Yt=!0,a=rg(t,null,o,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ua(),o===c){t=On(e,t,a);break e}ut(e,t,o,a)}t=t.child}return t;case 26:return As(e,t),e===null?(a=Cp(t.type,null,t.pendingProps,null))?t.memoizedState=a:Me||(a=t.type,e=t.pendingProps,o=Ys(ue.current).createElement(a),o[at]=t,o[ht]=e,ft(o,a,e),Fe(o),t.stateNode=o):t.memoizedState=Cp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return we(t),e===null&&Me&&(o=t.stateNode=Np(t.type,t.pendingProps,ue.current),rt=t,Yt=!0,c=qe,ga(t.type)?(Wu=c,qe=$t(o.firstChild)):qe=c),ut(e,t,t.pendingProps.children,a),As(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Me&&((c=o=qe)&&(o=pb(o,t.type,t.pendingProps,Yt),o!==null?(t.stateNode=o,rt=t,qe=$t(o.firstChild),Yt=!1,c=!0):c=!1),c||Pn(t)),we(t),c=t.type,u=t.pendingProps,v=e!==null?e.memoizedProps:null,o=u.children,Ku(c,u)?o=null:v!==null&&Ku(c,v)&&(t.flags|=32),t.memoizedState!==null&&(c=Xc(e,t,Ox,null,null,a),Fo._currentValue=c),As(e,t),ut(e,t,o,a),t.child;case 6:return e===null&&Me&&((e=a=qe)&&(a=mb(a,t.pendingProps,Yt),a!==null?(t.stateNode=a,rt=t,qe=null,e=!0):e=!1),e||Pn(t)),null;case 13:return hh(e,t,a);case 4:return re(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Va(t,null,o,a):ut(e,t,o,a),t.child;case 11:return oh(e,t,t.type,t.pendingProps,a);case 7:return ut(e,t,t.pendingProps,a),t.child;case 8:return ut(e,t,t.pendingProps.children,a),t.child;case 12:return ut(e,t,t.pendingProps.children,a),t.child;case 10:return o=t.pendingProps,ea(t,t.type,o.value),ut(e,t,o.children,a),t.child;case 9:return c=t.type._context,o=t.pendingProps.children,Ba(t),c=ct(c),o=o(c),t.flags|=1,ut(e,t,o,a),t.child;case 14:return lh(e,t,t.type,t.pendingProps,a);case 15:return sh(e,t,t.type,t.pendingProps,a);case 19:return mh(e,t,a);case 31:return Ux(e,t,a);case 22:return rh(e,t,a,t.pendingProps);case 24:return Ba(t),o=ct(We),e===null?(c=Gc(),c===null&&(c=Ie,u=Rc(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=a),c=u),t.memoizedState={parent:o,cache:c},Uc(t),ea(t,We,c)):((e.lanes&a)!==0&&(Lc(e,t),Do(t,null,null,a),Oo()),c=e.memoizedState,u=t.memoizedState,c.parent!==o?(c={parent:o,cache:o},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),ea(t,We,o)):(o=u.cache,ea(t,We,o),o!==c.cache&&zc(t,[We],a,!0))),ut(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Dn(e){e.flags|=4}function bu(e,t,a,o,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Vh())e.flags|=8192;else throw Ya=fs,kc}else e.flags&=-16777217}function vh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!zp(t))if(Vh())e.flags|=8192;else throw Ya=fs,kc}function Cs(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Rl():536870912,e.lanes|=t,Li|=t)}function ko(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(t)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,o|=c.subtreeFlags&65011712,o|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=o,e.childLanes=a,t}function Bx(e,t,a){var o=t.pendingProps;switch(Cc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return Ye(t),null;case 3:return a=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Tn(We),fe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ai(t)?Dn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Oc())),Ye(t),null;case 26:var c=t.type,u=t.memoizedState;return e===null?(Dn(t),u!==null?(Ye(t),vh(t,u)):(Ye(t),bu(t,c,null,o,a))):u?u!==e.memoizedState?(Dn(t),Ye(t),vh(t,u)):(Ye(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&Dn(t),Ye(t),bu(t,c,e,o,a)),null;case 27:if(be(t),a=ue.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Dn(t);else{if(!o){if(t.stateNode===null)throw Error(s(166));return Ye(t),null}e=q.current,Ai(t)?Fd(t):(e=Np(c,o,a),t.stateNode=e,Dn(t))}return Ye(t),null;case 5:if(be(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Dn(t);else{if(!o){if(t.stateNode===null)throw Error(s(166));return Ye(t),null}if(u=q.current,Ai(t))Fd(t);else{var v=Ys(ue.current);switch(u){case 1:u=v.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=v.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=v.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?u.multiple=!0:o.size&&(u.size=o.size);break;default:u=typeof o.is=="string"?v.createElement(c,{is:o.is}):v.createElement(c)}}u[at]=t,u[ht]=o;e:for(v=t.child;v!==null;){if(v.tag===5||v.tag===6)u.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}t.stateNode=u;e:switch(ft(u,c,o),c){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Dn(t)}}return Ye(t),bu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&Dn(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(s(166));if(e=ue.current,Ai(t)){if(e=t.stateNode,a=t.memoizedProps,o=null,c=rt,c!==null)switch(c.tag){case 27:case 5:o=c.memoizedProps}e[at]=t,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||hp(e.nodeValue,a)),e||Pn(t,!0)}else e=Ys(e).createTextNode(o),e[at]=t,t.stateNode=e}return Ye(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(o=Ai(t),a!==null){if(e===null){if(!o)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[at]=t}else Ua(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),e=!1}else a=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(zt(t),t):(zt(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Ye(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Ai(t),o!==null&&o.dehydrated!==null){if(e===null){if(!c)throw Error(s(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));c[at]=t}else Ua(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),c=!1}else c=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(zt(t),t):(zt(t),null)}return zt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=t.child,c=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(c=o.alternate.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==c&&(o.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Cs(t,t.updateQueue),Ye(t),null);case 4:return fe(),e===null&&qu(t.stateNode.containerInfo),Ye(t),null;case 10:return Tn(t.type),Ye(t),null;case 19:if(U(Qe),o=t.memoizedState,o===null)return Ye(t),null;if(c=(t.flags&128)!==0,u=o.rendering,u===null)if(c)ko(o,!1);else{if(Ze!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=ps(e),u!==null){for(t.flags|=128,ko(o,!1),e=u.updateQueue,t.updateQueue=e,Cs(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Xd(a,e),a=a.sibling;return ee(Qe,Qe.current&1|2),Me&&Nn(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&st()>zs&&(t.flags|=128,c=!0,ko(o,!1),t.lanes=4194304)}else{if(!c)if(e=ps(u),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Cs(t,e),ko(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!Me)return Ye(t),null}else 2*st()-o.renderingStartTime>zs&&a!==536870912&&(t.flags|=128,c=!0,ko(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(e=o.last,e!==null?e.sibling=u:t.child=u,o.last=u)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=st(),e.sibling=null,a=Qe.current,ee(Qe,c?a&1|2:a&1),Me&&Nn(t,o.treeForkCount),e):(Ye(t),null);case 22:case 23:return zt(t),Yc(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(a&536870912)!==0&&(t.flags&128)===0&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),a=t.updateQueue,a!==null&&Cs(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==a&&(t.flags|=2048),e!==null&&U(Ia),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Tn(We),Ye(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Ix(e,t){switch(Cc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Tn(We),fe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return be(t),null;case 31:if(t.memoizedState!==null){if(zt(t),t.alternate===null)throw Error(s(340));Ua()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(zt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Ua()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return U(Qe),null;case 4:return fe(),null;case 10:return Tn(t.type),null;case 22:case 23:return zt(t),Yc(),e!==null&&U(Ia),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Tn(We),null;case 25:return null;default:return null}}function xh(e,t){switch(Cc(t),t.tag){case 3:Tn(We),fe();break;case 26:case 27:case 5:be(t);break;case 4:fe();break;case 31:t.memoizedState!==null&&zt(t);break;case 13:zt(t);break;case 19:U(Qe);break;case 10:Tn(t.type);break;case 22:case 23:zt(t),Yc(),e!==null&&U(Ia);break;case 24:Tn(We)}}function Uo(e,t){try{var a=t.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var c=o.next;a=c;do{if((a.tag&e)===e){o=void 0;var u=a.create,v=a.inst;o=u(),v.destroy=o}a=a.next}while(a!==c)}}catch(E){Ge(t,t.return,E)}}function la(e,t,a){try{var o=t.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var u=c.next;o=u;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,c=t;var R=a,Q=E;try{Q()}catch(ne){Ge(c,R,ne)}}}o=o.next}while(o!==u)}}catch(ne){Ge(t,t.return,ne)}}function bh(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{ug(t,a)}catch(o){Ge(e,e.return,o)}}}function Sh(e,t,a){a.props=Xa(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Ge(e,t,o)}}function Lo(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(c){Ge(e,t,c)}}function cn(e,t){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(c){Ge(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){Ge(e,t,c)}else a.current=null}function wh(e){var t=e.type,a=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(c){Ge(e,e.return,c)}}function Su(e,t,a){try{var o=e.stateNode;cb(o,e.type,a,t),o[ht]=t}catch(c){Ge(e,e.return,c)}}function Eh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ga(e.type)||e.tag===4}function wu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Eh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ga(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Eu(e,t,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=wn));else if(o!==4&&(o===27&&ga(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Eu(e,t,a),e=e.sibling;e!==null;)Eu(e,t,a),e=e.sibling}function Ms(e,t,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(o!==4&&(o===27&&ga(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ms(e,t,a),e=e.sibling;e!==null;)Ms(e,t,a),e=e.sibling}function _h(e){var t=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);ft(t,o,a),t[at]=e,t[ht]=a}catch(u){Ge(e,e.return,u)}}var jn=!1,tt=!1,_u=!1,Nh=typeof WeakSet=="function"?WeakSet:Set,lt=null;function qx(e,t){if(e=e.containerInfo,$u=Js,e=kd(e),yc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var c=o.anchorOffset,u=o.focusNode;o=o.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var v=0,E=-1,R=-1,Q=0,ne=0,oe=e,F=null;t:for(;;){for(var P;oe!==a||c!==0&&oe.nodeType!==3||(E=v+c),oe!==u||o!==0&&oe.nodeType!==3||(R=v+o),oe.nodeType===3&&(v+=oe.nodeValue.length),(P=oe.firstChild)!==null;)F=oe,oe=P;for(;;){if(oe===e)break t;if(F===a&&++Q===c&&(E=v),F===u&&++ne===o&&(R=v),(P=oe.nextSibling)!==null)break;oe=F,F=oe.parentNode}oe=P}a=E===-1||R===-1?null:{start:E,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Xu={focusedElem:e,selectionRange:a},Js=!1,lt=t;lt!==null;)if(t=lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,lt=e;else for(;lt!==null;){switch(t=lt,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)c=e[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,c=u.memoizedProps,u=u.memoizedState,o=a.stateNode;try{var ge=Xa(a.type,c);e=o.getSnapshotBeforeUpdate(ge,u),o.__reactInternalSnapshotBeforeUpdate=e}catch(ye){Ge(a,a.return,ye)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Qu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Qu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,lt=e;break}lt=t.return}}function Ah(e,t,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Rn(e,a),o&4&&Uo(5,a);break;case 1:if(Rn(e,a),o&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(v){Ge(a,a.return,v)}else{var c=Xa(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Ge(a,a.return,v)}}o&64&&bh(a),o&512&&Lo(a,a.return);break;case 3:if(Rn(e,a),o&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{ug(e,t)}catch(v){Ge(a,a.return,v)}}break;case 27:t===null&&o&4&&_h(a);case 26:case 5:Rn(e,a),t===null&&o&4&&wh(a),o&512&&Lo(a,a.return);break;case 12:Rn(e,a);break;case 31:Rn(e,a),o&4&&Mh(e,a);break;case 13:Rn(e,a),o&4&&Oh(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Fx.bind(null,a),yb(e,a))));break;case 22:if(o=a.memoizedState!==null||jn,!o){t=t!==null&&t.memoizedState!==null||tt,c=jn;var u=tt;jn=o,(tt=t)&&!u?Hn(e,a,(a.subtreeFlags&8772)!==0):Rn(e,a),jn=c,tt=u}break;case 30:break;default:Rn(e,a)}}function Th(e){var t=e.alternate;t!==null&&(e.alternate=null,Th(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&uo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ve=null,Et=!1;function zn(e,t,a){for(a=a.child;a!==null;)Ch(e,t,a),a=a.sibling}function Ch(e,t,a){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(Ta,a)}catch{}switch(a.tag){case 26:tt||cn(a,t),zn(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:tt||cn(a,t);var o=Ve,c=Et;ga(a.type)&&(Ve=a.stateNode,Et=!1),zn(e,t,a),Zo(a.stateNode),Ve=o,Et=c;break;case 5:tt||cn(a,t);case 6:if(o=Ve,c=Et,Ve=null,zn(e,t,a),Ve=o,Et=c,Ve!==null)if(Et)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(a.stateNode)}catch(u){Ge(a,t,u)}else try{Ve.removeChild(a.stateNode)}catch(u){Ge(a,t,u)}break;case 18:Ve!==null&&(Et?(e=Ve,bp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ki(e)):bp(Ve,a.stateNode));break;case 4:o=Ve,c=Et,Ve=a.stateNode.containerInfo,Et=!0,zn(e,t,a),Ve=o,Et=c;break;case 0:case 11:case 14:case 15:la(2,a,t),tt||la(4,a,t),zn(e,t,a);break;case 1:tt||(cn(a,t),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Sh(a,t,o)),zn(e,t,a);break;case 21:zn(e,t,a);break;case 22:tt=(o=tt)||a.memoizedState!==null,zn(e,t,a),tt=o;break;default:zn(e,t,a)}}function Mh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ki(e)}catch(a){Ge(t,t.return,a)}}}function Oh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ki(e)}catch(a){Ge(t,t.return,a)}}function Yx(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Nh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Nh),t;default:throw Error(s(435,e.tag))}}function Os(e,t){var a=Yx(e);t.forEach(function(o){if(!a.has(o)){a.add(o);var c=Wx.bind(null,e,o);o.then(c,c)}})}function _t(e,t){var a=t.deletions;if(a!==null)for(var o=0;o<a.length;o++){var c=a[o],u=e,v=t,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(ga(E.type)){Ve=E.stateNode,Et=!1;break e}break;case 5:Ve=E.stateNode,Et=!1;break e;case 3:case 4:Ve=E.stateNode.containerInfo,Et=!0;break e}E=E.return}if(Ve===null)throw Error(s(160));Ch(u,v,c),Ve=null,Et=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Dh(t,e),t=t.sibling}var Ft=null;function Dh(e,t){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_t(t,e),Nt(e),o&4&&(la(3,e,e.return),Uo(3,e),la(5,e,e.return));break;case 1:_t(t,e),Nt(e),o&512&&(tt||a===null||cn(a,a.return)),o&64&&jn&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var c=Ft;if(_t(t,e),Nt(e),o&512&&(tt||a===null||cn(a,a.return)),o&4){var u=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){e:{o=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(o){case"title":u=c.getElementsByTagName("title")[0],(!u||u[Oa]||u[at]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(o),c.head.insertBefore(u,c.querySelector("head > title"))),ft(u,o,a),u[at]=e,Fe(u),o=u;break e;case"link":var v=Dp("link","href",c).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(u=v[E],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break t}}u=c.createElement(o),ft(u,o,a),c.head.appendChild(u);break;case"meta":if(v=Dp("meta","content",c).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(u=v[E],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break t}}u=c.createElement(o),ft(u,o,a),c.head.appendChild(u);break;default:throw Error(s(468,o))}u[at]=e,Fe(u),o=u}e.stateNode=o}else jp(c,e.type,e.stateNode);else e.stateNode=Op(c,o,e.memoizedProps);else u!==o?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,o===null?jp(c,e.type,e.stateNode):Op(c,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Su(e,e.memoizedProps,a.memoizedProps)}break;case 27:_t(t,e),Nt(e),o&512&&(tt||a===null||cn(a,a.return)),a!==null&&o&4&&Su(e,e.memoizedProps,a.memoizedProps);break;case 5:if(_t(t,e),Nt(e),o&512&&(tt||a===null||cn(a,a.return)),e.flags&32){c=e.stateNode;try{mi(c,"")}catch(ge){Ge(e,e.return,ge)}}o&4&&e.stateNode!=null&&(c=e.memoizedProps,Su(e,c,a!==null?a.memoizedProps:c)),o&1024&&(_u=!0);break;case 6:if(_t(t,e),Nt(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(ge){Ge(e,e.return,ge)}}break;case 3:if(Xs=null,c=Ft,Ft=Vs(t.containerInfo),_t(t,e),Ft=c,Nt(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Ki(t.containerInfo)}catch(ge){Ge(e,e.return,ge)}_u&&(_u=!1,jh(e));break;case 4:o=Ft,Ft=Vs(e.stateNode.containerInfo),_t(t,e),Nt(e),Ft=o;break;case 12:_t(t,e),Nt(e);break;case 31:_t(t,e),Nt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Os(e,o)));break;case 13:_t(t,e),Nt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(js=st()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Os(e,o)));break;case 22:c=e.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,Q=jn,ne=tt;if(jn=Q||c,tt=ne||R,_t(t,e),tt=ne,jn=Q,Nt(e),o&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||R||jn||tt||Ka(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){R=a=t;try{if(u=R.stateNode,c)v=u.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=R.stateNode;var oe=R.memoizedProps.style,F=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;E.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(ge){Ge(R,R.return,ge)}}}else if(t.tag===6){if(a===null){R=t;try{R.stateNode.nodeValue=c?"":R.memoizedProps}catch(ge){Ge(R,R.return,ge)}}}else if(t.tag===18){if(a===null){R=t;try{var P=R.stateNode;c?Sp(P,!0):Sp(R.stateNode,!1)}catch(ge){Ge(R,R.return,ge)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Os(e,a))));break;case 19:_t(t,e),Nt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Os(e,o)));break;case 30:break;case 21:break;default:_t(t,e),Nt(e)}}function Nt(e){var t=e.flags;if(t&2){try{for(var a,o=e.return;o!==null;){if(Eh(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var c=a.stateNode,u=wu(e);Ms(e,u,c);break;case 5:var v=a.stateNode;a.flags&32&&(mi(v,""),a.flags&=-33);var E=wu(e);Ms(e,E,v);break;case 3:case 4:var R=a.stateNode.containerInfo,Q=wu(e);Eu(e,Q,R);break;default:throw Error(s(161))}}catch(ne){Ge(e,e.return,ne)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;jh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Rn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Ah(e,t.alternate,t),t=t.sibling}function Ka(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:la(4,t,t.return),Ka(t);break;case 1:cn(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Sh(t,t.return,a),Ka(t);break;case 27:Zo(t.stateNode);case 26:case 5:cn(t,t.return),Ka(t);break;case 22:t.memoizedState===null&&Ka(t);break;case 30:Ka(t);break;default:Ka(t)}e=e.sibling}}function Hn(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,c=e,u=t,v=u.flags;switch(u.tag){case 0:case 11:case 15:Hn(c,u,a),Uo(4,u);break;case 1:if(Hn(c,u,a),o=u,c=o.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(Q){Ge(o,o.return,Q)}if(o=u,c=o.updateQueue,c!==null){var E=o.stateNode;try{var R=c.shared.hiddenCallbacks;if(R!==null)for(c.shared.hiddenCallbacks=null,c=0;c<R.length;c++)cg(R[c],E)}catch(Q){Ge(o,o.return,Q)}}a&&v&64&&bh(u),Lo(u,u.return);break;case 27:_h(u);case 26:case 5:Hn(c,u,a),a&&o===null&&v&4&&wh(u),Lo(u,u.return);break;case 12:Hn(c,u,a);break;case 31:Hn(c,u,a),a&&v&4&&Mh(c,u);break;case 13:Hn(c,u,a),a&&v&4&&Oh(c,u);break;case 22:u.memoizedState===null&&Hn(c,u,a),Lo(u,u.return);break;case 30:break;default:Hn(c,u,a)}t=t.sibling}}function Nu(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&No(a))}function Au(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&No(e))}function Wt(e,t,a,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zh(e,t,a,o),t=t.sibling}function zh(e,t,a,o){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Wt(e,t,a,o),c&2048&&Uo(9,t);break;case 1:Wt(e,t,a,o);break;case 3:Wt(e,t,a,o),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&No(e)));break;case 12:if(c&2048){Wt(e,t,a,o),e=t.stateNode;try{var u=t.memoizedProps,v=u.id,E=u.onPostCommit;typeof E=="function"&&E(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Ge(t,t.return,R)}}else Wt(e,t,a,o);break;case 31:Wt(e,t,a,o);break;case 13:Wt(e,t,a,o);break;case 23:break;case 22:u=t.stateNode,v=t.alternate,t.memoizedState!==null?u._visibility&2?Wt(e,t,a,o):Bo(e,t):u._visibility&2?Wt(e,t,a,o):(u._visibility|=2,Gi(e,t,a,o,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Nu(v,t);break;case 24:Wt(e,t,a,o),c&2048&&Au(t.alternate,t);break;default:Wt(e,t,a,o)}}function Gi(e,t,a,o,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,v=t,E=a,R=o,Q=v.flags;switch(v.tag){case 0:case 11:case 15:Gi(u,v,E,R,c),Uo(8,v);break;case 23:break;case 22:var ne=v.stateNode;v.memoizedState!==null?ne._visibility&2?Gi(u,v,E,R,c):Bo(u,v):(ne._visibility|=2,Gi(u,v,E,R,c)),c&&Q&2048&&Nu(v.alternate,v);break;case 24:Gi(u,v,E,R,c),c&&Q&2048&&Au(v.alternate,v);break;default:Gi(u,v,E,R,c)}t=t.sibling}}function Bo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,o=t,c=o.flags;switch(o.tag){case 22:Bo(a,o),c&2048&&Nu(o.alternate,o);break;case 24:Bo(a,o),c&2048&&Au(o.alternate,o);break;default:Bo(a,o)}t=t.sibling}}var Io=8192;function ki(e,t,a){if(e.subtreeFlags&Io)for(e=e.child;e!==null;)Rh(e,t,a),e=e.sibling}function Rh(e,t,a){switch(e.tag){case 26:ki(e,t,a),e.flags&Io&&e.memoizedState!==null&&Mb(a,Ft,e.memoizedState,e.memoizedProps);break;case 5:ki(e,t,a);break;case 3:case 4:var o=Ft;Ft=Vs(e.stateNode.containerInfo),ki(e,t,a),Ft=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Io,Io=16777216,ki(e,t,a),Io=o):ki(e,t,a));break;default:ki(e,t,a)}}function Hh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function qo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var o=t[a];lt=o,kh(o,e)}Hh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Gh(e),e=e.sibling}function Gh(e){switch(e.tag){case 0:case 11:case 15:qo(e),e.flags&2048&&la(9,e,e.return);break;case 3:qo(e);break;case 12:qo(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ds(e)):qo(e);break;default:qo(e)}}function Ds(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var o=t[a];lt=o,kh(o,e)}Hh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:la(8,t,t.return),Ds(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Ds(t));break;default:Ds(t)}e=e.sibling}}function kh(e,t){for(;lt!==null;){var a=lt;switch(a.tag){case 0:case 11:case 15:la(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:No(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,lt=o;else e:for(a=e;lt!==null;){o=lt;var c=o.sibling,u=o.return;if(Th(o),o===a){lt=null;break e}if(c!==null){c.return=u,lt=c;break e}lt=u}}}var Vx={getCacheForType:function(e){var t=ct(We),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return ct(We).controller.signal}},$x=typeof WeakMap=="function"?WeakMap:Map,ze=0,Ie=null,_e=null,Te=0,He=0,Rt=null,sa=!1,Ui=!1,Tu=!1,Gn=0,Ze=0,ra=0,Za=0,Cu=0,Ht=0,Li=0,Yo=null,At=null,Mu=!1,js=0,Uh=0,zs=1/0,Rs=null,ca=null,it=0,ua=null,Bi=null,kn=0,Ou=0,Du=null,Lh=null,Vo=0,ju=null;function Gt(){return(ze&2)!==0&&Te!==0?Te&-Te:C.T!==null?Uu():Ul()}function Bh(){if(Ht===0)if((Te&536870912)===0||Me){var e=ci;ci<<=1,(ci&3932160)===0&&(ci=262144),Ht=e}else Ht=536870912;return e=jt.current,e!==null&&(e.flags|=32),Ht}function Tt(e,t,a){(e===Ie&&(He===2||He===9)||e.cancelPendingCommit!==null)&&(Ii(e,0),fa(e,Te,Ht,!1)),Ma(e,a),((ze&2)===0||e!==Ie)&&(e===Ie&&((ze&2)===0&&(Za|=a),Ze===4&&fa(e,Te,Ht,!1)),un(e))}function Ih(e,t,a){if((ze&6)!==0)throw Error(s(327));var o=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Ca(e,t),c=o?Zx(e,t):Ru(e,t,!0),u=o;do{if(c===0){Ui&&!o&&fa(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!Xx(a)){c=Ru(e,t,!1),u=!1;continue}if(c===2){if(u=t,e.errorRecoveryDisabledLanes&u)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var E=e;c=Yo;var R=E.current.memoizedState.isDehydrated;if(R&&(Ii(E,v).flags|=256),v=Ru(E,v,!1),v!==2){if(Tu&&!R){E.errorRecoveryDisabledLanes|=u,Za|=u,c=4;break e}u=At,At=c,u!==null&&(At===null?At=u:At.push.apply(At,u))}c=v}if(u=!1,c!==2)continue}}if(c===1){Ii(e,0),fa(e,t,0,!0);break}e:{switch(o=e,u=c,u){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:fa(o,t,Ht,!sa);break e;case 2:At=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(c=js+300-st(),10<c)){if(fa(o,t,Ht,!sa),fi(o,0,!0)!==0)break e;kn=t,o.timeoutHandle=vp(qh.bind(null,o,a,At,Rs,Mu,t,Ht,Za,Li,sa,u,"Throttled",-0,0),c);break e}qh(o,a,At,Rs,Mu,t,Ht,Za,Li,sa,u,null,-0,0)}}break}while(!0);un(e)}function qh(e,t,a,o,c,u,v,E,R,Q,ne,oe,F,P){if(e.timeoutHandle=-1,oe=t.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wn},Rh(t,u,oe);var ge=(u&62914560)===u?js-st():(u&4194048)===u?Uh-st():0;if(ge=Ob(oe,ge),ge!==null){kn=u,e.cancelPendingCommit=ge(Jh.bind(null,e,t,u,a,o,c,v,E,R,ne,oe,null,F,P)),fa(e,u,v,!Q);return}}Jh(e,t,u,a,o,c,v,E,R)}function Xx(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var c=a[o],u=c.getSnapshot;c=c.value;try{if(!Ot(u(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fa(e,t,a,o){t&=~Cu,t&=~Za,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var c=t;0<c;){var u=31-vt(c),v=1<<u;o[u]=-1,c&=~v}a!==0&&Hl(e,a,t)}function Hs(){return(ze&6)===0?($o(0),!1):!0}function zu(){if(_e!==null){if(He===0)var e=_e.return;else e=_e,An=La=null,Qc(e),Di=null,To=0,e=_e;for(;e!==null;)xh(e.alternate,e),e=e.return;_e=null}}function Ii(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,db(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),kn=0,zu(),Ie=e,_e=a=_n(e.current,null),Te=t,He=0,Rt=null,sa=!1,Ui=Ca(e,t),Tu=!1,Li=Ht=Cu=Za=ra=Ze=0,At=Yo=null,Mu=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var c=31-vt(o),u=1<<c;t|=e[c],o&=~u}return Gn=t,ns(),a}function Yh(e,t){Se=null,C.H=Ho,t===Oi||t===us?(t=og(),He=3):t===kc?(t=og(),He=4):He=t===fu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Rt=t,_e===null&&(Ze=1,_s(e,Bt(t,e.current)))}function Vh(){var e=jt.current;return e===null?!0:(Te&4194048)===Te?Vt===null:(Te&62914560)===Te||(Te&536870912)!==0?e===Vt:!1}function $h(){var e=C.H;return C.H=Ho,e===null?Ho:e}function Xh(){var e=C.A;return C.A=Vx,e}function Gs(){Ze=4,sa||(Te&4194048)!==Te&&jt.current!==null||(Ui=!0),(ra&134217727)===0&&(Za&134217727)===0||Ie===null||fa(Ie,Te,Ht,!1)}function Ru(e,t,a){var o=ze;ze|=2;var c=$h(),u=Xh();(Ie!==e||Te!==t)&&(Rs=null,Ii(e,t)),t=!1;var v=Ze;e:do try{if(He!==0&&_e!==null){var E=_e,R=Rt;switch(He){case 8:zu(),v=6;break e;case 3:case 2:case 9:case 6:jt.current===null&&(t=!0);var Q=He;if(He=0,Rt=null,qi(e,E,R,Q),a&&Ui){v=0;break e}break;default:Q=He,He=0,Rt=null,qi(e,E,R,Q)}}Kx(),v=Ze;break}catch(ne){Yh(e,ne)}while(!0);return t&&e.shellSuspendCounter++,An=La=null,ze=o,C.H=c,C.A=u,_e===null&&(Ie=null,Te=0,ns()),v}function Kx(){for(;_e!==null;)Kh(_e)}function Zx(e,t){var a=ze;ze|=2;var o=$h(),c=Xh();Ie!==e||Te!==t?(Rs=null,zs=st()+500,Ii(e,t)):Ui=Ca(e,t);e:do try{if(He!==0&&_e!==null){t=_e;var u=Rt;t:switch(He){case 1:He=0,Rt=null,qi(e,t,u,1);break;case 2:case 9:if(ag(u)){He=0,Rt=null,Zh(t);break}t=function(){He!==2&&He!==9||Ie!==e||(He=7),un(e)},u.then(t,t);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:ag(u)?(He=0,Rt=null,Zh(t)):(He=0,Rt=null,qi(e,t,u,7));break;case 5:var v=null;switch(_e.tag){case 26:v=_e.memoizedState;case 5:case 27:var E=_e;if(v?zp(v):E.stateNode.complete){He=0,Rt=null;var R=E.sibling;if(R!==null)_e=R;else{var Q=E.return;Q!==null?(_e=Q,ks(Q)):_e=null}break t}}He=0,Rt=null,qi(e,t,u,5);break;case 6:He=0,Rt=null,qi(e,t,u,6);break;case 8:zu(),Ze=6;break e;default:throw Error(s(462))}}Qx();break}catch(ne){Yh(e,ne)}while(!0);return An=La=null,C.H=o,C.A=c,ze=a,_e!==null?0:(Ie=null,Te=0,ns(),Ze)}function Qx(){for(;_e!==null&&!_a();)Kh(_e)}function Kh(e){var t=yh(e.alternate,e,Gn);e.memoizedProps=e.pendingProps,t===null?ks(e):_e=t}function Zh(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=fh(a,t,t.pendingProps,t.type,void 0,Te);break;case 11:t=fh(a,t,t.pendingProps,t.type.render,t.ref,Te);break;case 5:Qc(t);default:xh(a,t),t=_e=Xd(t,Gn),t=yh(a,t,Gn)}e.memoizedProps=e.pendingProps,t===null?ks(e):_e=t}function qi(e,t,a,o){An=La=null,Qc(t),Di=null,To=0;var c=t.return;try{if(kx(e,c,t,a,Te)){Ze=1,_s(e,Bt(a,e.current)),_e=null;return}}catch(u){if(c!==null)throw _e=c,u;Ze=1,_s(e,Bt(a,e.current)),_e=null;return}t.flags&32768?(Me||o===1?e=!0:Ui||(Te&536870912)!==0?e=!1:(sa=e=!0,(o===2||o===9||o===3||o===6)&&(o=jt.current,o!==null&&o.tag===13&&(o.flags|=16384))),Qh(t,e)):ks(t)}function ks(e){var t=e;do{if((t.flags&32768)!==0){Qh(t,sa);return}e=t.return;var a=Bx(t.alternate,t,Gn);if(a!==null){_e=a;return}if(t=t.sibling,t!==null){_e=t;return}_e=t=e}while(t!==null);Ze===0&&(Ze=5)}function Qh(e,t){do{var a=Ix(e.alternate,e);if(a!==null){a.flags&=32767,_e=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){_e=e;return}_e=e=a}while(e!==null);Ze=6,_e=null}function Jh(e,t,a,o,c,u,v,E,R){e.cancelPendingCommit=null;do Us();while(it!==0);if((ze&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(u=t.lanes|t.childLanes,u|=wc,Wr(e,a,u,v,E,R),e===Ie&&(_e=Ie=null,Te=0),Bi=t,ua=e,kn=a,Ou=u,Du=c,Lh=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Px(Aa,function(){return tp(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=C.T,C.T=null,c=k.p,k.p=2,v=ze,ze|=4;try{qx(e,t,a)}finally{ze=v,k.p=c,C.T=o}}it=1,Fh(),Wh(),Ph()}}function Fh(){if(it===1){it=0;var e=ua,t=Bi,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=C.T,C.T=null;var o=k.p;k.p=2;var c=ze;ze|=4;try{Dh(t,e);var u=Xu,v=kd(e.containerInfo),E=u.focusedElem,R=u.selectionRange;if(v!==E&&E&&E.ownerDocument&&Gd(E.ownerDocument.documentElement,E)){if(R!==null&&yc(E)){var Q=R.start,ne=R.end;if(ne===void 0&&(ne=Q),"selectionStart"in E)E.selectionStart=Q,E.selectionEnd=Math.min(ne,E.value.length);else{var oe=E.ownerDocument||document,F=oe&&oe.defaultView||window;if(F.getSelection){var P=F.getSelection(),ge=E.textContent.length,ye=Math.min(R.start,ge),Be=R.end===void 0?ye:Math.min(R.end,ge);!P.extend&&ye>Be&&(v=Be,Be=ye,ye=v);var V=Hd(E,ye),L=Hd(E,Be);if(V&&L&&(P.rangeCount!==1||P.anchorNode!==V.node||P.anchorOffset!==V.offset||P.focusNode!==L.node||P.focusOffset!==L.offset)){var Z=oe.createRange();Z.setStart(V.node,V.offset),P.removeAllRanges(),ye>Be?(P.addRange(Z),P.extend(L.node,L.offset)):(Z.setEnd(L.node,L.offset),P.addRange(Z))}}}}for(oe=[],P=E;P=P.parentNode;)P.nodeType===1&&oe.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<oe.length;E++){var ae=oe[E];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Js=!!$u,Xu=$u=null}finally{ze=c,k.p=o,C.T=a}}e.current=t,it=2}}function Wh(){if(it===2){it=0;var e=ua,t=Bi,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=C.T,C.T=null;var o=k.p;k.p=2;var c=ze;ze|=4;try{Ah(e,t.alternate,t)}finally{ze=c,k.p=o,C.T=a}}it=3}}function Ph(){if(it===4||it===3){it=0,Na();var e=ua,t=Bi,a=kn,o=Lh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?it=5:(it=0,Bi=ua=null,ep(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(ca=null),co(a),t=t.stateNode,yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(Ta,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=C.T,c=k.p,k.p=2,C.T=null;try{for(var u=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];u(E.value,{componentStack:E.stack})}}finally{C.T=t,k.p=c}}(kn&3)!==0&&Us(),un(e),c=e.pendingLanes,(a&261930)!==0&&(c&42)!==0?e===ju?Vo++:(Vo=0,ju=e):Vo=0,$o(0)}}function ep(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,No(t)))}function Us(){return Fh(),Wh(),Ph(),tp()}function tp(){if(it!==5)return!1;var e=ua,t=Ou;Ou=0;var a=co(kn),o=C.T,c=k.p;try{k.p=32>a?32:a,C.T=null,a=Du,Du=null;var u=ua,v=kn;if(it=0,Bi=ua=null,kn=0,(ze&6)!==0)throw Error(s(331));var E=ze;if(ze|=4,Gh(u.current),zh(u,u.current,v,a),ze=E,$o(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(Ta,u)}catch{}return!0}finally{k.p=c,C.T=o,ep(e,t)}}function np(e,t,a){t=Bt(a,t),t=uu(e.stateNode,t,2),e=aa(e,t,2),e!==null&&(Ma(e,2),un(e))}function Ge(e,t,a){if(e.tag===3)np(e,e,a);else for(;t!==null;){if(t.tag===3){np(t,e,a);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ca===null||!ca.has(o))){e=Bt(a,e),a=ah(2),o=aa(t,a,2),o!==null&&(ih(a,o,t,e),Ma(o,2),un(o));break}}t=t.return}}function Hu(e,t,a){var o=e.pingCache;if(o===null){o=e.pingCache=new $x;var c=new Set;o.set(t,c)}else c=o.get(t),c===void 0&&(c=new Set,o.set(t,c));c.has(a)||(Tu=!0,c.add(a),e=Jx.bind(null,e,t,a),t.then(e,e))}function Jx(e,t,a){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ie===e&&(Te&a)===a&&(Ze===4||Ze===3&&(Te&62914560)===Te&&300>st()-js?(ze&2)===0&&Ii(e,0):Cu|=a,Li===Te&&(Li=0)),un(e)}function ap(e,t){t===0&&(t=Rl()),e=Ga(e,t),e!==null&&(Ma(e,t),un(e))}function Fx(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),ap(e,a)}function Wx(e,t){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(t),ap(e,a)}function Px(e,t){return Zt(e,t)}var Ls=null,Yi=null,Gu=!1,Bs=!1,ku=!1,da=0;function un(e){e!==Yi&&e.next===null&&(Yi===null?Ls=Yi=e:Yi=Yi.next=e),Bs=!0,Gu||(Gu=!0,tb())}function $o(e,t){if(!ku&&Bs){ku=!0;do for(var a=!1,o=Ls;o!==null;){if(e!==0){var c=o.pendingLanes;if(c===0)var u=0;else{var v=o.suspendedLanes,E=o.pingedLanes;u=(1<<31-vt(42|e)+1)-1,u&=c&~(v&~E),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,sp(o,u))}else u=Te,u=fi(o,o===Ie?u:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(u&3)===0||Ca(o,u)||(a=!0,sp(o,u));o=o.next}while(a);ku=!1}}function eb(){ip()}function ip(){Bs=Gu=!1;var e=0;da!==0&&fb()&&(e=da);for(var t=st(),a=null,o=Ls;o!==null;){var c=o.next,u=op(o,t);u===0?(o.next=null,a===null?Ls=c:a.next=c,c===null&&(Yi=a)):(a=o,(e!==0||(u&3)!==0)&&(Bs=!0)),o=c}it!==0&&it!==5||$o(e),da!==0&&(da=0)}function op(e,t){for(var a=e.suspendedLanes,o=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var v=31-vt(u),E=1<<v,R=c[v];R===-1?((E&a)===0||(E&o)!==0)&&(c[v]=Fr(E,t)):R<=t&&(e.expiredLanes|=E),u&=~E}if(t=Ie,a=Te,a=fi(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===t&&(He===2||He===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&mn(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Ca(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(o!==null&&mn(o),co(a)){case 2:case 8:a=Vn;break;case 32:a=Aa;break;case 268435456:a=si;break;default:a=Aa}return o=lp.bind(null,e),a=Zt(a,o),e.callbackPriority=t,e.callbackNode=a,t}return o!==null&&o!==null&&mn(o),e.callbackPriority=2,e.callbackNode=null,2}function lp(e,t){if(it!==0&&it!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Us()&&e.callbackNode!==a)return null;var o=Te;return o=fi(e,e===Ie?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Ih(e,o,t),op(e,st()),e.callbackNode!=null&&e.callbackNode===a?lp.bind(null,e):null)}function sp(e,t){if(Us())return null;Ih(e,t,!0)}function tb(){gb(function(){(ze&6)!==0?Zt(yn,eb):ip()})}function Uu(){if(da===0){var e=Ci;e===0&&(e=ri,ri<<=1,(ri&261888)===0&&(ri=256)),da=e}return da}function rp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Zl(""+e)}function cp(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function nb(e,t,a,o,c){if(t==="submit"&&a&&a.stateNode===c){var u=rp((c[ht]||null).action),v=o.submitter;v&&(t=(t=v[ht]||null)?rp(t.formAction):v.getAttribute("formAction"),t!==null&&(u=t,v=null));var E=new Wl("action","action",null,o,c);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(da!==0){var R=v?cp(c,v):new FormData(c);iu(a,{pending:!0,data:R,method:c.method,action:u},null,R)}}else typeof u=="function"&&(E.preventDefault(),R=v?cp(c,v):new FormData(c),iu(a,{pending:!0,data:R,method:c.method,action:u},u,R))},currentTarget:c}]})}}for(var Lu=0;Lu<Sc.length;Lu++){var Bu=Sc[Lu],ab=Bu.toLowerCase(),ib=Bu[0].toUpperCase()+Bu.slice(1);Jt(ab,"on"+ib)}Jt(Bd,"onAnimationEnd"),Jt(Id,"onAnimationIteration"),Jt(qd,"onAnimationStart"),Jt("dblclick","onDoubleClick"),Jt("focusin","onFocus"),Jt("focusout","onBlur"),Jt(bx,"onTransitionRun"),Jt(Sx,"onTransitionStart"),Jt(wx,"onTransitionCancel"),Jt(Yd,"onTransitionEnd"),Qn("onMouseEnter",["mouseout","mouseover"]),Qn("onMouseLeave",["mouseout","mouseover"]),Qn("onPointerEnter",["pointerout","pointerover"]),Qn("onPointerLeave",["pointerout","pointerover"]),bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ob=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xo));function up(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],c=o.event;o=o.listeners;e:{var u=void 0;if(t)for(var v=o.length-1;0<=v;v--){var E=o[v],R=E.instance,Q=E.currentTarget;if(E=E.listener,R!==u&&c.isPropagationStopped())break e;u=E,c.currentTarget=Q;try{u(c)}catch(ne){ts(ne)}c.currentTarget=null,u=R}else for(v=0;v<o.length;v++){if(E=o[v],R=E.instance,Q=E.currentTarget,E=E.listener,R!==u&&c.isPropagationStopped())break e;u=E,c.currentTarget=Q;try{u(c)}catch(ne){ts(ne)}c.currentTarget=null,u=R}}}}function Ne(e,t){var a=t[di];a===void 0&&(a=t[di]=new Set);var o=e+"__bubble";a.has(o)||(fp(t,e,2,!1),a.add(o))}function Iu(e,t,a){var o=0;t&&(o|=4),fp(a,e,o,t)}var Is="_reactListening"+Math.random().toString(36).slice(2);function qu(e){if(!e[Is]){e[Is]=!0,ql.forEach(function(a){a!=="selectionchange"&&(ob.has(a)||Iu(a,!1,e),Iu(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Is]||(t[Is]=!0,Iu("selectionchange",!1,t))}}function fp(e,t,a,o){switch(Bp(t)){case 2:var c=zb;break;case 8:c=Rb;break;default:c=af}a=c.bind(null,t,a,e),c=void 0,!rc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(t,a,{capture:!0,passive:c}):e.addEventListener(t,a,!0):c!==void 0?e.addEventListener(t,a,{passive:c}):e.addEventListener(t,a,!1)}function Yu(e,t,a,o,c){var u=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===c)break;if(v===4)for(v=o.return;v!==null;){var R=v.tag;if((R===3||R===4)&&v.stateNode.containerInfo===c)return;v=v.return}for(;E!==null;){if(v=$n(E),v===null)return;if(R=v.tag,R===5||R===6||R===26||R===27){o=u=v;continue e}E=E.parentNode}}o=o.return}md(function(){var Q=u,ne=lc(a),oe=[];e:{var F=Vd.get(e);if(F!==void 0){var P=Wl,ge=e;switch(e){case"keypress":if(Jl(a)===0)break e;case"keydown":case"keyup":P=Wv;break;case"focusin":ge="focus",P=dc;break;case"focusout":ge="blur",P=dc;break;case"beforeblur":case"afterblur":P=dc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=xd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=Bv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=tx;break;case Bd:case Id:case qd:P=Yv;break;case Yd:P=ax;break;case"scroll":case"scrollend":P=Uv;break;case"wheel":P=ox;break;case"copy":case"cut":case"paste":P=$v;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=Sd;break;case"toggle":case"beforetoggle":P=sx}var ye=(t&4)!==0,Be=!ye&&(e==="scroll"||e==="scrollend"),V=ye?F!==null?F+"Capture":null:F;ye=[];for(var L=Q,Z;L!==null;){var ae=L;if(Z=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Z===null||V===null||(ae=ho(L,V),ae!=null&&ye.push(Ko(L,ae,Z))),Be)break;L=L.return}0<ye.length&&(F=new P(F,ge,null,a,ne),oe.push({event:F,listeners:ye}))}}if((t&7)===0){e:{if(F=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",F&&a!==oc&&(ge=a.relatedTarget||a.fromElement)&&($n(ge)||ge[xn]))break e;if((P||F)&&(F=ne.window===ne?ne:(F=ne.ownerDocument)?F.defaultView||F.parentWindow:window,P?(ge=a.relatedTarget||a.toElement,P=Q,ge=ge?$n(ge):null,ge!==null&&(Be=f(ge),ye=ge.tag,ge!==Be||ye!==5&&ye!==27&&ye!==6)&&(ge=null)):(P=null,ge=Q),P!==ge)){if(ye=xd,ae="onMouseLeave",V="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(ye=Sd,ae="onPointerLeave",V="onPointerEnter",L="pointer"),Be=P==null?F:Kn(P),Z=ge==null?F:Kn(ge),F=new ye(ae,L+"leave",P,a,ne),F.target=Be,F.relatedTarget=Z,ae=null,$n(ne)===Q&&(ye=new ye(V,L+"enter",ge,a,ne),ye.target=Z,ye.relatedTarget=Be,ae=ye),Be=ae,P&&ge)t:{for(ye=lb,V=P,L=ge,Z=0,ae=V;ae;ae=ye(ae))Z++;ae=0;for(var pe=L;pe;pe=ye(pe))ae++;for(;0<Z-ae;)V=ye(V),Z--;for(;0<ae-Z;)L=ye(L),ae--;for(;Z--;){if(V===L||L!==null&&V===L.alternate){ye=V;break t}V=ye(V),L=ye(L)}ye=null}else ye=null;P!==null&&dp(oe,F,P,ye,!1),ge!==null&&Be!==null&&dp(oe,Be,ge,ye,!0)}}e:{if(F=Q?Kn(Q):window,P=F.nodeName&&F.nodeName.toLowerCase(),P==="select"||P==="input"&&F.type==="file")var De=Md;else if(Td(F))if(Od)De=yx;else{De=px;var he=hx}else P=F.nodeName,!P||P.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?Q&&ic(Q.elementType)&&(De=Md):De=mx;if(De&&(De=De(e,Q))){Cd(oe,De,a,ne);break e}he&&he(e,F,Q),e==="focusout"&&Q&&F.type==="number"&&Q.memoizedProps.value!=null&&go(F,"number",F.value)}switch(he=Q?Kn(Q):window,e){case"focusin":(Td(he)||he.contentEditable==="true")&&(bi=he,vc=Q,wo=null);break;case"focusout":wo=vc=bi=null;break;case"mousedown":xc=!0;break;case"contextmenu":case"mouseup":case"dragend":xc=!1,Ud(oe,a,ne);break;case"selectionchange":if(xx)break;case"keydown":case"keyup":Ud(oe,a,ne)}var Ee;if(hc)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else xi?Nd(e,a)&&(Ce="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(wd&&a.locale!=="ko"&&(xi||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&xi&&(Ee=yd()):(Jn=ne,cc="value"in Jn?Jn.value:Jn.textContent,xi=!0)),he=qs(Q,Ce),0<he.length&&(Ce=new bd(Ce,e,null,a,ne),oe.push({event:Ce,listeners:he}),Ee?Ce.data=Ee:(Ee=Ad(a),Ee!==null&&(Ce.data=Ee)))),(Ee=cx?ux(e,a):fx(e,a))&&(Ce=qs(Q,"onBeforeInput"),0<Ce.length&&(he=new bd("onBeforeInput","beforeinput",null,a,ne),oe.push({event:he,listeners:Ce}),he.data=Ee)),nb(oe,e,Q,a,ne)}up(oe,t)})}function Ko(e,t,a){return{instance:e,listener:t,currentTarget:a}}function qs(e,t){for(var a=t+"Capture",o=[];e!==null;){var c=e,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=ho(e,a),c!=null&&o.unshift(Ko(e,c,u)),c=ho(e,t),c!=null&&o.push(Ko(e,c,u))),e.tag===3)return o;e=e.return}return[]}function lb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function dp(e,t,a,o,c){for(var u=t._reactName,v=[];a!==null&&a!==o;){var E=a,R=E.alternate,Q=E.stateNode;if(E=E.tag,R!==null&&R===o)break;E!==5&&E!==26&&E!==27||Q===null||(R=Q,c?(Q=ho(a,u),Q!=null&&v.unshift(Ko(a,Q,R))):c||(Q=ho(a,u),Q!=null&&v.push(Ko(a,Q,R)))),a=a.return}v.length!==0&&e.push({event:t,listeners:v})}var sb=/\r\n?/g,rb=/\u0000|\uFFFD/g;function gp(e){return(typeof e=="string"?e:""+e).replace(sb,`
`).replace(rb,"")}function hp(e,t){return t=gp(t),gp(e)===t}function Le(e,t,a,o,c,u){switch(a){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||mi(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&mi(e,""+o);break;case"className":hi(e,"class",o);break;case"tabIndex":hi(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":hi(e,a,o);break;case"style":hd(e,o,u);break;case"data":if(t!=="object"){hi(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Zl(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&Le(e,t,"name",c.name,c,null),Le(e,t,"formEncType",c.formEncType,c,null),Le(e,t,"formMethod",c.formMethod,c,null),Le(e,t,"formTarget",c.formTarget,c,null)):(Le(e,t,"encType",c.encType,c,null),Le(e,t,"method",c.method,c,null),Le(e,t,"target",c.target,c,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Zl(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=wn);break;case"onScroll":o!=null&&Ne("scroll",e);break;case"onScrollEnd":o!=null&&Ne("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Zl(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Ne("beforetoggle",e),Ne("toggle",e),gi(e,"popover",o);break;case"xlinkActuate":Qt(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Qt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Qt(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Qt(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Qt(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Qt(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Qt(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Qt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Qt(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":gi(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Gv.get(a)||a,gi(e,a,o))}}function Vu(e,t,a,o,c,u){switch(a){case"style":hd(e,o,u);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?mi(e,o):(typeof o=="number"||typeof o=="bigint")&&mi(e,""+o);break;case"onScroll":o!=null&&Ne("scroll",e);break;case"onScrollEnd":o!=null&&Ne("scrollend",e);break;case"onClick":o!=null&&(e.onclick=wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),u=e[ht]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,c),typeof o=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,o,c);break e}a in e?e[a]=o:o===!0?e.setAttribute(a,""):gi(e,a,o)}}}function ft(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",e),Ne("load",e);var o=!1,c=!1,u;for(u in a)if(a.hasOwnProperty(u)){var v=a[u];if(v!=null)switch(u){case"src":o=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Le(e,t,u,v,a,null)}}c&&Le(e,t,"srcSet",a.srcSet,a,null),o&&Le(e,t,"src",a.src,a,null);return;case"input":Ne("invalid",e);var E=u=v=c=null,R=null,Q=null;for(o in a)if(a.hasOwnProperty(o)){var ne=a[o];if(ne!=null)switch(o){case"name":c=ne;break;case"type":v=ne;break;case"checked":R=ne;break;case"defaultChecked":Q=ne;break;case"value":u=ne;break;case"defaultValue":E=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,t));break;default:Le(e,t,o,ne,a,null)}}Kl(e,u,E,R,Q,v,c,!1);return;case"select":Ne("invalid",e),o=v=u=null;for(c in a)if(a.hasOwnProperty(c)&&(E=a[c],E!=null))switch(c){case"value":u=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Le(e,t,c,E,a,null)}t=u,a=v,e.multiple=!!o,t!=null?Sn(e,!!o,t,!1):a!=null&&Sn(e,!!o,a,!0);return;case"textarea":Ne("invalid",e),u=c=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":c=E;break;case"children":u=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Le(e,t,v,E,a,null)}dd(e,o,c,u);return;case"option":for(R in a)a.hasOwnProperty(R)&&(o=a[R],o!=null)&&(R==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":Le(e,t,R,o,a,null));return;case"dialog":Ne("beforetoggle",e),Ne("toggle",e),Ne("cancel",e),Ne("close",e);break;case"iframe":case"object":Ne("load",e);break;case"video":case"audio":for(o=0;o<Xo.length;o++)Ne(Xo[o],e);break;case"image":Ne("error",e),Ne("load",e);break;case"details":Ne("toggle",e);break;case"embed":case"source":case"link":Ne("error",e),Ne("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in a)if(a.hasOwnProperty(Q)&&(o=a[Q],o!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Le(e,t,Q,o,a,null)}return;default:if(ic(t)){for(ne in a)a.hasOwnProperty(ne)&&(o=a[ne],o!==void 0&&Vu(e,t,ne,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Le(e,t,E,o,a,null))}function cb(e,t,a,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,v=null,E=null,R=null,Q=null,ne=null;for(P in a){var oe=a[P];if(a.hasOwnProperty(P)&&oe!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":R=oe;default:o.hasOwnProperty(P)||Le(e,t,P,null,o,oe)}}for(var F in o){var P=o[F];if(oe=a[F],o.hasOwnProperty(F)&&(P!=null||oe!=null))switch(F){case"type":u=P;break;case"name":c=P;break;case"checked":Q=P;break;case"defaultChecked":ne=P;break;case"value":v=P;break;case"defaultValue":E=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(137,t));break;default:P!==oe&&Le(e,t,F,P,o,oe)}}ja(e,v,E,R,Q,ne,u,c);return;case"select":P=v=E=F=null;for(u in a)if(R=a[u],a.hasOwnProperty(u)&&R!=null)switch(u){case"value":break;case"multiple":P=R;default:o.hasOwnProperty(u)||Le(e,t,u,null,o,R)}for(c in o)if(u=o[c],R=a[c],o.hasOwnProperty(c)&&(u!=null||R!=null))switch(c){case"value":F=u;break;case"defaultValue":E=u;break;case"multiple":v=u;default:u!==R&&Le(e,t,c,u,o,R)}t=E,a=v,o=P,F!=null?Sn(e,!!a,F,!1):!!o!=!!a&&(t!=null?Sn(e,!!a,t,!0):Sn(e,!!a,a?[]:"",!1));return;case"textarea":P=F=null;for(E in a)if(c=a[E],a.hasOwnProperty(E)&&c!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Le(e,t,E,null,o,c)}for(v in o)if(c=o[v],u=a[v],o.hasOwnProperty(v)&&(c!=null||u!=null))switch(v){case"value":F=c;break;case"defaultValue":P=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(s(91));break;default:c!==u&&Le(e,t,v,c,o,u)}fd(e,F,P);return;case"option":for(var ge in a)F=a[ge],a.hasOwnProperty(ge)&&F!=null&&!o.hasOwnProperty(ge)&&(ge==="selected"?e.selected=!1:Le(e,t,ge,null,o,F));for(R in o)F=o[R],P=a[R],o.hasOwnProperty(R)&&F!==P&&(F!=null||P!=null)&&(R==="selected"?e.selected=F&&typeof F!="function"&&typeof F!="symbol":Le(e,t,R,F,o,P));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ye in a)F=a[ye],a.hasOwnProperty(ye)&&F!=null&&!o.hasOwnProperty(ye)&&Le(e,t,ye,null,o,F);for(Q in o)if(F=o[Q],P=a[Q],o.hasOwnProperty(Q)&&F!==P&&(F!=null||P!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,t));break;default:Le(e,t,Q,F,o,P)}return;default:if(ic(t)){for(var Be in a)F=a[Be],a.hasOwnProperty(Be)&&F!==void 0&&!o.hasOwnProperty(Be)&&Vu(e,t,Be,void 0,o,F);for(ne in o)F=o[ne],P=a[ne],!o.hasOwnProperty(ne)||F===P||F===void 0&&P===void 0||Vu(e,t,ne,F,o,P);return}}for(var V in a)F=a[V],a.hasOwnProperty(V)&&F!=null&&!o.hasOwnProperty(V)&&Le(e,t,V,null,o,F);for(oe in o)F=o[oe],P=a[oe],!o.hasOwnProperty(oe)||F===P||F==null&&P==null||Le(e,t,oe,F,o,P)}function pp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ub(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var c=a[o],u=c.transferSize,v=c.initiatorType,E=c.duration;if(u&&E&&pp(v)){for(v=0,E=c.responseEnd,o+=1;o<a.length;o++){var R=a[o],Q=R.startTime;if(Q>E)break;var ne=R.transferSize,oe=R.initiatorType;ne&&pp(oe)&&(R=R.responseEnd,v+=ne*(R<E?1:(E-Q)/(R-Q)))}if(--o,t+=8*(u+v)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var $u=null,Xu=null;function Ys(e){return e.nodeType===9?e:e.ownerDocument}function mp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ku(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zu=null;function fb(){var e=window.event;return e&&e.type==="popstate"?e===Zu?!1:(Zu=e,!0):(Zu=null,!1)}var vp=typeof setTimeout=="function"?setTimeout:void 0,db=typeof clearTimeout=="function"?clearTimeout:void 0,xp=typeof Promise=="function"?Promise:void 0,gb=typeof queueMicrotask=="function"?queueMicrotask:typeof xp<"u"?function(e){return xp.resolve(null).then(e).catch(hb)}:vp;function hb(e){setTimeout(function(){throw e})}function ga(e){return e==="head"}function bp(e,t){var a=t,o=0;do{var c=a.nextSibling;if(e.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(c),Ki(t);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Zo(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Zo(a);for(var u=a.firstChild;u;){var v=u.nextSibling,E=u.nodeName;u[Oa]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=v}}else a==="body"&&Zo(e.ownerDocument.body);a=c}while(a);Ki(t)}function Sp(e,t){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function Qu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Qu(a),uo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function pb(e,t,a,o){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Oa])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=$t(e.nextSibling),e===null)break}return null}function mb(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=$t(e.nextSibling),e===null))return null;return e}function wp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=$t(e.nextSibling),e===null))return null;return e}function Ju(e){return e.data==="$?"||e.data==="$~"}function Fu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function yb(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var o=function(){t(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function $t(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Wu=null;function Ep(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return $t(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function _p(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Np(e,t,a){switch(t=Ys(a),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Zo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);uo(e)}var Xt=new Map,Ap=new Set;function Vs(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Un=k.d;k.d={f:vb,r:xb,D:bb,C:Sb,L:wb,m:Eb,X:Nb,S:_b,M:Ab};function vb(){var e=Un.f(),t=Hs();return e||t}function xb(e){var t=Xn(e);t!==null&&t.tag===5&&t.type==="form"?Yg(t):Un.r(e)}var Vi=typeof document>"u"?null:document;function Tp(e,t,a){var o=Vi;if(o&&typeof t=="string"&&t){var c=St(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Ap.has(c)||(Ap.add(c),e={rel:e,crossOrigin:a,href:t},o.querySelector(c)===null&&(t=o.createElement("link"),ft(t,"link",e),Fe(t),o.head.appendChild(t)))}}function bb(e){Un.D(e),Tp("dns-prefetch",e,null)}function Sb(e,t){Un.C(e,t),Tp("preconnect",e,t)}function wb(e,t,a){Un.L(e,t,a);var o=Vi;if(o&&e&&t){var c='link[rel="preload"][as="'+St(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+St(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+St(a.imageSizes)+'"]')):c+='[href="'+St(e)+'"]';var u=c;switch(t){case"style":u=$i(e);break;case"script":u=Xi(e)}Xt.has(u)||(e=x({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Xt.set(u,e),o.querySelector(c)!==null||t==="style"&&o.querySelector(Qo(u))||t==="script"&&o.querySelector(Jo(u))||(t=o.createElement("link"),ft(t,"link",e),Fe(t),o.head.appendChild(t)))}}function Eb(e,t){Un.m(e,t);var a=Vi;if(a&&e){var o=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+St(o)+'"][href="'+St(e)+'"]',u=c;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Xi(e)}if(!Xt.has(u)&&(e=x({rel:"modulepreload",href:e},t),Xt.set(u,e),a.querySelector(c)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Jo(u)))return}o=a.createElement("link"),ft(o,"link",e),Fe(o),a.head.appendChild(o)}}}function _b(e,t,a){Un.S(e,t,a);var o=Vi;if(o&&e){var c=Zn(o).hoistableStyles,u=$i(e);t=t||"default";var v=c.get(u);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(Qo(u)))E.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Xt.get(u))&&Pu(e,a);var R=v=o.createElement("link");Fe(R),ft(R,"link",e),R._p=new Promise(function(Q,ne){R.onload=Q,R.onerror=ne}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,$s(v,t,o)}v={type:"stylesheet",instance:v,count:1,state:E},c.set(u,v)}}}function Nb(e,t){Un.X(e,t);var a=Vi;if(a&&e){var o=Zn(a).hoistableScripts,c=Xi(e),u=o.get(c);u||(u=a.querySelector(Jo(c)),u||(e=x({src:e,async:!0},t),(t=Xt.get(c))&&ef(e,t),u=a.createElement("script"),Fe(u),ft(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},o.set(c,u))}}function Ab(e,t){Un.M(e,t);var a=Vi;if(a&&e){var o=Zn(a).hoistableScripts,c=Xi(e),u=o.get(c);u||(u=a.querySelector(Jo(c)),u||(e=x({src:e,async:!0,type:"module"},t),(t=Xt.get(c))&&ef(e,t),u=a.createElement("script"),Fe(u),ft(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},o.set(c,u))}}function Cp(e,t,a,o){var c=(c=ue.current)?Vs(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=$i(a.href),a=Zn(c).hoistableStyles,o=a.get(t),o||(o={type:"style",instance:null,count:0,state:null},a.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=$i(a.href);var u=Zn(c).hoistableStyles,v=u.get(e);if(v||(c=c.ownerDocument||c,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,v),(u=c.querySelector(Qo(e)))&&!u._p&&(v.instance=u,v.state.loading=5),Xt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xt.set(e,a),u||Tb(c,e,a,v.state))),t&&o===null)throw Error(s(528,""));return v}if(t&&o!==null)throw Error(s(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Xi(a),a=Zn(c).hoistableScripts,o=a.get(t),o||(o={type:"script",instance:null,count:0,state:null},a.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function $i(e){return'href="'+St(e)+'"'}function Qo(e){return'link[rel="stylesheet"]['+e+"]"}function Mp(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function Tb(e,t,a,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),ft(t,"link",a),Fe(t),e.head.appendChild(t))}function Xi(e){return'[src="'+St(e)+'"]'}function Jo(e){return"script[async]"+e}function Op(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+St(a.href)+'"]');if(o)return t.instance=o,Fe(o),o;var c=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Fe(o),ft(o,"style",c),$s(o,a.precedence,e),t.instance=o;case"stylesheet":c=$i(a.href);var u=e.querySelector(Qo(c));if(u)return t.state.loading|=4,t.instance=u,Fe(u),u;o=Mp(a),(c=Xt.get(c))&&Pu(o,c),u=(e.ownerDocument||e).createElement("link"),Fe(u);var v=u;return v._p=new Promise(function(E,R){v.onload=E,v.onerror=R}),ft(u,"link",o),t.state.loading|=4,$s(u,a.precedence,e),t.instance=u;case"script":return u=Xi(a.src),(c=e.querySelector(Jo(u)))?(t.instance=c,Fe(c),c):(o=a,(c=Xt.get(u))&&(o=x({},a),ef(o,c)),e=e.ownerDocument||e,c=e.createElement("script"),Fe(c),ft(c,"link",o),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,$s(o,a.precedence,e));return t.instance}function $s(e,t,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=o.length?o[o.length-1]:null,u=c,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===t)u=E;else if(u!==c)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Pu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ef(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Xs=null;function Dp(e,t,a){if(Xs===null){var o=new Map,c=Xs=new Map;c.set(a,o)}else c=Xs,o=c.get(a),o||(o=new Map,c.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var u=a[c];if(!(u[Oa]||u[at]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var v=u.getAttribute(t)||"";v=e+v;var E=o.get(v);E?E.push(u):o.set(v,[u])}}return o}function jp(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Cb(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function zp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Mb(e,t,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=$i(o.href),u=t.querySelector(Qo(c));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ks.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,Fe(u);return}u=t.ownerDocument||t,o=Mp(o),(c=Xt.get(c))&&Pu(o,c),u=u.createElement("link"),Fe(u);var v=u;v._p=new Promise(function(E,R){v.onload=E,v.onerror=R}),ft(u,"link",o),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Ks.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var tf=0;function Ob(e,t){return e.stylesheets&&e.count===0&&Qs(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&Qs(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&tf===0&&(tf=62500*ub());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Qs(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>tf?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(c)}}:null}function Ks(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qs(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Zs=null;function Qs(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Zs=new Map,t.forEach(Db,e),Zs=null,Ks.call(e))}function Db(e,t){if(!(t.state.loading&4)){var a=Zs.get(e);if(a)var o=a.get(null);else{a=new Map,Zs.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var v=c[u];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}c=t.instance,v=c.getAttribute("data-precedence"),u=a.get(v)||o,u===o&&a.set(null,c),a.set(v,c),this.count++,o=Ks.bind(this),c.addEventListener("load",o),c.addEventListener("error",o),u?u.parentNode.insertBefore(c,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Fo={$$typeof:_,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function jb(e,t,a,o,c,u,v,E,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=so(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=so(0),this.hiddenUpdates=so(null),this.identifierPrefix=o,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function Rp(e,t,a,o,c,u,v,E,R,Q,ne,oe){return e=new jb(e,t,a,v,R,Q,ne,oe,E),t=1,u===!0&&(t|=24),u=Dt(3,null,null,t),e.current=u,u.stateNode=e,t=Rc(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:o,isDehydrated:a,cache:t},Uc(u),e}function Hp(e){return e?(e=Ei,e):Ei}function Gp(e,t,a,o,c,u){c=Hp(c),o.context===null?o.context=c:o.pendingContext=c,o=na(t),o.payload={element:a},u=u===void 0?null:u,u!==null&&(o.callback=u),a=aa(e,o,t),a!==null&&(Tt(a,e,t),Mo(a,e,t))}function kp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function nf(e,t){kp(e,t),(e=e.alternate)&&kp(e,t)}function Up(e){if(e.tag===13||e.tag===31){var t=Ga(e,67108864);t!==null&&Tt(t,e,67108864),nf(e,67108864)}}function Lp(e){if(e.tag===13||e.tag===31){var t=Gt();t=ro(t);var a=Ga(e,t);a!==null&&Tt(a,e,t),nf(e,t)}}var Js=!0;function zb(e,t,a,o){var c=C.T;C.T=null;var u=k.p;try{k.p=2,af(e,t,a,o)}finally{k.p=u,C.T=c}}function Rb(e,t,a,o){var c=C.T;C.T=null;var u=k.p;try{k.p=8,af(e,t,a,o)}finally{k.p=u,C.T=c}}function af(e,t,a,o){if(Js){var c=of(o);if(c===null)Yu(e,t,o,Fs,a),Ip(e,o);else if(Gb(c,e,t,a,o))o.stopPropagation();else if(Ip(e,o),t&4&&-1<Hb.indexOf(e)){for(;c!==null;){var u=Xn(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var v=vn(u.pendingLanes);if(v!==0){var E=u;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var R=1<<31-vt(v);E.entanglements[1]|=R,v&=~R}un(u),(ze&6)===0&&(zs=st()+500,$o(0))}}break;case 31:case 13:E=Ga(u,2),E!==null&&Tt(E,u,2),Hs(),nf(u,2)}if(u=of(o),u===null&&Yu(e,t,o,Fs,a),u===c)break;c=u}c!==null&&o.stopPropagation()}else Yu(e,t,o,null,a)}}function of(e){return e=lc(e),lf(e)}var Fs=null;function lf(e){if(Fs=null,e=$n(e),e!==null){var t=f(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=d(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Fs=e,null}function Bp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(li()){case yn:return 2;case Vn:return 8;case Aa:case $r:return 32;case si:return 268435456;default:return 32}default:return 32}}var sf=!1,ha=null,pa=null,ma=null,Wo=new Map,Po=new Map,ya=[],Hb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ip(e,t){switch(e){case"focusin":case"focusout":ha=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":ma=null;break;case"pointerover":case"pointerout":Wo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Po.delete(t.pointerId)}}function el(e,t,a,o,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:o,nativeEvent:u,targetContainers:[c]},t!==null&&(t=Xn(t),t!==null&&Up(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Gb(e,t,a,o,c){switch(t){case"focusin":return ha=el(ha,e,t,a,o,c),!0;case"dragenter":return pa=el(pa,e,t,a,o,c),!0;case"mouseover":return ma=el(ma,e,t,a,o,c),!0;case"pointerover":var u=c.pointerId;return Wo.set(u,el(Wo.get(u)||null,e,t,a,o,c)),!0;case"gotpointercapture":return u=c.pointerId,Po.set(u,el(Po.get(u)||null,e,t,a,o,c)),!0}return!1}function qp(e){var t=$n(e.target);if(t!==null){var a=f(t);if(a!==null){if(t=a.tag,t===13){if(t=d(a),t!==null){e.blockedOn=t,Ll(e.priority,function(){Lp(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,Ll(e.priority,function(){Lp(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ws(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=of(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);oc=o,a.target.dispatchEvent(o),oc=null}else return t=Xn(a),t!==null&&Up(t),e.blockedOn=a,!1;t.shift()}return!0}function Yp(e,t,a){Ws(e)&&a.delete(t)}function kb(){sf=!1,ha!==null&&Ws(ha)&&(ha=null),pa!==null&&Ws(pa)&&(pa=null),ma!==null&&Ws(ma)&&(ma=null),Wo.forEach(Yp),Po.forEach(Yp)}function Ps(e,t){e.blockedOn===t&&(e.blockedOn=null,sf||(sf=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,kb)))}var er=null;function Vp(e){er!==e&&(er=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){er===e&&(er=null);for(var t=0;t<e.length;t+=3){var a=e[t],o=e[t+1],c=e[t+2];if(typeof o!="function"){if(lf(o||a)===null)continue;break}var u=Xn(a);u!==null&&(e.splice(t,3),t-=3,iu(u,{pending:!0,data:c,method:a.method,action:o},o,c))}}))}function Ki(e){function t(R){return Ps(R,e)}ha!==null&&Ps(ha,e),pa!==null&&Ps(pa,e),ma!==null&&Ps(ma,e),Wo.forEach(t),Po.forEach(t);for(var a=0;a<ya.length;a++){var o=ya[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<ya.length&&(a=ya[0],a.blockedOn===null);)qp(a),a.blockedOn===null&&ya.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var c=a[o],u=a[o+1],v=c[ht]||null;if(typeof u=="function")v||Vp(a);else if(v){var E=null;if(u&&u.hasAttribute("formAction")){if(c=u,v=u[ht]||null)E=v.formAction;else if(lf(c)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),Vp(a)}}}function $p(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(v){return c=v})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function rf(e){this._internalRoot=e}tr.prototype.render=rf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var a=t.current,o=Gt();Gp(a,o,e,t,null,null)},tr.prototype.unmount=rf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gp(e.current,2,null,e,null,null),Hs(),t[xn]=null}};function tr(e){this._internalRoot=e}tr.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ul();e={blockedOn:null,target:e,priority:t};for(var a=0;a<ya.length&&t!==0&&t<ya[a].priority;a++);ya.splice(a,0,e),a===0&&qp(e)}};var Xp=i.version;if(Xp!=="19.2.3")throw Error(s(527,Xp,"19.2.3"));k.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=h(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var Ub={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nr.isDisabled&&nr.supportsFiber)try{Ta=nr.inject(Ub),yt=nr}catch{}}return nl.createRoot=function(e,t){if(!r(e))throw Error(s(299));var a=!1,o="",c=Pg,u=eh,v=th;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=Rp(e,1,!1,null,null,a,o,null,c,u,v,$p),e[xn]=t.current,qu(e),new rf(t)},nl.hydrateRoot=function(e,t,a){if(!r(e))throw Error(s(299));var o=!1,c="",u=Pg,v=eh,E=th,R=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(R=a.formState)),t=Rp(e,1,!0,t,a??null,o,c,R,u,v,E,$p),t.context=Hp(null),a=t.current,o=Gt(),o=ro(o),c=na(o),c.callback=null,aa(a,c,o),a=o,t.current.lanes=a,Ma(t,a),un(t),e[xn]=t.current,qu(e),new tr(t)},nl.version="19.2.3",nl}var nm;function Kb(){if(nm)return ff.exports;nm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(i){console.error(i)}}return n(),ff.exports=Xb(),ff.exports}var Zb=Kb();function nt(n){if(typeof n=="string"||typeof n=="number")return""+n;let i="";if(Array.isArray(n))for(let l=0,s;l<n.length;l++)(s=nt(n[l]))!==""&&(i+=(i&&" ")+s);else for(let l in n)n[l]&&(i+=(i&&" ")+l);return i}var Qb={value:()=>{}};function zr(){for(var n=0,i=arguments.length,l={},s;n<i;++n){if(!(s=arguments[n]+"")||s in l||/[\s.]/.test(s))throw new Error("illegal type: "+s);l[s]=[]}return new dr(l)}function dr(n){this._=n}function Jb(n,i){return n.trim().split(/^|\s+/).map(function(l){var s="",r=l.indexOf(".");if(r>=0&&(s=l.slice(r+1),l=l.slice(0,r)),l&&!i.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:s}})}dr.prototype=zr.prototype={constructor:dr,on:function(n,i){var l=this._,s=Jb(n+"",l),r,f=-1,d=s.length;if(arguments.length<2){for(;++f<d;)if((r=(n=s[f]).type)&&(r=Fb(l[r],n.name)))return r;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++f<d;)if(r=(n=s[f]).type)l[r]=am(l[r],n.name,i);else if(i==null)for(r in l)l[r]=am(l[r],n.name,null);return this},copy:function(){var n={},i=this._;for(var l in i)n[l]=i[l].slice();return new dr(n)},call:function(n,i){if((r=arguments.length-2)>0)for(var l=new Array(r),s=0,r,f;s<r;++s)l[s]=arguments[s+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(f=this._[n],s=0,r=f.length;s<r;++s)f[s].value.apply(i,l)},apply:function(n,i,l){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var s=this._[n],r=0,f=s.length;r<f;++r)s[r].value.apply(i,l)}};function Fb(n,i){for(var l=0,s=n.length,r;l<s;++l)if((r=n[l]).name===i)return r.value}function am(n,i,l){for(var s=0,r=n.length;s<r;++s)if(n[s].name===i){n[s]=Qb,n=n.slice(0,s).concat(n.slice(s+1));break}return l!=null&&n.push({name:i,value:l}),n}var Of="http://www.w3.org/1999/xhtml";const im={svg:"http://www.w3.org/2000/svg",xhtml:Of,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Rr(n){var i=n+="",l=i.indexOf(":");return l>=0&&(i=n.slice(0,l))!=="xmlns"&&(n=n.slice(l+1)),im.hasOwnProperty(i)?{space:im[i],local:n}:n}function Wb(n){return function(){var i=this.ownerDocument,l=this.namespaceURI;return l===Of&&i.documentElement.namespaceURI===Of?i.createElement(n):i.createElementNS(l,n)}}function Pb(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Uy(n){var i=Rr(n);return(i.local?Pb:Wb)(i)}function eS(){}function Xf(n){return n==null?eS:function(){return this.querySelector(n)}}function tS(n){typeof n!="function"&&(n=Xf(n));for(var i=this._groups,l=i.length,s=new Array(l),r=0;r<l;++r)for(var f=i[r],d=f.length,g=s[r]=new Array(d),p,h,b=0;b<d;++b)(p=f[b])&&(h=n.call(p,p.__data__,b,f))&&("__data__"in p&&(h.__data__=p.__data__),g[b]=h);return new Ut(s,this._parents)}function nS(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function aS(){return[]}function Ly(n){return n==null?aS:function(){return this.querySelectorAll(n)}}function iS(n){return function(){return nS(n.apply(this,arguments))}}function oS(n){typeof n=="function"?n=iS(n):n=Ly(n);for(var i=this._groups,l=i.length,s=[],r=[],f=0;f<l;++f)for(var d=i[f],g=d.length,p,h=0;h<g;++h)(p=d[h])&&(s.push(n.call(p,p.__data__,h,d)),r.push(p));return new Ut(s,r)}function By(n){return function(){return this.matches(n)}}function Iy(n){return function(i){return i.matches(n)}}var lS=Array.prototype.find;function sS(n){return function(){return lS.call(this.children,n)}}function rS(){return this.firstElementChild}function cS(n){return this.select(n==null?rS:sS(typeof n=="function"?n:Iy(n)))}var uS=Array.prototype.filter;function fS(){return Array.from(this.children)}function dS(n){return function(){return uS.call(this.children,n)}}function gS(n){return this.selectAll(n==null?fS:dS(typeof n=="function"?n:Iy(n)))}function hS(n){typeof n!="function"&&(n=By(n));for(var i=this._groups,l=i.length,s=new Array(l),r=0;r<l;++r)for(var f=i[r],d=f.length,g=s[r]=[],p,h=0;h<d;++h)(p=f[h])&&n.call(p,p.__data__,h,f)&&g.push(p);return new Ut(s,this._parents)}function qy(n){return new Array(n.length)}function pS(){return new Ut(this._enter||this._groups.map(qy),this._parents)}function br(n,i){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=i}br.prototype={constructor:br,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,i){return this._parent.insertBefore(n,i)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function mS(n){return function(){return n}}function yS(n,i,l,s,r,f){for(var d=0,g,p=i.length,h=f.length;d<h;++d)(g=i[d])?(g.__data__=f[d],s[d]=g):l[d]=new br(n,f[d]);for(;d<p;++d)(g=i[d])&&(r[d]=g)}function vS(n,i,l,s,r,f,d){var g,p,h=new Map,b=i.length,x=f.length,m=new Array(b),S;for(g=0;g<b;++g)(p=i[g])&&(m[g]=S=d.call(p,p.__data__,g,i)+"",h.has(S)?r[g]=p:h.set(S,p));for(g=0;g<x;++g)S=d.call(n,f[g],g,f)+"",(p=h.get(S))?(s[g]=p,p.__data__=f[g],h.delete(S)):l[g]=new br(n,f[g]);for(g=0;g<b;++g)(p=i[g])&&h.get(m[g])===p&&(r[g]=p)}function xS(n){return n.__data__}function bS(n,i){if(!arguments.length)return Array.from(this,xS);var l=i?vS:yS,s=this._parents,r=this._groups;typeof n!="function"&&(n=mS(n));for(var f=r.length,d=new Array(f),g=new Array(f),p=new Array(f),h=0;h<f;++h){var b=s[h],x=r[h],m=x.length,S=SS(n.call(b,b&&b.__data__,h,s)),w=S.length,N=g[h]=new Array(w),D=d[h]=new Array(w),j=p[h]=new Array(m);l(b,x,N,D,j,S,i);for(var H=0,_=0,M,A;H<w;++H)if(M=N[H]){for(H>=_&&(_=H+1);!(A=D[_])&&++_<w;);M._next=A||null}}return d=new Ut(d,s),d._enter=g,d._exit=p,d}function SS(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function wS(){return new Ut(this._exit||this._groups.map(qy),this._parents)}function ES(n,i,l){var s=this.enter(),r=this,f=this.exit();return typeof n=="function"?(s=n(s),s&&(s=s.selection())):s=s.append(n+""),i!=null&&(r=i(r),r&&(r=r.selection())),l==null?f.remove():l(f),s&&r?s.merge(r).order():r}function _S(n){for(var i=n.selection?n.selection():n,l=this._groups,s=i._groups,r=l.length,f=s.length,d=Math.min(r,f),g=new Array(r),p=0;p<d;++p)for(var h=l[p],b=s[p],x=h.length,m=g[p]=new Array(x),S,w=0;w<x;++w)(S=h[w]||b[w])&&(m[w]=S);for(;p<r;++p)g[p]=l[p];return new Ut(g,this._parents)}function NS(){for(var n=this._groups,i=-1,l=n.length;++i<l;)for(var s=n[i],r=s.length-1,f=s[r],d;--r>=0;)(d=s[r])&&(f&&d.compareDocumentPosition(f)^4&&f.parentNode.insertBefore(d,f),f=d);return this}function AS(n){n||(n=TS);function i(x,m){return x&&m?n(x.__data__,m.__data__):!x-!m}for(var l=this._groups,s=l.length,r=new Array(s),f=0;f<s;++f){for(var d=l[f],g=d.length,p=r[f]=new Array(g),h,b=0;b<g;++b)(h=d[b])&&(p[b]=h);p.sort(i)}return new Ut(r,this._parents).order()}function TS(n,i){return n<i?-1:n>i?1:n>=i?0:NaN}function CS(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function MS(){return Array.from(this)}function OS(){for(var n=this._groups,i=0,l=n.length;i<l;++i)for(var s=n[i],r=0,f=s.length;r<f;++r){var d=s[r];if(d)return d}return null}function DS(){let n=0;for(const i of this)++n;return n}function jS(){return!this.node()}function zS(n){for(var i=this._groups,l=0,s=i.length;l<s;++l)for(var r=i[l],f=0,d=r.length,g;f<d;++f)(g=r[f])&&n.call(g,g.__data__,f,r);return this}function RS(n){return function(){this.removeAttribute(n)}}function HS(n){return function(){this.removeAttributeNS(n.space,n.local)}}function GS(n,i){return function(){this.setAttribute(n,i)}}function kS(n,i){return function(){this.setAttributeNS(n.space,n.local,i)}}function US(n,i){return function(){var l=i.apply(this,arguments);l==null?this.removeAttribute(n):this.setAttribute(n,l)}}function LS(n,i){return function(){var l=i.apply(this,arguments);l==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,l)}}function BS(n,i){var l=Rr(n);if(arguments.length<2){var s=this.node();return l.local?s.getAttributeNS(l.space,l.local):s.getAttribute(l)}return this.each((i==null?l.local?HS:RS:typeof i=="function"?l.local?LS:US:l.local?kS:GS)(l,i))}function Yy(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function IS(n){return function(){this.style.removeProperty(n)}}function qS(n,i,l){return function(){this.style.setProperty(n,i,l)}}function YS(n,i,l){return function(){var s=i.apply(this,arguments);s==null?this.style.removeProperty(n):this.style.setProperty(n,s,l)}}function VS(n,i,l){return arguments.length>1?this.each((i==null?IS:typeof i=="function"?YS:qS)(n,i,l??"")):eo(this.node(),n)}function eo(n,i){return n.style.getPropertyValue(i)||Yy(n).getComputedStyle(n,null).getPropertyValue(i)}function $S(n){return function(){delete this[n]}}function XS(n,i){return function(){this[n]=i}}function KS(n,i){return function(){var l=i.apply(this,arguments);l==null?delete this[n]:this[n]=l}}function ZS(n,i){return arguments.length>1?this.each((i==null?$S:typeof i=="function"?KS:XS)(n,i)):this.node()[n]}function Vy(n){return n.trim().split(/^|\s+/)}function Kf(n){return n.classList||new $y(n)}function $y(n){this._node=n,this._names=Vy(n.getAttribute("class")||"")}$y.prototype={add:function(n){var i=this._names.indexOf(n);i<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var i=this._names.indexOf(n);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function Xy(n,i){for(var l=Kf(n),s=-1,r=i.length;++s<r;)l.add(i[s])}function Ky(n,i){for(var l=Kf(n),s=-1,r=i.length;++s<r;)l.remove(i[s])}function QS(n){return function(){Xy(this,n)}}function JS(n){return function(){Ky(this,n)}}function FS(n,i){return function(){(i.apply(this,arguments)?Xy:Ky)(this,n)}}function WS(n,i){var l=Vy(n+"");if(arguments.length<2){for(var s=Kf(this.node()),r=-1,f=l.length;++r<f;)if(!s.contains(l[r]))return!1;return!0}return this.each((typeof i=="function"?FS:i?QS:JS)(l,i))}function PS(){this.textContent=""}function e1(n){return function(){this.textContent=n}}function t1(n){return function(){var i=n.apply(this,arguments);this.textContent=i??""}}function n1(n){return arguments.length?this.each(n==null?PS:(typeof n=="function"?t1:e1)(n)):this.node().textContent}function a1(){this.innerHTML=""}function i1(n){return function(){this.innerHTML=n}}function o1(n){return function(){var i=n.apply(this,arguments);this.innerHTML=i??""}}function l1(n){return arguments.length?this.each(n==null?a1:(typeof n=="function"?o1:i1)(n)):this.node().innerHTML}function s1(){this.nextSibling&&this.parentNode.appendChild(this)}function r1(){return this.each(s1)}function c1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function u1(){return this.each(c1)}function f1(n){var i=typeof n=="function"?n:Uy(n);return this.select(function(){return this.appendChild(i.apply(this,arguments))})}function d1(){return null}function g1(n,i){var l=typeof n=="function"?n:Uy(n),s=i==null?d1:typeof i=="function"?i:Xf(i);return this.select(function(){return this.insertBefore(l.apply(this,arguments),s.apply(this,arguments)||null)})}function h1(){var n=this.parentNode;n&&n.removeChild(this)}function p1(){return this.each(h1)}function m1(){var n=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(n,this.nextSibling):n}function y1(){var n=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(n,this.nextSibling):n}function v1(n){return this.select(n?y1:m1)}function x1(n){return arguments.length?this.property("__data__",n):this.node().__data__}function b1(n){return function(i){n.call(this,i,this.__data__)}}function S1(n){return n.trim().split(/^|\s+/).map(function(i){var l="",s=i.indexOf(".");return s>=0&&(l=i.slice(s+1),i=i.slice(0,s)),{type:i,name:l}})}function w1(n){return function(){var i=this.__on;if(i){for(var l=0,s=-1,r=i.length,f;l<r;++l)f=i[l],(!n.type||f.type===n.type)&&f.name===n.name?this.removeEventListener(f.type,f.listener,f.options):i[++s]=f;++s?i.length=s:delete this.__on}}}function E1(n,i,l){return function(){var s=this.__on,r,f=b1(i);if(s){for(var d=0,g=s.length;d<g;++d)if((r=s[d]).type===n.type&&r.name===n.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=f,r.options=l),r.value=i;return}}this.addEventListener(n.type,f,l),r={type:n.type,name:n.name,value:i,listener:f,options:l},s?s.push(r):this.__on=[r]}}function _1(n,i,l){var s=S1(n+""),r,f=s.length,d;if(arguments.length<2){var g=this.node().__on;if(g){for(var p=0,h=g.length,b;p<h;++p)for(r=0,b=g[p];r<f;++r)if((d=s[r]).type===b.type&&d.name===b.name)return b.value}return}for(g=i?E1:w1,r=0;r<f;++r)this.each(g(s[r],i,l));return this}function Zy(n,i,l){var s=Yy(n),r=s.CustomEvent;typeof r=="function"?r=new r(i,l):(r=s.document.createEvent("Event"),l?(r.initEvent(i,l.bubbles,l.cancelable),r.detail=l.detail):r.initEvent(i,!1,!1)),n.dispatchEvent(r)}function N1(n,i){return function(){return Zy(this,n,i)}}function A1(n,i){return function(){return Zy(this,n,i.apply(this,arguments))}}function T1(n,i){return this.each((typeof i=="function"?A1:N1)(n,i))}function*C1(){for(var n=this._groups,i=0,l=n.length;i<l;++i)for(var s=n[i],r=0,f=s.length,d;r<f;++r)(d=s[r])&&(yield d)}var Qy=[null];function Ut(n,i){this._groups=n,this._parents=i}function Al(){return new Ut([[document.documentElement]],Qy)}function M1(){return this}Ut.prototype=Al.prototype={constructor:Ut,select:tS,selectAll:oS,selectChild:cS,selectChildren:gS,filter:hS,data:bS,enter:pS,exit:wS,join:ES,merge:_S,selection:M1,order:NS,sort:AS,call:CS,nodes:MS,node:OS,size:DS,empty:jS,each:zS,attr:BS,style:VS,property:ZS,classed:WS,text:n1,html:l1,raise:r1,lower:u1,append:f1,insert:g1,remove:p1,clone:v1,datum:x1,on:_1,dispatch:T1,[Symbol.iterator]:C1};function kt(n){return typeof n=="string"?new Ut([[document.querySelector(n)]],[document.documentElement]):new Ut([[n]],Qy)}function O1(n){let i;for(;i=n.sourceEvent;)n=i;return n}function Pt(n,i){if(n=O1(n),i===void 0&&(i=n.currentTarget),i){var l=i.ownerSVGElement||i;if(l.createSVGPoint){var s=l.createSVGPoint();return s.x=n.clientX,s.y=n.clientY,s=s.matrixTransform(i.getScreenCTM().inverse()),[s.x,s.y]}if(i.getBoundingClientRect){var r=i.getBoundingClientRect();return[n.clientX-r.left-i.clientLeft,n.clientY-r.top-i.clientTop]}}return[n.pageX,n.pageY]}const D1={passive:!1},hl={capture:!0,passive:!1};function pf(n){n.stopImmediatePropagation()}function Wi(n){n.preventDefault(),n.stopImmediatePropagation()}function Jy(n){var i=n.document.documentElement,l=kt(n).on("dragstart.drag",Wi,hl);"onselectstart"in i?l.on("selectstart.drag",Wi,hl):(i.__noselect=i.style.MozUserSelect,i.style.MozUserSelect="none")}function Fy(n,i){var l=n.document.documentElement,s=kt(n).on("dragstart.drag",null);i&&(s.on("click.drag",Wi,hl),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in l?s.on("selectstart.drag",null):(l.style.MozUserSelect=l.__noselect,delete l.__noselect)}const ar=n=>()=>n;function Df(n,{sourceEvent:i,subject:l,target:s,identifier:r,active:f,x:d,y:g,dx:p,dy:h,dispatch:b}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:i,enumerable:!0,configurable:!0},subject:{value:l,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:f,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:g,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:b}})}Df.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function j1(n){return!n.ctrlKey&&!n.button}function z1(){return this.parentNode}function R1(n,i){return i??{x:n.x,y:n.y}}function H1(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wy(){var n=j1,i=z1,l=R1,s=H1,r={},f=zr("start","drag","end"),d=0,g,p,h,b,x=0;function m(M){M.on("mousedown.drag",S).filter(s).on("touchstart.drag",D).on("touchmove.drag",j,D1).on("touchend.drag touchcancel.drag",H).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(M,A){if(!(b||!n.call(this,M,A))){var T=_(this,i.call(this,M,A),M,A,"mouse");T&&(kt(M.view).on("mousemove.drag",w,hl).on("mouseup.drag",N,hl),Jy(M.view),pf(M),h=!1,g=M.clientX,p=M.clientY,T("start",M))}}function w(M){if(Wi(M),!h){var A=M.clientX-g,T=M.clientY-p;h=A*A+T*T>x}r.mouse("drag",M)}function N(M){kt(M.view).on("mousemove.drag mouseup.drag",null),Fy(M.view,h),Wi(M),r.mouse("end",M)}function D(M,A){if(n.call(this,M,A)){var T=M.changedTouches,G=i.call(this,M,A),B=T.length,Y,se;for(Y=0;Y<B;++Y)(se=_(this,G,M,A,T[Y].identifier,T[Y]))&&(pf(M),se("start",M,T[Y]))}}function j(M){var A=M.changedTouches,T=A.length,G,B;for(G=0;G<T;++G)(B=r[A[G].identifier])&&(Wi(M),B("drag",M,A[G]))}function H(M){var A=M.changedTouches,T=A.length,G,B;for(b&&clearTimeout(b),b=setTimeout(function(){b=null},500),G=0;G<T;++G)(B=r[A[G].identifier])&&(pf(M),B("end",M,A[G]))}function _(M,A,T,G,B,Y){var se=f.copy(),J=Pt(Y||T,A),$,ie,z;if((z=l.call(M,new Df("beforestart",{sourceEvent:T,target:m,identifier:B,active:d,x:J[0],y:J[1],dx:0,dy:0,dispatch:se}),G))!=null)return $=z.x-J[0]||0,ie=z.y-J[1]||0,function X(C,k,I){var K=J,te;switch(C){case"start":r[B]=X,te=d++;break;case"end":delete r[B],--d;case"drag":J=Pt(I||k,A),te=d;break}se.call(C,M,new Df(C,{sourceEvent:k,subject:z,target:m,identifier:B,active:te,x:J[0]+$,y:J[1]+ie,dx:J[0]-K[0],dy:J[1]-K[1],dispatch:se}),G)}}return m.filter=function(M){return arguments.length?(n=typeof M=="function"?M:ar(!!M),m):n},m.container=function(M){return arguments.length?(i=typeof M=="function"?M:ar(M),m):i},m.subject=function(M){return arguments.length?(l=typeof M=="function"?M:ar(M),m):l},m.touchable=function(M){return arguments.length?(s=typeof M=="function"?M:ar(!!M),m):s},m.on=function(){var M=f.on.apply(f,arguments);return M===f?m:M},m.clickDistance=function(M){return arguments.length?(x=(M=+M)*M,m):Math.sqrt(x)},m}function Zf(n,i,l){n.prototype=i.prototype=l,l.constructor=n}function Py(n,i){var l=Object.create(n.prototype);for(var s in i)l[s]=i[s];return l}function Tl(){}var pl=.7,Sr=1/pl,Pi="\\s*([+-]?\\d+)\\s*",ml="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",G1=/^#([0-9a-f]{3,8})$/,k1=new RegExp(`^rgb\\(${Pi},${Pi},${Pi}\\)$`),U1=new RegExp(`^rgb\\(${gn},${gn},${gn}\\)$`),L1=new RegExp(`^rgba\\(${Pi},${Pi},${Pi},${ml}\\)$`),B1=new RegExp(`^rgba\\(${gn},${gn},${gn},${ml}\\)$`),I1=new RegExp(`^hsl\\(${ml},${gn},${gn}\\)$`),q1=new RegExp(`^hsla\\(${ml},${gn},${gn},${ml}\\)$`),om={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zf(Tl,ti,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:lm,formatHex:lm,formatHex8:Y1,formatHsl:V1,formatRgb:sm,toString:sm});function lm(){return this.rgb().formatHex()}function Y1(){return this.rgb().formatHex8()}function V1(){return e0(this).formatHsl()}function sm(){return this.rgb().formatRgb()}function ti(n){var i,l;return n=(n+"").trim().toLowerCase(),(i=G1.exec(n))?(l=i[1].length,i=parseInt(i[1],16),l===6?rm(i):l===3?new Ct(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):l===8?ir(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):l===4?ir(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=k1.exec(n))?new Ct(i[1],i[2],i[3],1):(i=U1.exec(n))?new Ct(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=L1.exec(n))?ir(i[1],i[2],i[3],i[4]):(i=B1.exec(n))?ir(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=I1.exec(n))?fm(i[1],i[2]/100,i[3]/100,1):(i=q1.exec(n))?fm(i[1],i[2]/100,i[3]/100,i[4]):om.hasOwnProperty(n)?rm(om[n]):n==="transparent"?new Ct(NaN,NaN,NaN,0):null}function rm(n){return new Ct(n>>16&255,n>>8&255,n&255,1)}function ir(n,i,l,s){return s<=0&&(n=i=l=NaN),new Ct(n,i,l,s)}function $1(n){return n instanceof Tl||(n=ti(n)),n?(n=n.rgb(),new Ct(n.r,n.g,n.b,n.opacity)):new Ct}function jf(n,i,l,s){return arguments.length===1?$1(n):new Ct(n,i,l,s??1)}function Ct(n,i,l,s){this.r=+n,this.g=+i,this.b=+l,this.opacity=+s}Zf(Ct,jf,Py(Tl,{brighter(n){return n=n==null?Sr:Math.pow(Sr,n),new Ct(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?pl:Math.pow(pl,n),new Ct(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Ct(Wa(this.r),Wa(this.g),Wa(this.b),wr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cm,formatHex:cm,formatHex8:X1,formatRgb:um,toString:um}));function cm(){return`#${Fa(this.r)}${Fa(this.g)}${Fa(this.b)}`}function X1(){return`#${Fa(this.r)}${Fa(this.g)}${Fa(this.b)}${Fa((isNaN(this.opacity)?1:this.opacity)*255)}`}function um(){const n=wr(this.opacity);return`${n===1?"rgb(":"rgba("}${Wa(this.r)}, ${Wa(this.g)}, ${Wa(this.b)}${n===1?")":`, ${n})`}`}function wr(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Wa(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Fa(n){return n=Wa(n),(n<16?"0":"")+n.toString(16)}function fm(n,i,l,s){return s<=0?n=i=l=NaN:l<=0||l>=1?n=i=NaN:i<=0&&(n=NaN),new en(n,i,l,s)}function e0(n){if(n instanceof en)return new en(n.h,n.s,n.l,n.opacity);if(n instanceof Tl||(n=ti(n)),!n)return new en;if(n instanceof en)return n;n=n.rgb();var i=n.r/255,l=n.g/255,s=n.b/255,r=Math.min(i,l,s),f=Math.max(i,l,s),d=NaN,g=f-r,p=(f+r)/2;return g?(i===f?d=(l-s)/g+(l<s)*6:l===f?d=(s-i)/g+2:d=(i-l)/g+4,g/=p<.5?f+r:2-f-r,d*=60):g=p>0&&p<1?0:d,new en(d,g,p,n.opacity)}function K1(n,i,l,s){return arguments.length===1?e0(n):new en(n,i,l,s??1)}function en(n,i,l,s){this.h=+n,this.s=+i,this.l=+l,this.opacity=+s}Zf(en,K1,Py(Tl,{brighter(n){return n=n==null?Sr:Math.pow(Sr,n),new en(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?pl:Math.pow(pl,n),new en(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,i=isNaN(n)||isNaN(this.s)?0:this.s,l=this.l,s=l+(l<.5?l:1-l)*i,r=2*l-s;return new Ct(mf(n>=240?n-240:n+120,r,s),mf(n,r,s),mf(n<120?n+240:n-120,r,s),this.opacity)},clamp(){return new en(dm(this.h),or(this.s),or(this.l),wr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=wr(this.opacity);return`${n===1?"hsl(":"hsla("}${dm(this.h)}, ${or(this.s)*100}%, ${or(this.l)*100}%${n===1?")":`, ${n})`}`}}));function dm(n){return n=(n||0)%360,n<0?n+360:n}function or(n){return Math.max(0,Math.min(1,n||0))}function mf(n,i,l){return(n<60?i+(l-i)*n/60:n<180?l:n<240?i+(l-i)*(240-n)/60:i)*255}const Qf=n=>()=>n;function Z1(n,i){return function(l){return n+l*i}}function Q1(n,i,l){return n=Math.pow(n,l),i=Math.pow(i,l)-n,l=1/l,function(s){return Math.pow(n+s*i,l)}}function J1(n){return(n=+n)==1?t0:function(i,l){return l-i?Q1(i,l,n):Qf(isNaN(i)?l:i)}}function t0(n,i){var l=i-n;return l?Z1(n,l):Qf(isNaN(n)?i:n)}const Er=(function n(i){var l=J1(i);function s(r,f){var d=l((r=jf(r)).r,(f=jf(f)).r),g=l(r.g,f.g),p=l(r.b,f.b),h=t0(r.opacity,f.opacity);return function(b){return r.r=d(b),r.g=g(b),r.b=p(b),r.opacity=h(b),r+""}}return s.gamma=n,s})(1);function F1(n,i){i||(i=[]);var l=n?Math.min(i.length,n.length):0,s=i.slice(),r;return function(f){for(r=0;r<l;++r)s[r]=n[r]*(1-f)+i[r]*f;return s}}function W1(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function P1(n,i){var l=i?i.length:0,s=n?Math.min(l,n.length):0,r=new Array(s),f=new Array(l),d;for(d=0;d<s;++d)r[d]=ul(n[d],i[d]);for(;d<l;++d)f[d]=i[d];return function(g){for(d=0;d<s;++d)f[d]=r[d](g);return f}}function ew(n,i){var l=new Date;return n=+n,i=+i,function(s){return l.setTime(n*(1-s)+i*s),l}}function dn(n,i){return n=+n,i=+i,function(l){return n*(1-l)+i*l}}function tw(n,i){var l={},s={},r;(n===null||typeof n!="object")&&(n={}),(i===null||typeof i!="object")&&(i={});for(r in i)r in n?l[r]=ul(n[r],i[r]):s[r]=i[r];return function(f){for(r in l)s[r]=l[r](f);return s}}var zf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yf=new RegExp(zf.source,"g");function nw(n){return function(){return n}}function aw(n){return function(i){return n(i)+""}}function n0(n,i){var l=zf.lastIndex=yf.lastIndex=0,s,r,f,d=-1,g=[],p=[];for(n=n+"",i=i+"";(s=zf.exec(n))&&(r=yf.exec(i));)(f=r.index)>l&&(f=i.slice(l,f),g[d]?g[d]+=f:g[++d]=f),(s=s[0])===(r=r[0])?g[d]?g[d]+=r:g[++d]=r:(g[++d]=null,p.push({i:d,x:dn(s,r)})),l=yf.lastIndex;return l<i.length&&(f=i.slice(l),g[d]?g[d]+=f:g[++d]=f),g.length<2?p[0]?aw(p[0].x):nw(i):(i=p.length,function(h){for(var b=0,x;b<i;++b)g[(x=p[b]).i]=x.x(h);return g.join("")})}function ul(n,i){var l=typeof i,s;return i==null||l==="boolean"?Qf(i):(l==="number"?dn:l==="string"?(s=ti(i))?(i=s,Er):n0:i instanceof ti?Er:i instanceof Date?ew:W1(i)?F1:Array.isArray(i)?P1:typeof i.valueOf!="function"&&typeof i.toString!="function"||isNaN(i)?tw:dn)(n,i)}var gm=180/Math.PI,Rf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function a0(n,i,l,s,r,f){var d,g,p;return(d=Math.sqrt(n*n+i*i))&&(n/=d,i/=d),(p=n*l+i*s)&&(l-=n*p,s-=i*p),(g=Math.sqrt(l*l+s*s))&&(l/=g,s/=g,p/=g),n*s<i*l&&(n=-n,i=-i,p=-p,d=-d),{translateX:r,translateY:f,rotate:Math.atan2(i,n)*gm,skewX:Math.atan(p)*gm,scaleX:d,scaleY:g}}var lr;function iw(n){const i=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return i.isIdentity?Rf:a0(i.a,i.b,i.c,i.d,i.e,i.f)}function ow(n){return n==null||(lr||(lr=document.createElementNS("http://www.w3.org/2000/svg","g")),lr.setAttribute("transform",n),!(n=lr.transform.baseVal.consolidate()))?Rf:(n=n.matrix,a0(n.a,n.b,n.c,n.d,n.e,n.f))}function i0(n,i,l,s){function r(h){return h.length?h.pop()+" ":""}function f(h,b,x,m,S,w){if(h!==x||b!==m){var N=S.push("translate(",null,i,null,l);w.push({i:N-4,x:dn(h,x)},{i:N-2,x:dn(b,m)})}else(x||m)&&S.push("translate("+x+i+m+l)}function d(h,b,x,m){h!==b?(h-b>180?b+=360:b-h>180&&(h+=360),m.push({i:x.push(r(x)+"rotate(",null,s)-2,x:dn(h,b)})):b&&x.push(r(x)+"rotate("+b+s)}function g(h,b,x,m){h!==b?m.push({i:x.push(r(x)+"skewX(",null,s)-2,x:dn(h,b)}):b&&x.push(r(x)+"skewX("+b+s)}function p(h,b,x,m,S,w){if(h!==x||b!==m){var N=S.push(r(S)+"scale(",null,",",null,")");w.push({i:N-4,x:dn(h,x)},{i:N-2,x:dn(b,m)})}else(x!==1||m!==1)&&S.push(r(S)+"scale("+x+","+m+")")}return function(h,b){var x=[],m=[];return h=n(h),b=n(b),f(h.translateX,h.translateY,b.translateX,b.translateY,x,m),d(h.rotate,b.rotate,x,m),g(h.skewX,b.skewX,x,m),p(h.scaleX,h.scaleY,b.scaleX,b.scaleY,x,m),h=b=null,function(S){for(var w=-1,N=m.length,D;++w<N;)x[(D=m[w]).i]=D.x(S);return x.join("")}}}var lw=i0(iw,"px, ","px)","deg)"),sw=i0(ow,", ",")",")"),rw=1e-12;function hm(n){return((n=Math.exp(n))+1/n)/2}function cw(n){return((n=Math.exp(n))-1/n)/2}function uw(n){return((n=Math.exp(2*n))-1)/(n+1)}const gr=(function n(i,l,s){function r(f,d){var g=f[0],p=f[1],h=f[2],b=d[0],x=d[1],m=d[2],S=b-g,w=x-p,N=S*S+w*w,D,j;if(N<rw)j=Math.log(m/h)/i,D=function(G){return[g+G*S,p+G*w,h*Math.exp(i*G*j)]};else{var H=Math.sqrt(N),_=(m*m-h*h+s*N)/(2*h*l*H),M=(m*m-h*h-s*N)/(2*m*l*H),A=Math.log(Math.sqrt(_*_+1)-_),T=Math.log(Math.sqrt(M*M+1)-M);j=(T-A)/i,D=function(G){var B=G*j,Y=hm(A),se=h/(l*H)*(Y*uw(i*B+A)-cw(A));return[g+se*S,p+se*w,h*Y/hm(i*B+A)]}}return D.duration=j*1e3*i/Math.SQRT2,D}return r.rho=function(f){var d=Math.max(.001,+f),g=d*d,p=g*g;return n(d,g,p)},r})(Math.SQRT2,2,4);var to=0,rl=0,al=0,o0=1e3,_r,cl,Nr=0,ni=0,Hr=0,yl=typeof performance=="object"&&performance.now?performance:Date,l0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Jf(){return ni||(l0(fw),ni=yl.now()+Hr)}function fw(){ni=0}function Ar(){this._call=this._time=this._next=null}Ar.prototype=s0.prototype={constructor:Ar,restart:function(n,i,l){if(typeof n!="function")throw new TypeError("callback is not a function");l=(l==null?Jf():+l)+(i==null?0:+i),!this._next&&cl!==this&&(cl?cl._next=this:_r=this,cl=this),this._call=n,this._time=l,Hf()},stop:function(){this._call&&(this._call=null,this._time=1/0,Hf())}};function s0(n,i,l){var s=new Ar;return s.restart(n,i,l),s}function dw(){Jf(),++to;for(var n=_r,i;n;)(i=ni-n._time)>=0&&n._call.call(void 0,i),n=n._next;--to}function pm(){ni=(Nr=yl.now())+Hr,to=rl=0;try{dw()}finally{to=0,hw(),ni=0}}function gw(){var n=yl.now(),i=n-Nr;i>o0&&(Hr-=i,Nr=n)}function hw(){for(var n,i=_r,l,s=1/0;i;)i._call?(s>i._time&&(s=i._time),n=i,i=i._next):(l=i._next,i._next=null,i=n?n._next=l:_r=l);cl=n,Hf(s)}function Hf(n){if(!to){rl&&(rl=clearTimeout(rl));var i=n-ni;i>24?(n<1/0&&(rl=setTimeout(pm,n-yl.now()-Hr)),al&&(al=clearInterval(al))):(al||(Nr=yl.now(),al=setInterval(gw,o0)),to=1,l0(pm))}}function mm(n,i,l){var s=new Ar;return i=i==null?0:+i,s.restart(r=>{s.stop(),n(r+i)},i,l),s}var pw=zr("start","end","cancel","interrupt"),mw=[],r0=0,ym=1,Gf=2,hr=3,vm=4,kf=5,pr=6;function Gr(n,i,l,s,r,f){var d=n.__transition;if(!d)n.__transition={};else if(l in d)return;yw(n,l,{name:i,index:s,group:r,on:pw,tween:mw,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:r0})}function Ff(n,i){var l=an(n,i);if(l.state>r0)throw new Error("too late; already scheduled");return l}function pn(n,i){var l=an(n,i);if(l.state>hr)throw new Error("too late; already running");return l}function an(n,i){var l=n.__transition;if(!l||!(l=l[i]))throw new Error("transition not found");return l}function yw(n,i,l){var s=n.__transition,r;s[i]=l,l.timer=s0(f,0,l.time);function f(h){l.state=ym,l.timer.restart(d,l.delay,l.time),l.delay<=h&&d(h-l.delay)}function d(h){var b,x,m,S;if(l.state!==ym)return p();for(b in s)if(S=s[b],S.name===l.name){if(S.state===hr)return mm(d);S.state===vm?(S.state=pr,S.timer.stop(),S.on.call("interrupt",n,n.__data__,S.index,S.group),delete s[b]):+b<i&&(S.state=pr,S.timer.stop(),S.on.call("cancel",n,n.__data__,S.index,S.group),delete s[b])}if(mm(function(){l.state===hr&&(l.state=vm,l.timer.restart(g,l.delay,l.time),g(h))}),l.state=Gf,l.on.call("start",n,n.__data__,l.index,l.group),l.state===Gf){for(l.state=hr,r=new Array(m=l.tween.length),b=0,x=-1;b<m;++b)(S=l.tween[b].value.call(n,n.__data__,l.index,l.group))&&(r[++x]=S);r.length=x+1}}function g(h){for(var b=h<l.duration?l.ease.call(null,h/l.duration):(l.timer.restart(p),l.state=kf,1),x=-1,m=r.length;++x<m;)r[x].call(n,b);l.state===kf&&(l.on.call("end",n,n.__data__,l.index,l.group),p())}function p(){l.state=pr,l.timer.stop(),delete s[i];for(var h in s)return;delete n.__transition}}function mr(n,i){var l=n.__transition,s,r,f=!0,d;if(l){i=i==null?null:i+"";for(d in l){if((s=l[d]).name!==i){f=!1;continue}r=s.state>Gf&&s.state<kf,s.state=pr,s.timer.stop(),s.on.call(r?"interrupt":"cancel",n,n.__data__,s.index,s.group),delete l[d]}f&&delete n.__transition}}function vw(n){return this.each(function(){mr(this,n)})}function xw(n,i){var l,s;return function(){var r=pn(this,n),f=r.tween;if(f!==l){s=l=f;for(var d=0,g=s.length;d<g;++d)if(s[d].name===i){s=s.slice(),s.splice(d,1);break}}r.tween=s}}function bw(n,i,l){var s,r;if(typeof l!="function")throw new Error;return function(){var f=pn(this,n),d=f.tween;if(d!==s){r=(s=d).slice();for(var g={name:i,value:l},p=0,h=r.length;p<h;++p)if(r[p].name===i){r[p]=g;break}p===h&&r.push(g)}f.tween=r}}function Sw(n,i){var l=this._id;if(n+="",arguments.length<2){for(var s=an(this.node(),l).tween,r=0,f=s.length,d;r<f;++r)if((d=s[r]).name===n)return d.value;return null}return this.each((i==null?xw:bw)(l,n,i))}function Wf(n,i,l){var s=n._id;return n.each(function(){var r=pn(this,s);(r.value||(r.value={}))[i]=l.apply(this,arguments)}),function(r){return an(r,s).value[i]}}function c0(n,i){var l;return(typeof i=="number"?dn:i instanceof ti?Er:(l=ti(i))?(i=l,Er):n0)(n,i)}function ww(n){return function(){this.removeAttribute(n)}}function Ew(n){return function(){this.removeAttributeNS(n.space,n.local)}}function _w(n,i,l){var s,r=l+"",f;return function(){var d=this.getAttribute(n);return d===r?null:d===s?f:f=i(s=d,l)}}function Nw(n,i,l){var s,r=l+"",f;return function(){var d=this.getAttributeNS(n.space,n.local);return d===r?null:d===s?f:f=i(s=d,l)}}function Aw(n,i,l){var s,r,f;return function(){var d,g=l(this),p;return g==null?void this.removeAttribute(n):(d=this.getAttribute(n),p=g+"",d===p?null:d===s&&p===r?f:(r=p,f=i(s=d,g)))}}function Tw(n,i,l){var s,r,f;return function(){var d,g=l(this),p;return g==null?void this.removeAttributeNS(n.space,n.local):(d=this.getAttributeNS(n.space,n.local),p=g+"",d===p?null:d===s&&p===r?f:(r=p,f=i(s=d,g)))}}function Cw(n,i){var l=Rr(n),s=l==="transform"?sw:c0;return this.attrTween(n,typeof i=="function"?(l.local?Tw:Aw)(l,s,Wf(this,"attr."+n,i)):i==null?(l.local?Ew:ww)(l):(l.local?Nw:_w)(l,s,i))}function Mw(n,i){return function(l){this.setAttribute(n,i.call(this,l))}}function Ow(n,i){return function(l){this.setAttributeNS(n.space,n.local,i.call(this,l))}}function Dw(n,i){var l,s;function r(){var f=i.apply(this,arguments);return f!==s&&(l=(s=f)&&Ow(n,f)),l}return r._value=i,r}function jw(n,i){var l,s;function r(){var f=i.apply(this,arguments);return f!==s&&(l=(s=f)&&Mw(n,f)),l}return r._value=i,r}function zw(n,i){var l="attr."+n;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(i==null)return this.tween(l,null);if(typeof i!="function")throw new Error;var s=Rr(n);return this.tween(l,(s.local?Dw:jw)(s,i))}function Rw(n,i){return function(){Ff(this,n).delay=+i.apply(this,arguments)}}function Hw(n,i){return i=+i,function(){Ff(this,n).delay=i}}function Gw(n){var i=this._id;return arguments.length?this.each((typeof n=="function"?Rw:Hw)(i,n)):an(this.node(),i).delay}function kw(n,i){return function(){pn(this,n).duration=+i.apply(this,arguments)}}function Uw(n,i){return i=+i,function(){pn(this,n).duration=i}}function Lw(n){var i=this._id;return arguments.length?this.each((typeof n=="function"?kw:Uw)(i,n)):an(this.node(),i).duration}function Bw(n,i){if(typeof i!="function")throw new Error;return function(){pn(this,n).ease=i}}function Iw(n){var i=this._id;return arguments.length?this.each(Bw(i,n)):an(this.node(),i).ease}function qw(n,i){return function(){var l=i.apply(this,arguments);if(typeof l!="function")throw new Error;pn(this,n).ease=l}}function Yw(n){if(typeof n!="function")throw new Error;return this.each(qw(this._id,n))}function Vw(n){typeof n!="function"&&(n=By(n));for(var i=this._groups,l=i.length,s=new Array(l),r=0;r<l;++r)for(var f=i[r],d=f.length,g=s[r]=[],p,h=0;h<d;++h)(p=f[h])&&n.call(p,p.__data__,h,f)&&g.push(p);return new qn(s,this._parents,this._name,this._id)}function $w(n){if(n._id!==this._id)throw new Error;for(var i=this._groups,l=n._groups,s=i.length,r=l.length,f=Math.min(s,r),d=new Array(s),g=0;g<f;++g)for(var p=i[g],h=l[g],b=p.length,x=d[g]=new Array(b),m,S=0;S<b;++S)(m=p[S]||h[S])&&(x[S]=m);for(;g<s;++g)d[g]=i[g];return new qn(d,this._parents,this._name,this._id)}function Xw(n){return(n+"").trim().split(/^|\s+/).every(function(i){var l=i.indexOf(".");return l>=0&&(i=i.slice(0,l)),!i||i==="start"})}function Kw(n,i,l){var s,r,f=Xw(i)?Ff:pn;return function(){var d=f(this,n),g=d.on;g!==s&&(r=(s=g).copy()).on(i,l),d.on=r}}function Zw(n,i){var l=this._id;return arguments.length<2?an(this.node(),l).on.on(n):this.each(Kw(l,n,i))}function Qw(n){return function(){var i=this.parentNode;for(var l in this.__transition)if(+l!==n)return;i&&i.removeChild(this)}}function Jw(){return this.on("end.remove",Qw(this._id))}function Fw(n){var i=this._name,l=this._id;typeof n!="function"&&(n=Xf(n));for(var s=this._groups,r=s.length,f=new Array(r),d=0;d<r;++d)for(var g=s[d],p=g.length,h=f[d]=new Array(p),b,x,m=0;m<p;++m)(b=g[m])&&(x=n.call(b,b.__data__,m,g))&&("__data__"in b&&(x.__data__=b.__data__),h[m]=x,Gr(h[m],i,l,m,h,an(b,l)));return new qn(f,this._parents,i,l)}function Ww(n){var i=this._name,l=this._id;typeof n!="function"&&(n=Ly(n));for(var s=this._groups,r=s.length,f=[],d=[],g=0;g<r;++g)for(var p=s[g],h=p.length,b,x=0;x<h;++x)if(b=p[x]){for(var m=n.call(b,b.__data__,x,p),S,w=an(b,l),N=0,D=m.length;N<D;++N)(S=m[N])&&Gr(S,i,l,N,m,w);f.push(m),d.push(b)}return new qn(f,d,i,l)}var Pw=Al.prototype.constructor;function eE(){return new Pw(this._groups,this._parents)}function tE(n,i){var l,s,r;return function(){var f=eo(this,n),d=(this.style.removeProperty(n),eo(this,n));return f===d?null:f===l&&d===s?r:r=i(l=f,s=d)}}function u0(n){return function(){this.style.removeProperty(n)}}function nE(n,i,l){var s,r=l+"",f;return function(){var d=eo(this,n);return d===r?null:d===s?f:f=i(s=d,l)}}function aE(n,i,l){var s,r,f;return function(){var d=eo(this,n),g=l(this),p=g+"";return g==null&&(p=g=(this.style.removeProperty(n),eo(this,n))),d===p?null:d===s&&p===r?f:(r=p,f=i(s=d,g))}}function iE(n,i){var l,s,r,f="style."+i,d="end."+f,g;return function(){var p=pn(this,n),h=p.on,b=p.value[f]==null?g||(g=u0(i)):void 0;(h!==l||r!==b)&&(s=(l=h).copy()).on(d,r=b),p.on=s}}function oE(n,i,l){var s=(n+="")=="transform"?lw:c0;return i==null?this.styleTween(n,tE(n,s)).on("end.style."+n,u0(n)):typeof i=="function"?this.styleTween(n,aE(n,s,Wf(this,"style."+n,i))).each(iE(this._id,n)):this.styleTween(n,nE(n,s,i),l).on("end.style."+n,null)}function lE(n,i,l){return function(s){this.style.setProperty(n,i.call(this,s),l)}}function sE(n,i,l){var s,r;function f(){var d=i.apply(this,arguments);return d!==r&&(s=(r=d)&&lE(n,d,l)),s}return f._value=i,f}function rE(n,i,l){var s="style."+(n+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(i==null)return this.tween(s,null);if(typeof i!="function")throw new Error;return this.tween(s,sE(n,i,l??""))}function cE(n){return function(){this.textContent=n}}function uE(n){return function(){var i=n(this);this.textContent=i??""}}function fE(n){return this.tween("text",typeof n=="function"?uE(Wf(this,"text",n)):cE(n==null?"":n+""))}function dE(n){return function(i){this.textContent=n.call(this,i)}}function gE(n){var i,l;function s(){var r=n.apply(this,arguments);return r!==l&&(i=(l=r)&&dE(r)),i}return s._value=n,s}function hE(n){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,gE(n))}function pE(){for(var n=this._name,i=this._id,l=f0(),s=this._groups,r=s.length,f=0;f<r;++f)for(var d=s[f],g=d.length,p,h=0;h<g;++h)if(p=d[h]){var b=an(p,i);Gr(p,n,l,h,d,{time:b.time+b.delay+b.duration,delay:0,duration:b.duration,ease:b.ease})}return new qn(s,this._parents,n,l)}function mE(){var n,i,l=this,s=l._id,r=l.size();return new Promise(function(f,d){var g={value:d},p={value:function(){--r===0&&f()}};l.each(function(){var h=pn(this,s),b=h.on;b!==n&&(i=(n=b).copy(),i._.cancel.push(g),i._.interrupt.push(g),i._.end.push(p)),h.on=i}),r===0&&f()})}var yE=0;function qn(n,i,l,s){this._groups=n,this._parents=i,this._name=l,this._id=s}function f0(){return++yE}var Ln=Al.prototype;qn.prototype={constructor:qn,select:Fw,selectAll:Ww,selectChild:Ln.selectChild,selectChildren:Ln.selectChildren,filter:Vw,merge:$w,selection:eE,transition:pE,call:Ln.call,nodes:Ln.nodes,node:Ln.node,size:Ln.size,empty:Ln.empty,each:Ln.each,on:Zw,attr:Cw,attrTween:zw,style:oE,styleTween:rE,text:fE,textTween:hE,remove:Jw,tween:Sw,delay:Gw,duration:Lw,ease:Iw,easeVarying:Yw,end:mE,[Symbol.iterator]:Ln[Symbol.iterator]};function vE(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var xE={time:null,delay:0,duration:250,ease:vE};function bE(n,i){for(var l;!(l=n.__transition)||!(l=l[i]);)if(!(n=n.parentNode))throw new Error(`transition ${i} not found`);return l}function SE(n){var i,l;n instanceof qn?(i=n._id,n=n._name):(i=f0(),(l=xE).time=Jf(),n=n==null?null:n+"");for(var s=this._groups,r=s.length,f=0;f<r;++f)for(var d=s[f],g=d.length,p,h=0;h<g;++h)(p=d[h])&&Gr(p,n,i,h,d,l||bE(p,i));return new qn(s,this._parents,n,i)}Al.prototype.interrupt=vw;Al.prototype.transition=SE;const sr=n=>()=>n;function wE(n,{sourceEvent:i,target:l,transform:s,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:i,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:r}})}function Bn(n,i,l){this.k=n,this.x=i,this.y=l}Bn.prototype={constructor:Bn,scale:function(n){return n===1?this:new Bn(this.k*n,this.x,this.y)},translate:function(n,i){return n===0&i===0?this:new Bn(this.k,this.x+this.k*n,this.y+this.k*i)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var kr=new Bn(1,0,0);d0.prototype=Bn.prototype;function d0(n){for(;!n.__zoom;)if(!(n=n.parentNode))return kr;return n.__zoom}function vf(n){n.stopImmediatePropagation()}function il(n){n.preventDefault(),n.stopImmediatePropagation()}function EE(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function _E(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function xm(){return this.__zoom||kr}function NE(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function AE(){return navigator.maxTouchPoints||"ontouchstart"in this}function TE(n,i,l){var s=n.invertX(i[0][0])-l[0][0],r=n.invertX(i[1][0])-l[1][0],f=n.invertY(i[0][1])-l[0][1],d=n.invertY(i[1][1])-l[1][1];return n.translate(r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r),d>f?(f+d)/2:Math.min(0,f)||Math.max(0,d))}function g0(){var n=EE,i=_E,l=TE,s=NE,r=AE,f=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],g=250,p=gr,h=zr("start","zoom","end"),b,x,m,S=500,w=150,N=0,D=10;function j(z){z.property("__zoom",xm).on("wheel.zoom",B,{passive:!1}).on("mousedown.zoom",Y).on("dblclick.zoom",se).filter(r).on("touchstart.zoom",J).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",ie).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}j.transform=function(z,X,C,k){var I=z.selection?z.selection():z;I.property("__zoom",xm),z!==I?A(z,X,C,k):I.interrupt().each(function(){T(this,arguments).event(k).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},j.scaleBy=function(z,X,C,k){j.scaleTo(z,function(){var I=this.__zoom.k,K=typeof X=="function"?X.apply(this,arguments):X;return I*K},C,k)},j.scaleTo=function(z,X,C,k){j.transform(z,function(){var I=i.apply(this,arguments),K=this.__zoom,te=C==null?M(I):typeof C=="function"?C.apply(this,arguments):C,O=K.invert(te),U=typeof X=="function"?X.apply(this,arguments):X;return l(_(H(K,U),te,O),I,d)},C,k)},j.translateBy=function(z,X,C,k){j.transform(z,function(){return l(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof C=="function"?C.apply(this,arguments):C),i.apply(this,arguments),d)},null,k)},j.translateTo=function(z,X,C,k,I){j.transform(z,function(){var K=i.apply(this,arguments),te=this.__zoom,O=k==null?M(K):typeof k=="function"?k.apply(this,arguments):k;return l(kr.translate(O[0],O[1]).scale(te.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof C=="function"?-C.apply(this,arguments):-C),K,d)},k,I)};function H(z,X){return X=Math.max(f[0],Math.min(f[1],X)),X===z.k?z:new Bn(X,z.x,z.y)}function _(z,X,C){var k=X[0]-C[0]*z.k,I=X[1]-C[1]*z.k;return k===z.x&&I===z.y?z:new Bn(z.k,k,I)}function M(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function A(z,X,C,k){z.on("start.zoom",function(){T(this,arguments).event(k).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(k).end()}).tween("zoom",function(){var I=this,K=arguments,te=T(I,K).event(k),O=i.apply(I,K),U=C==null?M(O):typeof C=="function"?C.apply(I,K):C,ee=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),q=I.__zoom,le=typeof X=="function"?X.apply(I,K):X,ue=p(q.invert(U).concat(ee/q.k),le.invert(U).concat(ee/le.k));return function(ce){if(ce===1)ce=le;else{var re=ue(ce),fe=ee/re[2];ce=new Bn(fe,U[0]-re[0]*fe,U[1]-re[1]*fe)}te.zoom(null,ce)}})}function T(z,X,C){return!C&&z.__zooming||new G(z,X)}function G(z,X){this.that=z,this.args=X,this.active=0,this.sourceEvent=null,this.extent=i.apply(z,X),this.taps=0}G.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,X){return this.mouse&&z!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var X=kt(this.that).datum();h.call(z,this.that,new wE(z,{sourceEvent:this.sourceEvent,target:j,transform:this.that.__zoom,dispatch:h}),X)}};function B(z,...X){if(!n.apply(this,arguments))return;var C=T(this,X).event(z),k=this.__zoom,I=Math.max(f[0],Math.min(f[1],k.k*Math.pow(2,s.apply(this,arguments)))),K=Pt(z);if(C.wheel)(C.mouse[0][0]!==K[0]||C.mouse[0][1]!==K[1])&&(C.mouse[1]=k.invert(C.mouse[0]=K)),clearTimeout(C.wheel);else{if(k.k===I)return;C.mouse=[K,k.invert(K)],mr(this),C.start()}il(z),C.wheel=setTimeout(te,w),C.zoom("mouse",l(_(H(k,I),C.mouse[0],C.mouse[1]),C.extent,d));function te(){C.wheel=null,C.end()}}function Y(z,...X){if(m||!n.apply(this,arguments))return;var C=z.currentTarget,k=T(this,X,!0).event(z),I=kt(z.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",ee,!0),K=Pt(z,C),te=z.clientX,O=z.clientY;Jy(z.view),vf(z),k.mouse=[K,this.__zoom.invert(K)],mr(this),k.start();function U(q){if(il(q),!k.moved){var le=q.clientX-te,ue=q.clientY-O;k.moved=le*le+ue*ue>N}k.event(q).zoom("mouse",l(_(k.that.__zoom,k.mouse[0]=Pt(q,C),k.mouse[1]),k.extent,d))}function ee(q){I.on("mousemove.zoom mouseup.zoom",null),Fy(q.view,k.moved),il(q),k.event(q).end()}}function se(z,...X){if(n.apply(this,arguments)){var C=this.__zoom,k=Pt(z.changedTouches?z.changedTouches[0]:z,this),I=C.invert(k),K=C.k*(z.shiftKey?.5:2),te=l(_(H(C,K),k,I),i.apply(this,X),d);il(z),g>0?kt(this).transition().duration(g).call(A,te,k,z):kt(this).call(j.transform,te,k,z)}}function J(z,...X){if(n.apply(this,arguments)){var C=z.touches,k=C.length,I=T(this,X,z.changedTouches.length===k).event(z),K,te,O,U;for(vf(z),te=0;te<k;++te)O=C[te],U=Pt(O,this),U=[U,this.__zoom.invert(U),O.identifier],I.touch0?!I.touch1&&I.touch0[2]!==U[2]&&(I.touch1=U,I.taps=0):(I.touch0=U,K=!0,I.taps=1+!!b);b&&(b=clearTimeout(b)),K&&(I.taps<2&&(x=U[0],b=setTimeout(function(){b=null},S)),mr(this),I.start())}}function $(z,...X){if(this.__zooming){var C=T(this,X).event(z),k=z.changedTouches,I=k.length,K,te,O,U;for(il(z),K=0;K<I;++K)te=k[K],O=Pt(te,this),C.touch0&&C.touch0[2]===te.identifier?C.touch0[0]=O:C.touch1&&C.touch1[2]===te.identifier&&(C.touch1[0]=O);if(te=C.that.__zoom,C.touch1){var ee=C.touch0[0],q=C.touch0[1],le=C.touch1[0],ue=C.touch1[1],ce=(ce=le[0]-ee[0])*ce+(ce=le[1]-ee[1])*ce,re=(re=ue[0]-q[0])*re+(re=ue[1]-q[1])*re;te=H(te,Math.sqrt(ce/re)),O=[(ee[0]+le[0])/2,(ee[1]+le[1])/2],U=[(q[0]+ue[0])/2,(q[1]+ue[1])/2]}else if(C.touch0)O=C.touch0[0],U=C.touch0[1];else return;C.zoom("touch",l(_(te,O,U),C.extent,d))}}function ie(z,...X){if(this.__zooming){var C=T(this,X).event(z),k=z.changedTouches,I=k.length,K,te;for(vf(z),m&&clearTimeout(m),m=setTimeout(function(){m=null},S),K=0;K<I;++K)te=k[K],C.touch0&&C.touch0[2]===te.identifier?delete C.touch0:C.touch1&&C.touch1[2]===te.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(te=Pt(te,this),Math.hypot(x[0]-te[0],x[1]-te[1])<D)){var O=kt(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return j.wheelDelta=function(z){return arguments.length?(s=typeof z=="function"?z:sr(+z),j):s},j.filter=function(z){return arguments.length?(n=typeof z=="function"?z:sr(!!z),j):n},j.touchable=function(z){return arguments.length?(r=typeof z=="function"?z:sr(!!z),j):r},j.extent=function(z){return arguments.length?(i=typeof z=="function"?z:sr([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),j):i},j.scaleExtent=function(z){return arguments.length?(f[0]=+z[0],f[1]=+z[1],j):[f[0],f[1]]},j.translateExtent=function(z){return arguments.length?(d[0][0]=+z[0][0],d[1][0]=+z[1][0],d[0][1]=+z[0][1],d[1][1]=+z[1][1],j):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},j.constrain=function(z){return arguments.length?(l=z,j):l},j.duration=function(z){return arguments.length?(g=+z,j):g},j.interpolate=function(z){return arguments.length?(p=z,j):p},j.on=function(){var z=h.on.apply(h,arguments);return z===h?j:z},j.clickDistance=function(z){return arguments.length?(N=(z=+z)*z,j):Math.sqrt(N)},j.tapDistance=function(z){return arguments.length?(D=+z,j):D},j}const hn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,{id:i,sourceHandle:l,targetHandle:s})=>`Couldn't create edge for ${n} handle id: "${n==="source"?l:s}", edge id: ${i}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(n="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${n}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},vl=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],h0=["Enter"," ","Escape"],p0={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:n,x:i,y:l})=>`Moved selected node ${n}. New position, x: ${i}, y: ${l}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var no;(function(n){n.Strict="strict",n.Loose="loose"})(no||(no={}));var Pa;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(Pa||(Pa={}));var xl;(function(n){n.Partial="partial",n.Full="full"})(xl||(xl={}));const m0={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var wa;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(wa||(wa={}));var Tr;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(Tr||(Tr={}));var de;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(de||(de={}));const bm={[de.Left]:de.Right,[de.Right]:de.Left,[de.Top]:de.Bottom,[de.Bottom]:de.Top};function y0(n){return n===null?null:n?"valid":"invalid"}const v0=n=>"id"in n&&"source"in n&&"target"in n,CE=n=>"id"in n&&"position"in n&&!("source"in n)&&!("target"in n),Pf=n=>"id"in n&&"internals"in n&&!("source"in n)&&!("target"in n),Cl=(n,i=[0,0])=>{const{width:l,height:s}=Yn(n),r=n.origin??i,f=l*r[0],d=s*r[1];return{x:n.position.x-f,y:n.position.y-d}},ME=(n,i={nodeOrigin:[0,0]})=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const l=n.reduce((s,r)=>{const f=typeof r=="string";let d=!i.nodeLookup&&!f?r:void 0;i.nodeLookup&&(d=f?i.nodeLookup.get(r):Pf(r)?r:i.nodeLookup.get(r.id));const g=d?Cr(d,i.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ur(s,g)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Lr(l)},Ml=(n,i={})=>{let l={x:1/0,y:1/0,x2:-1/0,y2:-1/0},s=!1;return n.forEach(r=>{(i.filter===void 0||i.filter(r))&&(l=Ur(l,Cr(r)),s=!0)}),s?Lr(l):{x:0,y:0,width:0,height:0}},ed=(n,i,[l,s,r]=[0,0,1],f=!1,d=!1)=>{const g={...Dl(i,[l,s,r]),width:i.width/r,height:i.height/r},p=[];for(const h of n.values()){const{measured:b,selectable:x=!0,hidden:m=!1}=h;if(d&&!x||m)continue;const S=b.width??h.width??h.initialWidth??null,w=b.height??h.height??h.initialHeight??null,N=bl(g,io(h)),D=(S??0)*(w??0),j=f&&N>0;(!h.internals.handleBounds||j||N>=D||h.dragging)&&p.push(h)}return p},OE=(n,i)=>{const l=new Set;return n.forEach(s=>{l.add(s.id)}),i.filter(s=>l.has(s.source)||l.has(s.target))};function DE(n,i){const l=new Map,s=i?.nodes?new Set(i.nodes.map(r=>r.id)):null;return n.forEach(r=>{r.measured.width&&r.measured.height&&(i?.includeHiddenNodes||!r.hidden)&&(!s||s.has(r.id))&&l.set(r.id,r)}),l}async function jE({nodes:n,width:i,height:l,panZoom:s,minZoom:r,maxZoom:f},d){if(n.size===0)return Promise.resolve(!0);const g=DE(n,d),p=Ml(g),h=td(p,i,l,d?.minZoom??r,d?.maxZoom??f,d?.padding??.1);return await s.setViewport(h,{duration:d?.duration,ease:d?.ease,interpolate:d?.interpolate}),Promise.resolve(!0)}function x0({nodeId:n,nextPosition:i,nodeLookup:l,nodeOrigin:s=[0,0],nodeExtent:r,onError:f}){const d=l.get(n),g=d.parentId?l.get(d.parentId):void 0,{x:p,y:h}=g?g.internals.positionAbsolute:{x:0,y:0},b=d.origin??s;let x=d.extent||r;if(d.extent==="parent"&&!d.expandParent)if(!g)f?.("005",hn.error005());else{const S=g.measured.width,w=g.measured.height;S&&w&&(x=[[p,h],[p+S,h+w]])}else g&&oo(d.extent)&&(x=[[d.extent[0][0]+p,d.extent[0][1]+h],[d.extent[1][0]+p,d.extent[1][1]+h]]);const m=oo(x)?ai(i,x,d.measured):i;return(d.measured.width===void 0||d.measured.height===void 0)&&f?.("015",hn.error015()),{position:{x:m.x-p+(d.measured.width??0)*b[0],y:m.y-h+(d.measured.height??0)*b[1]},positionAbsolute:m}}async function zE({nodesToRemove:n=[],edgesToRemove:i=[],nodes:l,edges:s,onBeforeDelete:r}){const f=new Set(n.map(m=>m.id)),d=[];for(const m of l){if(m.deletable===!1)continue;const S=f.has(m.id),w=!S&&m.parentId&&d.find(N=>N.id===m.parentId);(S||w)&&d.push(m)}const g=new Set(i.map(m=>m.id)),p=s.filter(m=>m.deletable!==!1),b=OE(d,p);for(const m of p)g.has(m.id)&&!b.find(w=>w.id===m.id)&&b.push(m);if(!r)return{edges:b,nodes:d};const x=await r({nodes:d,edges:b});return typeof x=="boolean"?x?{edges:b,nodes:d}:{edges:[],nodes:[]}:x}const ao=(n,i=0,l=1)=>Math.min(Math.max(n,i),l),ai=(n={x:0,y:0},i,l)=>({x:ao(n.x,i[0][0],i[1][0]-(l?.width??0)),y:ao(n.y,i[0][1],i[1][1]-(l?.height??0))});function b0(n,i,l){const{width:s,height:r}=Yn(l),{x:f,y:d}=l.internals.positionAbsolute;return ai(n,[[f,d],[f+s,d+r]],i)}const Sm=(n,i,l)=>n<i?ao(Math.abs(n-i),1,i)/i:n>l?-ao(Math.abs(n-l),1,i)/i:0,S0=(n,i,l=15,s=40)=>{const r=Sm(n.x,s,i.width-s)*l,f=Sm(n.y,s,i.height-s)*l;return[r,f]},Ur=(n,i)=>({x:Math.min(n.x,i.x),y:Math.min(n.y,i.y),x2:Math.max(n.x2,i.x2),y2:Math.max(n.y2,i.y2)}),Uf=({x:n,y:i,width:l,height:s})=>({x:n,y:i,x2:n+l,y2:i+s}),Lr=({x:n,y:i,x2:l,y2:s})=>({x:n,y:i,width:l-n,height:s-i}),io=(n,i=[0,0])=>{const{x:l,y:s}=Pf(n)?n.internals.positionAbsolute:Cl(n,i);return{x:l,y:s,width:n.measured?.width??n.width??n.initialWidth??0,height:n.measured?.height??n.height??n.initialHeight??0}},Cr=(n,i=[0,0])=>{const{x:l,y:s}=Pf(n)?n.internals.positionAbsolute:Cl(n,i);return{x:l,y:s,x2:l+(n.measured?.width??n.width??n.initialWidth??0),y2:s+(n.measured?.height??n.height??n.initialHeight??0)}},w0=(n,i)=>Lr(Ur(Uf(n),Uf(i))),bl=(n,i)=>{const l=Math.max(0,Math.min(n.x+n.width,i.x+i.width)-Math.max(n.x,i.x)),s=Math.max(0,Math.min(n.y+n.height,i.y+i.height)-Math.max(n.y,i.y));return Math.ceil(l*s)},wm=n=>tn(n.width)&&tn(n.height)&&tn(n.x)&&tn(n.y),tn=n=>!isNaN(n)&&isFinite(n),RE=(n,i)=>{},Ol=(n,i=[1,1])=>({x:i[0]*Math.round(n.x/i[0]),y:i[1]*Math.round(n.y/i[1])}),Dl=({x:n,y:i},[l,s,r],f=!1,d=[1,1])=>{const g={x:(n-l)/r,y:(i-s)/r};return f?Ol(g,d):g},Mr=({x:n,y:i},[l,s,r])=>({x:n*r+l,y:i*r+s});function Zi(n,i){if(typeof n=="number")return Math.floor((i-i/(1+n))*.5);if(typeof n=="string"&&n.endsWith("px")){const l=parseFloat(n);if(!Number.isNaN(l))return Math.floor(l)}if(typeof n=="string"&&n.endsWith("%")){const l=parseFloat(n);if(!Number.isNaN(l))return Math.floor(i*l*.01)}return console.error(`[React Flow] The padding value "${n}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function HE(n,i,l){if(typeof n=="string"||typeof n=="number"){const s=Zi(n,l),r=Zi(n,i);return{top:s,right:r,bottom:s,left:r,x:r*2,y:s*2}}if(typeof n=="object"){const s=Zi(n.top??n.y??0,l),r=Zi(n.bottom??n.y??0,l),f=Zi(n.left??n.x??0,i),d=Zi(n.right??n.x??0,i);return{top:s,right:d,bottom:r,left:f,x:f+d,y:s+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function GE(n,i,l,s,r,f){const{x:d,y:g}=Mr(n,[i,l,s]),{x:p,y:h}=Mr({x:n.x+n.width,y:n.y+n.height},[i,l,s]),b=r-p,x=f-h;return{left:Math.floor(d),top:Math.floor(g),right:Math.floor(b),bottom:Math.floor(x)}}const td=(n,i,l,s,r,f)=>{const d=HE(f,i,l),g=(i-d.x)/n.width,p=(l-d.y)/n.height,h=Math.min(g,p),b=ao(h,s,r),x=n.x+n.width/2,m=n.y+n.height/2,S=i/2-x*b,w=l/2-m*b,N=GE(n,S,w,b,i,l),D={left:Math.min(N.left-d.left,0),top:Math.min(N.top-d.top,0),right:Math.min(N.right-d.right,0),bottom:Math.min(N.bottom-d.bottom,0)};return{x:S-D.left+D.right,y:w-D.top+D.bottom,zoom:b}},Sl=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function oo(n){return n!=null&&n!=="parent"}function Yn(n){return{width:n.measured?.width??n.width??n.initialWidth??0,height:n.measured?.height??n.height??n.initialHeight??0}}function E0(n){return(n.measured?.width??n.width??n.initialWidth)!==void 0&&(n.measured?.height??n.height??n.initialHeight)!==void 0}function _0(n,i={width:0,height:0},l,s,r){const f={...n},d=s.get(l);if(d){const g=d.origin||r;f.x+=d.internals.positionAbsolute.x-(i.width??0)*g[0],f.y+=d.internals.positionAbsolute.y-(i.height??0)*g[1]}return f}function Em(n,i){if(n.size!==i.size)return!1;for(const l of n)if(!i.has(l))return!1;return!0}function kE(){let n,i;return{promise:new Promise((s,r)=>{n=s,i=r}),resolve:n,reject:i}}function UE(n){return{...p0,...n||{}}}function fl(n,{snapGrid:i=[0,0],snapToGrid:l=!1,transform:s,containerBounds:r}){const{x:f,y:d}=nn(n),g=Dl({x:f-(r?.left??0),y:d-(r?.top??0)},s),{x:p,y:h}=l?Ol(g,i):g;return{xSnapped:p,ySnapped:h,...g}}const nd=n=>({width:n.offsetWidth,height:n.offsetHeight}),N0=n=>n?.getRootNode?.()||window?.document,LE=["INPUT","SELECT","TEXTAREA"];function A0(n){const i=n.composedPath?.()?.[0]||n.target;return i?.nodeType!==1?!1:LE.includes(i.nodeName)||i.hasAttribute("contenteditable")||!!i.closest(".nokey")}const T0=n=>"clientX"in n,nn=(n,i)=>{const l=T0(n),s=l?n.clientX:n.touches?.[0].clientX,r=l?n.clientY:n.touches?.[0].clientY;return{x:s-(i?.left??0),y:r-(i?.top??0)}},_m=(n,i,l,s,r)=>{const f=i.querySelectorAll(`.${n}`);return!f||!f.length?null:Array.from(f).map(d=>{const g=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),type:n,nodeId:r,position:d.getAttribute("data-handlepos"),x:(g.left-l.left)/s,y:(g.top-l.top)/s,...nd(d)}})};function C0({sourceX:n,sourceY:i,targetX:l,targetY:s,sourceControlX:r,sourceControlY:f,targetControlX:d,targetControlY:g}){const p=n*.125+r*.375+d*.375+l*.125,h=i*.125+f*.375+g*.375+s*.125,b=Math.abs(p-n),x=Math.abs(h-i);return[p,h,b,x]}function rr(n,i){return n>=0?.5*n:i*25*Math.sqrt(-n)}function Nm({pos:n,x1:i,y1:l,x2:s,y2:r,c:f}){switch(n){case de.Left:return[i-rr(i-s,f),l];case de.Right:return[i+rr(s-i,f),l];case de.Top:return[i,l-rr(l-r,f)];case de.Bottom:return[i,l+rr(r-l,f)]}}function ad({sourceX:n,sourceY:i,sourcePosition:l=de.Bottom,targetX:s,targetY:r,targetPosition:f=de.Top,curvature:d=.25}){const[g,p]=Nm({pos:l,x1:n,y1:i,x2:s,y2:r,c:d}),[h,b]=Nm({pos:f,x1:s,y1:r,x2:n,y2:i,c:d}),[x,m,S,w]=C0({sourceX:n,sourceY:i,targetX:s,targetY:r,sourceControlX:g,sourceControlY:p,targetControlX:h,targetControlY:b});return[`M${n},${i} C${g},${p} ${h},${b} ${s},${r}`,x,m,S,w]}function M0({sourceX:n,sourceY:i,targetX:l,targetY:s}){const r=Math.abs(l-n)/2,f=l<n?l+r:l-r,d=Math.abs(s-i)/2,g=s<i?s+d:s-d;return[f,g,r,d]}function BE({sourceNode:n,targetNode:i,selected:l=!1,zIndex:s=0,elevateOnSelect:r=!1,zIndexMode:f="basic"}){if(f==="manual")return s;const d=r&&l?s+1e3:s,g=Math.max(n.parentId||r&&n.selected?n.internals.z:0,i.parentId||r&&i.selected?i.internals.z:0);return d+g}function IE({sourceNode:n,targetNode:i,width:l,height:s,transform:r}){const f=Ur(Cr(n),Cr(i));f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const d={x:-r[0]/r[2],y:-r[1]/r[2],width:l/r[2],height:s/r[2]};return bl(d,Lr(f))>0}const qE=({source:n,sourceHandle:i,target:l,targetHandle:s})=>`xy-edge__${n}${i||""}-${l}${s||""}`,YE=(n,i)=>i.some(l=>l.source===n.source&&l.target===n.target&&(l.sourceHandle===n.sourceHandle||!l.sourceHandle&&!n.sourceHandle)&&(l.targetHandle===n.targetHandle||!l.targetHandle&&!n.targetHandle)),O0=(n,i,l={})=>{if(!n.source||!n.target)return i;const s=l.getEdgeId||qE;let r;return v0(n)?r={...n}:r={...n,id:s(n)},YE(r,i)?i:(r.sourceHandle===null&&delete r.sourceHandle,r.targetHandle===null&&delete r.targetHandle,i.concat(r))};function D0({sourceX:n,sourceY:i,targetX:l,targetY:s}){const[r,f,d,g]=M0({sourceX:n,sourceY:i,targetX:l,targetY:s});return[`M ${n},${i}L ${l},${s}`,r,f,d,g]}const Am={[de.Left]:{x:-1,y:0},[de.Right]:{x:1,y:0},[de.Top]:{x:0,y:-1},[de.Bottom]:{x:0,y:1}},VE=({source:n,sourcePosition:i=de.Bottom,target:l})=>i===de.Left||i===de.Right?n.x<l.x?{x:1,y:0}:{x:-1,y:0}:n.y<l.y?{x:0,y:1}:{x:0,y:-1},Tm=(n,i)=>Math.sqrt(Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2));function $E({source:n,sourcePosition:i=de.Bottom,target:l,targetPosition:s=de.Top,center:r,offset:f,stepPosition:d}){const g=Am[i],p=Am[s],h={x:n.x+g.x*f,y:n.y+g.y*f},b={x:l.x+p.x*f,y:l.y+p.y*f},x=VE({source:h,sourcePosition:i,target:b}),m=x.x!==0?"x":"y",S=x[m];let w=[],N,D;const j={x:0,y:0},H={x:0,y:0},[,,_,M]=M0({sourceX:n.x,sourceY:n.y,targetX:l.x,targetY:l.y});if(g[m]*p[m]===-1){m==="x"?(N=r.x??h.x+(b.x-h.x)*d,D=r.y??(h.y+b.y)/2):(N=r.x??(h.x+b.x)/2,D=r.y??h.y+(b.y-h.y)*d);const T=[{x:N,y:h.y},{x:N,y:b.y}],G=[{x:h.x,y:D},{x:b.x,y:D}];g[m]===S?w=m==="x"?T:G:w=m==="x"?G:T}else{const T=[{x:h.x,y:b.y}],G=[{x:b.x,y:h.y}];if(m==="x"?w=g.x===S?G:T:w=g.y===S?T:G,i===s){const $=Math.abs(n[m]-l[m]);if($<=f){const ie=Math.min(f-1,f-$);g[m]===S?j[m]=(h[m]>n[m]?-1:1)*ie:H[m]=(b[m]>l[m]?-1:1)*ie}}if(i!==s){const $=m==="x"?"y":"x",ie=g[m]===p[$],z=h[$]>b[$],X=h[$]<b[$];(g[m]===1&&(!ie&&z||ie&&X)||g[m]!==1&&(!ie&&X||ie&&z))&&(w=m==="x"?T:G)}const B={x:h.x+j.x,y:h.y+j.y},Y={x:b.x+H.x,y:b.y+H.y},se=Math.max(Math.abs(B.x-w[0].x),Math.abs(Y.x-w[0].x)),J=Math.max(Math.abs(B.y-w[0].y),Math.abs(Y.y-w[0].y));se>=J?(N=(B.x+Y.x)/2,D=w[0].y):(N=w[0].x,D=(B.y+Y.y)/2)}return[[n,{x:h.x+j.x,y:h.y+j.y},...w,{x:b.x+H.x,y:b.y+H.y},l],N,D,_,M]}function XE(n,i,l,s){const r=Math.min(Tm(n,i)/2,Tm(i,l)/2,s),{x:f,y:d}=i;if(n.x===f&&f===l.x||n.y===d&&d===l.y)return`L${f} ${d}`;if(n.y===d){const h=n.x<l.x?-1:1,b=n.y<l.y?1:-1;return`L ${f+r*h},${d}Q ${f},${d} ${f},${d+r*b}`}const g=n.x<l.x?1:-1,p=n.y<l.y?-1:1;return`L ${f},${d+r*p}Q ${f},${d} ${f+r*g},${d}`}function Lf({sourceX:n,sourceY:i,sourcePosition:l=de.Bottom,targetX:s,targetY:r,targetPosition:f=de.Top,borderRadius:d=5,centerX:g,centerY:p,offset:h=20,stepPosition:b=.5}){const[x,m,S,w,N]=$E({source:{x:n,y:i},sourcePosition:l,target:{x:s,y:r},targetPosition:f,center:{x:g,y:p},offset:h,stepPosition:b});return[x.reduce((j,H,_)=>{let M="";return _>0&&_<x.length-1?M=XE(x[_-1],H,x[_+1],d):M=`${_===0?"M":"L"}${H.x} ${H.y}`,j+=M,j},""),m,S,w,N]}function Cm(n){return n&&!!(n.internals.handleBounds||n.handles?.length)&&!!(n.measured.width||n.width||n.initialWidth)}function KE(n){const{sourceNode:i,targetNode:l}=n;if(!Cm(i)||!Cm(l))return null;const s=i.internals.handleBounds||Mm(i.handles),r=l.internals.handleBounds||Mm(l.handles),f=Om(s?.source??[],n.sourceHandle),d=Om(n.connectionMode===no.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),n.targetHandle);if(!f||!d)return n.onError?.("008",hn.error008(f?"target":"source",{id:n.id,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle})),null;const g=f?.position||de.Bottom,p=d?.position||de.Top,h=ii(i,f,g),b=ii(l,d,p);return{sourceX:h.x,sourceY:h.y,targetX:b.x,targetY:b.y,sourcePosition:g,targetPosition:p}}function Mm(n){if(!n)return null;const i=[],l=[];for(const s of n)s.width=s.width??1,s.height=s.height??1,s.type==="source"?i.push(s):s.type==="target"&&l.push(s);return{source:i,target:l}}function ii(n,i,l=de.Left,s=!1){const r=(i?.x??0)+n.internals.positionAbsolute.x,f=(i?.y??0)+n.internals.positionAbsolute.y,{width:d,height:g}=i??Yn(n);if(s)return{x:r+d/2,y:f+g/2};switch(i?.position??l){case de.Top:return{x:r+d/2,y:f};case de.Right:return{x:r+d,y:f+g/2};case de.Bottom:return{x:r+d/2,y:f+g};case de.Left:return{x:r,y:f+g/2}}}function Om(n,i){return n&&(i?n.find(l=>l.id===i):n[0])||null}function Bf(n,i){return n?typeof n=="string"?n:`${i?`${i}__`:""}${Object.keys(n).sort().map(s=>`${s}=${n[s]}`).join("&")}`:""}function ZE(n,{id:i,defaultColor:l,defaultMarkerStart:s,defaultMarkerEnd:r}){const f=new Set;return n.reduce((d,g)=>([g.markerStart||s,g.markerEnd||r].forEach(p=>{if(p&&typeof p=="object"){const h=Bf(p,i);f.has(h)||(d.push({id:h,color:p.color||l,...p}),f.add(h))}}),d),[]).sort((d,g)=>d.id.localeCompare(g.id))}const j0=1e3,QE=10,id={nodeOrigin:[0,0],nodeExtent:vl,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},JE={...id,checkEquality:!0};function od(n,i){const l={...n};for(const s in i)i[s]!==void 0&&(l[s]=i[s]);return l}function FE(n,i,l){const s=od(id,l);for(const r of n.values())if(r.parentId)sd(r,n,i,s);else{const f=Cl(r,s.nodeOrigin),d=oo(r.extent)?r.extent:s.nodeExtent,g=ai(f,d,Yn(r));r.internals.positionAbsolute=g}}function WE(n,i){if(!n.handles)return n.measured?i?.internals.handleBounds:void 0;const l=[],s=[];for(const r of n.handles){const f={id:r.id,width:r.width??1,height:r.height??1,nodeId:n.id,x:r.x,y:r.y,position:r.position,type:r.type};r.type==="source"?l.push(f):r.type==="target"&&s.push(f)}return{source:l,target:s}}function ld(n){return n==="manual"}function If(n,i,l,s={}){const r=od(JE,s),f={i:0},d=new Map(i),g=r?.elevateNodesOnSelect&&!ld(r.zIndexMode)?j0:0;let p=n.length>0;i.clear(),l.clear();for(const h of n){let b=d.get(h.id);if(r.checkEquality&&h===b?.internals.userNode)i.set(h.id,b);else{const x=Cl(h,r.nodeOrigin),m=oo(h.extent)?h.extent:r.nodeExtent,S=ai(x,m,Yn(h));b={...r.defaults,...h,measured:{width:h.measured?.width,height:h.measured?.height},internals:{positionAbsolute:S,handleBounds:WE(h,b),z:z0(h,g,r.zIndexMode),userNode:h}},i.set(h.id,b)}(b.measured===void 0||b.measured.width===void 0||b.measured.height===void 0)&&!b.hidden&&(p=!1),h.parentId&&sd(b,i,l,s,f)}return p}function PE(n,i){if(!n.parentId)return;const l=i.get(n.parentId);l?l.set(n.id,n):i.set(n.parentId,new Map([[n.id,n]]))}function sd(n,i,l,s,r){const{elevateNodesOnSelect:f,nodeOrigin:d,nodeExtent:g,zIndexMode:p}=od(id,s),h=n.parentId,b=i.get(h);if(!b){console.warn(`Parent node ${h} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}PE(n,l),r&&!b.parentId&&b.internals.rootParentIndex===void 0&&p==="auto"&&(b.internals.rootParentIndex=++r.i,b.internals.z=b.internals.z+r.i*QE),r&&b.internals.rootParentIndex!==void 0&&(r.i=b.internals.rootParentIndex);const x=f&&!ld(p)?j0:0,{x:m,y:S,z:w}=e_(n,b,d,g,x,p),{positionAbsolute:N}=n.internals,D=m!==N.x||S!==N.y;(D||w!==n.internals.z)&&i.set(n.id,{...n,internals:{...n.internals,positionAbsolute:D?{x:m,y:S}:N,z:w}})}function z0(n,i,l){const s=tn(n.zIndex)?n.zIndex:0;return ld(l)?s:s+(n.selected?i:0)}function e_(n,i,l,s,r,f){const{x:d,y:g}=i.internals.positionAbsolute,p=Yn(n),h=Cl(n,l),b=oo(n.extent)?ai(h,n.extent,p):h;let x=ai({x:d+b.x,y:g+b.y},s,p);n.extent==="parent"&&(x=b0(x,p,i));const m=z0(n,r,f),S=i.internals.z??0;return{x:x.x,y:x.y,z:S>=m?S+1:m}}function rd(n,i,l,s=[0,0]){const r=[],f=new Map;for(const d of n){const g=i.get(d.parentId);if(!g)continue;const p=f.get(d.parentId)?.expandedRect??io(g),h=w0(p,d.rect);f.set(d.parentId,{expandedRect:h,parent:g})}return f.size>0&&f.forEach(({expandedRect:d,parent:g},p)=>{const h=g.internals.positionAbsolute,b=Yn(g),x=g.origin??s,m=d.x<h.x?Math.round(Math.abs(h.x-d.x)):0,S=d.y<h.y?Math.round(Math.abs(h.y-d.y)):0,w=Math.max(b.width,Math.round(d.width)),N=Math.max(b.height,Math.round(d.height)),D=(w-b.width)*x[0],j=(N-b.height)*x[1];(m>0||S>0||D||j)&&(r.push({id:p,type:"position",position:{x:g.position.x-m+D,y:g.position.y-S+j}}),l.get(p)?.forEach(H=>{n.some(_=>_.id===H.id)||r.push({id:H.id,type:"position",position:{x:H.position.x+m,y:H.position.y+S}})})),(b.width<d.width||b.height<d.height||m||S)&&r.push({id:p,type:"dimensions",setAttributes:!0,dimensions:{width:w+(m?x[0]*m-D:0),height:N+(S?x[1]*S-j:0)}})}),r}function t_(n,i,l,s,r,f,d){const g=s?.querySelector(".xyflow__viewport");let p=!1;if(!g)return{changes:[],updatedInternals:p};const h=[],b=window.getComputedStyle(g),{m22:x}=new window.DOMMatrixReadOnly(b.transform),m=[];for(const S of n.values()){const w=i.get(S.id);if(!w)continue;if(w.hidden){i.set(w.id,{...w,internals:{...w.internals,handleBounds:void 0}}),p=!0;continue}const N=nd(S.nodeElement),D=w.measured.width!==N.width||w.measured.height!==N.height;if(!!(N.width&&N.height&&(D||!w.internals.handleBounds||S.force))){const H=S.nodeElement.getBoundingClientRect(),_=oo(w.extent)?w.extent:f;let{positionAbsolute:M}=w.internals;w.parentId&&w.extent==="parent"?M=b0(M,N,i.get(w.parentId)):_&&(M=ai(M,_,N));const A={...w,measured:N,internals:{...w.internals,positionAbsolute:M,handleBounds:{source:_m("source",S.nodeElement,H,x,w.id),target:_m("target",S.nodeElement,H,x,w.id)}}};i.set(w.id,A),w.parentId&&sd(A,i,l,{nodeOrigin:r,zIndexMode:d}),p=!0,D&&(h.push({id:w.id,type:"dimensions",dimensions:N}),w.expandParent&&w.parentId&&m.push({id:w.id,parentId:w.parentId,rect:io(A,r)}))}}if(m.length>0){const S=rd(m,i,l,r);h.push(...S)}return{changes:h,updatedInternals:p}}async function n_({delta:n,panZoom:i,transform:l,translateExtent:s,width:r,height:f}){if(!i||!n.x&&!n.y)return Promise.resolve(!1);const d=await i.setViewportConstrained({x:l[0]+n.x,y:l[1]+n.y,zoom:l[2]},[[0,0],[r,f]],s),g=!!d&&(d.x!==l[0]||d.y!==l[1]||d.k!==l[2]);return Promise.resolve(g)}function Dm(n,i,l,s,r,f){let d=r;const g=s.get(d)||new Map;s.set(d,g.set(l,i)),d=`${r}-${n}`;const p=s.get(d)||new Map;if(s.set(d,p.set(l,i)),f){d=`${r}-${n}-${f}`;const h=s.get(d)||new Map;s.set(d,h.set(l,i))}}function R0(n,i,l){n.clear(),i.clear();for(const s of l){const{source:r,target:f,sourceHandle:d=null,targetHandle:g=null}=s,p={edgeId:s.id,source:r,target:f,sourceHandle:d,targetHandle:g},h=`${r}-${d}--${f}-${g}`,b=`${f}-${g}--${r}-${d}`;Dm("source",p,b,n,r,d),Dm("target",p,h,n,f,g),i.set(s.id,s)}}function H0(n,i){if(!n.parentId)return!1;const l=i.get(n.parentId);return l?l.selected?!0:H0(l,i):!1}function jm(n,i,l){let s=n;do{if(s?.matches?.(i))return!0;if(s===l)return!1;s=s?.parentElement}while(s);return!1}function a_(n,i,l,s){const r=new Map;for(const[f,d]of n)if((d.selected||d.id===s)&&(!d.parentId||!H0(d,n))&&(d.draggable||i&&typeof d.draggable>"u")){const g=n.get(f);g&&r.set(f,{id:f,position:g.position||{x:0,y:0},distance:{x:l.x-g.internals.positionAbsolute.x,y:l.y-g.internals.positionAbsolute.y},extent:g.extent,parentId:g.parentId,origin:g.origin,expandParent:g.expandParent,internals:{positionAbsolute:g.internals.positionAbsolute||{x:0,y:0}},measured:{width:g.measured.width??0,height:g.measured.height??0}})}return r}function xf({nodeId:n,dragItems:i,nodeLookup:l,dragging:s=!0}){const r=[];for(const[d,g]of i){const p=l.get(d)?.internals.userNode;p&&r.push({...p,position:g.position,dragging:s})}if(!n)return[r[0],r];const f=l.get(n)?.internals.userNode;return[f?{...f,position:i.get(n)?.position||f.position,dragging:s}:r[0],r]}function i_({dragItems:n,snapGrid:i,x:l,y:s}){const r=n.values().next().value;if(!r)return null;const f={x:l-r.distance.x,y:s-r.distance.y},d=Ol(f,i);return{x:d.x-f.x,y:d.y-f.y}}function o_({onNodeMouseDown:n,getStoreItems:i,onDragStart:l,onDrag:s,onDragStop:r}){let f={x:null,y:null},d=0,g=new Map,p=!1,h={x:0,y:0},b=null,x=!1,m=null,S=!1,w=!1,N=null;function D({noDragClassName:H,handleSelector:_,domNode:M,isSelectable:A,nodeId:T,nodeClickDistance:G=0}){m=kt(M);function B({x:$,y:ie}){const{nodeLookup:z,nodeExtent:X,snapGrid:C,snapToGrid:k,nodeOrigin:I,onNodeDrag:K,onSelectionDrag:te,onError:O,updateNodePositions:U}=i();f={x:$,y:ie};let ee=!1;const q=g.size>1,le=q&&X?Uf(Ml(g)):null,ue=q&&k?i_({dragItems:g,snapGrid:C,x:$,y:ie}):null;for(const[ce,re]of g){if(!z.has(ce))continue;let fe={x:$-re.distance.x,y:ie-re.distance.y};k&&(fe=ue?{x:Math.round(fe.x+ue.x),y:Math.round(fe.y+ue.y)}:Ol(fe,C));let we=null;if(q&&X&&!re.extent&&le){const{positionAbsolute:ve}=re.internals,Ae=ve.x-le.x+X[0][0],ke=ve.x+re.measured.width-le.x2+X[1][0],Re=ve.y-le.y+X[0][1],ot=ve.y+re.measured.height-le.y2+X[1][1];we=[[Ae,Re],[ke,ot]]}const{position:be,positionAbsolute:me}=x0({nodeId:ce,nextPosition:fe,nodeLookup:z,nodeExtent:we||X,nodeOrigin:I,onError:O});ee=ee||re.position.x!==be.x||re.position.y!==be.y,re.position=be,re.internals.positionAbsolute=me}if(w=w||ee,!!ee&&(U(g,!0),N&&(s||K||!T&&te))){const[ce,re]=xf({nodeId:T,dragItems:g,nodeLookup:z});s?.(N,g,ce,re),K?.(N,ce,re),T||te?.(N,re)}}async function Y(){if(!b)return;const{transform:$,panBy:ie,autoPanSpeed:z,autoPanOnNodeDrag:X}=i();if(!X){p=!1,cancelAnimationFrame(d);return}const[C,k]=S0(h,b,z);(C!==0||k!==0)&&(f.x=(f.x??0)-C/$[2],f.y=(f.y??0)-k/$[2],await ie({x:C,y:k})&&B(f)),d=requestAnimationFrame(Y)}function se($){const{nodeLookup:ie,multiSelectionActive:z,nodesDraggable:X,transform:C,snapGrid:k,snapToGrid:I,selectNodesOnDrag:K,onNodeDragStart:te,onSelectionDragStart:O,unselectNodesAndEdges:U}=i();x=!0,(!K||!A)&&!z&&T&&(ie.get(T)?.selected||U()),A&&K&&T&&n?.(T);const ee=fl($.sourceEvent,{transform:C,snapGrid:k,snapToGrid:I,containerBounds:b});if(f=ee,g=a_(ie,X,ee,T),g.size>0&&(l||te||!T&&O)){const[q,le]=xf({nodeId:T,dragItems:g,nodeLookup:ie});l?.($.sourceEvent,g,q,le),te?.($.sourceEvent,q,le),T||O?.($.sourceEvent,le)}}const J=Wy().clickDistance(G).on("start",$=>{const{domNode:ie,nodeDragThreshold:z,transform:X,snapGrid:C,snapToGrid:k}=i();b=ie?.getBoundingClientRect()||null,S=!1,w=!1,N=$.sourceEvent,z===0&&se($),f=fl($.sourceEvent,{transform:X,snapGrid:C,snapToGrid:k,containerBounds:b}),h=nn($.sourceEvent,b)}).on("drag",$=>{const{autoPanOnNodeDrag:ie,transform:z,snapGrid:X,snapToGrid:C,nodeDragThreshold:k,nodeLookup:I}=i(),K=fl($.sourceEvent,{transform:z,snapGrid:X,snapToGrid:C,containerBounds:b});if(N=$.sourceEvent,($.sourceEvent.type==="touchmove"&&$.sourceEvent.touches.length>1||T&&!I.has(T))&&(S=!0),!S){if(!p&&ie&&x&&(p=!0,Y()),!x){const te=nn($.sourceEvent,b),O=te.x-h.x,U=te.y-h.y;Math.sqrt(O*O+U*U)>k&&se($)}(f.x!==K.xSnapped||f.y!==K.ySnapped)&&g&&x&&(h=nn($.sourceEvent,b),B(K))}}).on("end",$=>{if(!(!x||S)&&(p=!1,x=!1,cancelAnimationFrame(d),g.size>0)){const{nodeLookup:ie,updateNodePositions:z,onNodeDragStop:X,onSelectionDragStop:C}=i();if(w&&(z(g,!1),w=!1),r||X||!T&&C){const[k,I]=xf({nodeId:T,dragItems:g,nodeLookup:ie,dragging:!1});r?.($.sourceEvent,g,k,I),X?.($.sourceEvent,k,I),T||C?.($.sourceEvent,I)}}}).filter($=>{const ie=$.target;return!$.button&&(!H||!jm(ie,`.${H}`,M))&&(!_||jm(ie,_,M))});m.call(J)}function j(){m?.on(".drag",null)}return{update:D,destroy:j}}function l_(n,i,l){const s=[],r={x:n.x-l,y:n.y-l,width:l*2,height:l*2};for(const f of i.values())bl(r,io(f))>0&&s.push(f);return s}const s_=250;function r_(n,i,l,s){let r=[],f=1/0;const d=l_(n,l,i+s_);for(const g of d){const p=[...g.internals.handleBounds?.source??[],...g.internals.handleBounds?.target??[]];for(const h of p){if(s.nodeId===h.nodeId&&s.type===h.type&&s.id===h.id)continue;const{x:b,y:x}=ii(g,h,h.position,!0),m=Math.sqrt(Math.pow(b-n.x,2)+Math.pow(x-n.y,2));m>i||(m<f?(r=[{...h,x:b,y:x}],f=m):m===f&&r.push({...h,x:b,y:x}))}}if(!r.length)return null;if(r.length>1){const g=s.type==="source"?"target":"source";return r.find(p=>p.type===g)??r[0]}return r[0]}function G0(n,i,l,s,r,f=!1){const d=s.get(n);if(!d)return null;const g=r==="strict"?d.internals.handleBounds?.[i]:[...d.internals.handleBounds?.source??[],...d.internals.handleBounds?.target??[]],p=(l?g?.find(h=>h.id===l):g?.[0])??null;return p&&f?{...p,...ii(d,p,p.position,!0)}:p}function k0(n,i){return n||(i?.classList.contains("target")?"target":i?.classList.contains("source")?"source":null)}function c_(n,i){let l=null;return i?l=!0:n&&!i&&(l=!1),l}const U0=()=>!0;function u_(n,{connectionMode:i,connectionRadius:l,handleId:s,nodeId:r,edgeUpdaterType:f,isTarget:d,domNode:g,nodeLookup:p,lib:h,autoPanOnConnect:b,flowId:x,panBy:m,cancelConnection:S,onConnectStart:w,onConnect:N,onConnectEnd:D,isValidConnection:j=U0,onReconnectEnd:H,updateConnection:_,getTransform:M,getFromHandle:A,autoPanSpeed:T,dragThreshold:G=1,handleDomNode:B}){const Y=N0(n.target);let se=0,J;const{x:$,y:ie}=nn(n),z=k0(f,B),X=g?.getBoundingClientRect();let C=!1;if(!X||!z)return;const k=G0(r,z,s,p,i);if(!k)return;let I=nn(n,X),K=!1,te=null,O=!1,U=null;function ee(){if(!b||!X)return;const[be,me]=S0(I,X,T);m({x:be,y:me}),se=requestAnimationFrame(ee)}const q={...k,nodeId:r,type:z,position:k.position},le=p.get(r);let ce={inProgress:!0,isValid:null,from:ii(le,q,de.Left,!0),fromHandle:q,fromPosition:q.position,fromNode:le,to:I,toHandle:null,toPosition:bm[q.position],toNode:null,pointer:I};function re(){C=!0,_(ce),w?.(n,{nodeId:r,handleId:s,handleType:z})}G===0&&re();function fe(be){if(!C){const{x:ot,y:Kt}=nn(be),Mt=ot-$,Zt=Kt-ie;if(!(Mt*Mt+Zt*Zt>G*G))return;re()}if(!A()||!q){we(be);return}const me=M();I=nn(be,X),J=r_(Dl(I,me,!1,[1,1]),l,p,q),K||(ee(),K=!0);const ve=L0(be,{handle:J,connectionMode:i,fromNodeId:r,fromHandleId:s,fromType:d?"target":"source",isValidConnection:j,doc:Y,lib:h,flowId:x,nodeLookup:p});U=ve.handleDomNode,te=ve.connection,O=c_(!!J,ve.isValid);const Ae=p.get(r),ke=Ae?ii(Ae,q,de.Left,!0):ce.from,Re={...ce,from:ke,isValid:O,to:ve.toHandle&&O?Mr({x:ve.toHandle.x,y:ve.toHandle.y},me):I,toHandle:ve.toHandle,toPosition:O&&ve.toHandle?ve.toHandle.position:bm[q.position],toNode:ve.toHandle?p.get(ve.toHandle.nodeId):null,pointer:I};_(Re),ce=Re}function we(be){if(!("touches"in be&&be.touches.length>0)){if(C){(J||U)&&te&&O&&N?.(te);const{inProgress:me,...ve}=ce,Ae={...ve,toPosition:ce.toHandle?ce.toPosition:null};D?.(be,Ae),f&&H?.(be,Ae)}S(),cancelAnimationFrame(se),K=!1,O=!1,te=null,U=null,Y.removeEventListener("mousemove",fe),Y.removeEventListener("mouseup",we),Y.removeEventListener("touchmove",fe),Y.removeEventListener("touchend",we)}}Y.addEventListener("mousemove",fe),Y.addEventListener("mouseup",we),Y.addEventListener("touchmove",fe),Y.addEventListener("touchend",we)}function L0(n,{handle:i,connectionMode:l,fromNodeId:s,fromHandleId:r,fromType:f,doc:d,lib:g,flowId:p,isValidConnection:h=U0,nodeLookup:b}){const x=f==="target",m=i?d.querySelector(`.${g}-flow__handle[data-id="${p}-${i?.nodeId}-${i?.id}-${i?.type}"]`):null,{x:S,y:w}=nn(n),N=d.elementFromPoint(S,w),D=N?.classList.contains(`${g}-flow__handle`)?N:m,j={handleDomNode:D,isValid:!1,connection:null,toHandle:null};if(D){const H=k0(void 0,D),_=D.getAttribute("data-nodeid"),M=D.getAttribute("data-handleid"),A=D.classList.contains("connectable"),T=D.classList.contains("connectableend");if(!_||!H)return j;const G={source:x?_:s,sourceHandle:x?M:r,target:x?s:_,targetHandle:x?r:M};j.connection=G;const Y=A&&T&&(l===no.Strict?x&&H==="source"||!x&&H==="target":_!==s||M!==r);j.isValid=Y&&h(G),j.toHandle=G0(_,H,M,b,l,!0)}return j}const qf={onPointerDown:u_,isValid:L0};function f_({domNode:n,panZoom:i,getTransform:l,getViewScale:s}){const r=kt(n);function f({translateExtent:g,width:p,height:h,zoomStep:b=1,pannable:x=!0,zoomable:m=!0,inversePan:S=!1}){const w=_=>{if(_.sourceEvent.type!=="wheel"||!i)return;const M=l(),A=_.sourceEvent.ctrlKey&&Sl()?10:1,T=-_.sourceEvent.deltaY*(_.sourceEvent.deltaMode===1?.05:_.sourceEvent.deltaMode?1:.002)*b,G=M[2]*Math.pow(2,T*A);i.scaleTo(G)};let N=[0,0];const D=_=>{(_.sourceEvent.type==="mousedown"||_.sourceEvent.type==="touchstart")&&(N=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY])},j=_=>{const M=l();if(_.sourceEvent.type!=="mousemove"&&_.sourceEvent.type!=="touchmove"||!i)return;const A=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY],T=[A[0]-N[0],A[1]-N[1]];N=A;const G=s()*Math.max(M[2],Math.log(M[2]))*(S?-1:1),B={x:M[0]-T[0]*G,y:M[1]-T[1]*G},Y=[[0,0],[p,h]];i.setViewportConstrained({x:B.x,y:B.y,zoom:M[2]},Y,g)},H=g0().on("start",D).on("zoom",x?j:null).on("zoom.wheel",m?w:null);r.call(H,{})}function d(){r.on("zoom",null)}return{update:f,destroy:d,pointer:Pt}}const Br=n=>({x:n.x,y:n.y,zoom:n.k}),bf=({x:n,y:i,zoom:l})=>kr.translate(n,i).scale(l),Ji=(n,i)=>n.target.closest(`.${i}`),B0=(n,i)=>i===2&&Array.isArray(n)&&n.includes(2),d_=n=>((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2,Sf=(n,i=0,l=d_,s=()=>{})=>{const r=typeof i=="number"&&i>0;return r||s(),r?n.transition().duration(i).ease(l).on("end",s):n},I0=n=>{const i=n.ctrlKey&&Sl()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*i};function g_({zoomPanValues:n,noWheelClassName:i,d3Selection:l,d3Zoom:s,panOnScrollMode:r,panOnScrollSpeed:f,zoomOnPinch:d,onPanZoomStart:g,onPanZoom:p,onPanZoomEnd:h}){return b=>{if(Ji(b,i))return b.ctrlKey&&b.preventDefault(),!1;b.preventDefault(),b.stopImmediatePropagation();const x=l.property("__zoom").k||1;if(b.ctrlKey&&d){const D=Pt(b),j=I0(b),H=x*Math.pow(2,j);s.scaleTo(l,H,D,b);return}const m=b.deltaMode===1?20:1;let S=r===Pa.Vertical?0:b.deltaX*m,w=r===Pa.Horizontal?0:b.deltaY*m;!Sl()&&b.shiftKey&&r!==Pa.Vertical&&(S=b.deltaY*m,w=0),s.translateBy(l,-(S/x)*f,-(w/x)*f,{internal:!0});const N=Br(l.property("__zoom"));clearTimeout(n.panScrollTimeout),n.isPanScrolling?(p?.(b,N),n.panScrollTimeout=setTimeout(()=>{h?.(b,N),n.isPanScrolling=!1},150)):(n.isPanScrolling=!0,g?.(b,N))}}function h_({noWheelClassName:n,preventScrolling:i,d3ZoomHandler:l}){return function(s,r){const f=s.type==="wheel",d=!i&&f&&!s.ctrlKey,g=Ji(s,n);if(s.ctrlKey&&f&&g&&s.preventDefault(),d||g)return null;s.preventDefault(),l.call(this,s,r)}}function p_({zoomPanValues:n,onDraggingChange:i,onPanZoomStart:l}){return s=>{if(s.sourceEvent?.internal)return;const r=Br(s.transform);n.mouseButton=s.sourceEvent?.button||0,n.isZoomingOrPanning=!0,n.prevViewport=r,s.sourceEvent?.type==="mousedown"&&i(!0),l&&l?.(s.sourceEvent,r)}}function m_({zoomPanValues:n,panOnDrag:i,onPaneContextMenu:l,onTransformChange:s,onPanZoom:r}){return f=>{n.usedRightMouseButton=!!(l&&B0(i,n.mouseButton??0)),f.sourceEvent?.sync||s([f.transform.x,f.transform.y,f.transform.k]),r&&!f.sourceEvent?.internal&&r?.(f.sourceEvent,Br(f.transform))}}function y_({zoomPanValues:n,panOnDrag:i,panOnScroll:l,onDraggingChange:s,onPanZoomEnd:r,onPaneContextMenu:f}){return d=>{if(!d.sourceEvent?.internal&&(n.isZoomingOrPanning=!1,f&&B0(i,n.mouseButton??0)&&!n.usedRightMouseButton&&d.sourceEvent&&f(d.sourceEvent),n.usedRightMouseButton=!1,s(!1),r)){const g=Br(d.transform);n.prevViewport=g,clearTimeout(n.timerId),n.timerId=setTimeout(()=>{r?.(d.sourceEvent,g)},l?150:0)}}}function v_({zoomActivationKeyPressed:n,zoomOnScroll:i,zoomOnPinch:l,panOnDrag:s,panOnScroll:r,zoomOnDoubleClick:f,userSelectionActive:d,noWheelClassName:g,noPanClassName:p,lib:h,connectionInProgress:b}){return x=>{const m=n||i,S=l&&x.ctrlKey,w=x.type==="wheel";if(x.button===1&&x.type==="mousedown"&&(Ji(x,`${h}-flow__node`)||Ji(x,`${h}-flow__edge`)))return!0;if(!s&&!m&&!r&&!f&&!l||d||b&&!w||Ji(x,g)&&w||Ji(x,p)&&(!w||r&&w&&!n)||!l&&x.ctrlKey&&w)return!1;if(!l&&x.type==="touchstart"&&x.touches?.length>1)return x.preventDefault(),!1;if(!m&&!r&&!S&&w||!s&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray(s)&&!s.includes(x.button)&&x.type==="mousedown")return!1;const N=Array.isArray(s)&&s.includes(x.button)||!x.button||x.button<=1;return(!x.ctrlKey||w)&&N}}function x_({domNode:n,minZoom:i,maxZoom:l,translateExtent:s,viewport:r,onPanZoom:f,onPanZoomStart:d,onPanZoomEnd:g,onDraggingChange:p}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},b=n.getBoundingClientRect(),x=g0().scaleExtent([i,l]).translateExtent(s),m=kt(n).call(x);H({x:r.x,y:r.y,zoom:ao(r.zoom,i,l)},[[0,0],[b.width,b.height]],s);const S=m.on("wheel.zoom"),w=m.on("dblclick.zoom");x.wheelDelta(I0);function N(J,$){return m?new Promise(ie=>{x?.interpolate($?.interpolate==="linear"?ul:gr).transform(Sf(m,$?.duration,$?.ease,()=>ie(!0)),J)}):Promise.resolve(!1)}function D({noWheelClassName:J,noPanClassName:$,onPaneContextMenu:ie,userSelectionActive:z,panOnScroll:X,panOnDrag:C,panOnScrollMode:k,panOnScrollSpeed:I,preventScrolling:K,zoomOnPinch:te,zoomOnScroll:O,zoomOnDoubleClick:U,zoomActivationKeyPressed:ee,lib:q,onTransformChange:le,connectionInProgress:ue,paneClickDistance:ce,selectionOnDrag:re}){z&&!h.isZoomingOrPanning&&j();const fe=X&&!ee&&!z;x.clickDistance(re?1/0:!tn(ce)||ce<0?0:ce);const we=fe?g_({zoomPanValues:h,noWheelClassName:J,d3Selection:m,d3Zoom:x,panOnScrollMode:k,panOnScrollSpeed:I,zoomOnPinch:te,onPanZoomStart:d,onPanZoom:f,onPanZoomEnd:g}):h_({noWheelClassName:J,preventScrolling:K,d3ZoomHandler:S});if(m.on("wheel.zoom",we,{passive:!1}),!z){const me=p_({zoomPanValues:h,onDraggingChange:p,onPanZoomStart:d});x.on("start",me);const ve=m_({zoomPanValues:h,panOnDrag:C,onPaneContextMenu:!!ie,onPanZoom:f,onTransformChange:le});x.on("zoom",ve);const Ae=y_({zoomPanValues:h,panOnDrag:C,panOnScroll:X,onPaneContextMenu:ie,onPanZoomEnd:g,onDraggingChange:p});x.on("end",Ae)}const be=v_({zoomActivationKeyPressed:ee,panOnDrag:C,zoomOnScroll:O,panOnScroll:X,zoomOnDoubleClick:U,zoomOnPinch:te,userSelectionActive:z,noPanClassName:$,noWheelClassName:J,lib:q,connectionInProgress:ue});x.filter(be),U?m.on("dblclick.zoom",w):m.on("dblclick.zoom",null)}function j(){x.on("zoom",null)}async function H(J,$,ie){const z=bf(J),X=x?.constrain()(z,$,ie);return X&&await N(X),new Promise(C=>C(X))}async function _(J,$){const ie=bf(J);return await N(ie,$),new Promise(z=>z(ie))}function M(J){if(m){const $=bf(J),ie=m.property("__zoom");(ie.k!==J.zoom||ie.x!==J.x||ie.y!==J.y)&&x?.transform(m,$,null,{sync:!0})}}function A(){const J=m?d0(m.node()):{x:0,y:0,k:1};return{x:J.x,y:J.y,zoom:J.k}}function T(J,$){return m?new Promise(ie=>{x?.interpolate($?.interpolate==="linear"?ul:gr).scaleTo(Sf(m,$?.duration,$?.ease,()=>ie(!0)),J)}):Promise.resolve(!1)}function G(J,$){return m?new Promise(ie=>{x?.interpolate($?.interpolate==="linear"?ul:gr).scaleBy(Sf(m,$?.duration,$?.ease,()=>ie(!0)),J)}):Promise.resolve(!1)}function B(J){x?.scaleExtent(J)}function Y(J){x?.translateExtent(J)}function se(J){const $=!tn(J)||J<0?0:J;x?.clickDistance($)}return{update:D,destroy:j,setViewport:_,setViewportConstrained:H,getViewport:A,scaleTo:T,scaleBy:G,setScaleExtent:B,setTranslateExtent:Y,syncViewport:M,setClickDistance:se}}var lo;(function(n){n.Line="line",n.Handle="handle"})(lo||(lo={}));function b_({width:n,prevWidth:i,height:l,prevHeight:s,affectsX:r,affectsY:f}){const d=n-i,g=l-s,p=[d>0?1:d<0?-1:0,g>0?1:g<0?-1:0];return d&&r&&(p[0]=p[0]*-1),g&&f&&(p[1]=p[1]*-1),p}function zm(n){const i=n.includes("right")||n.includes("left"),l=n.includes("bottom")||n.includes("top"),s=n.includes("left"),r=n.includes("top");return{isHorizontal:i,isVertical:l,affectsX:s,affectsY:r}}function xa(n,i){return Math.max(0,i-n)}function ba(n,i){return Math.max(0,n-i)}function cr(n,i,l){return Math.max(0,i-n,n-l)}function Rm(n,i){return n?!i:i}function S_(n,i,l,s,r,f,d,g){let{affectsX:p,affectsY:h}=i;const{isHorizontal:b,isVertical:x}=i,m=b&&x,{xSnapped:S,ySnapped:w}=l,{minWidth:N,maxWidth:D,minHeight:j,maxHeight:H}=s,{x:_,y:M,width:A,height:T,aspectRatio:G}=n;let B=Math.floor(b?S-n.pointerX:0),Y=Math.floor(x?w-n.pointerY:0);const se=A+(p?-B:B),J=T+(h?-Y:Y),$=-f[0]*A,ie=-f[1]*T;let z=cr(se,N,D),X=cr(J,j,H);if(d){let I=0,K=0;p&&B<0?I=xa(_+B+$,d[0][0]):!p&&B>0&&(I=ba(_+se+$,d[1][0])),h&&Y<0?K=xa(M+Y+ie,d[0][1]):!h&&Y>0&&(K=ba(M+J+ie,d[1][1])),z=Math.max(z,I),X=Math.max(X,K)}if(g){let I=0,K=0;p&&B>0?I=ba(_+B,g[0][0]):!p&&B<0&&(I=xa(_+se,g[1][0])),h&&Y>0?K=ba(M+Y,g[0][1]):!h&&Y<0&&(K=xa(M+J,g[1][1])),z=Math.max(z,I),X=Math.max(X,K)}if(r){if(b){const I=cr(se/G,j,H)*G;if(z=Math.max(z,I),d){let K=0;!p&&!h||p&&!h&&m?K=ba(M+ie+se/G,d[1][1])*G:K=xa(M+ie+(p?B:-B)/G,d[0][1])*G,z=Math.max(z,K)}if(g){let K=0;!p&&!h||p&&!h&&m?K=xa(M+se/G,g[1][1])*G:K=ba(M+(p?B:-B)/G,g[0][1])*G,z=Math.max(z,K)}}if(x){const I=cr(J*G,N,D)/G;if(X=Math.max(X,I),d){let K=0;!p&&!h||h&&!p&&m?K=ba(_+J*G+$,d[1][0])/G:K=xa(_+(h?Y:-Y)*G+$,d[0][0])/G,X=Math.max(X,K)}if(g){let K=0;!p&&!h||h&&!p&&m?K=xa(_+J*G,g[1][0])/G:K=ba(_+(h?Y:-Y)*G,g[0][0])/G,X=Math.max(X,K)}}}Y=Y+(Y<0?X:-X),B=B+(B<0?z:-z),r&&(m?se>J*G?Y=(Rm(p,h)?-B:B)/G:B=(Rm(p,h)?-Y:Y)*G:b?(Y=B/G,h=p):(B=Y*G,p=h));const C=p?_+B:_,k=h?M+Y:M;return{width:A+(p?-B:B),height:T+(h?-Y:Y),x:f[0]*B*(p?-1:1)+C,y:f[1]*Y*(h?-1:1)+k}}const q0={width:0,height:0,x:0,y:0},w_={...q0,pointerX:0,pointerY:0,aspectRatio:1};function E_(n){return[[0,0],[n.measured.width,n.measured.height]]}function __(n,i,l){const s=i.position.x+n.position.x,r=i.position.y+n.position.y,f=n.measured.width??0,d=n.measured.height??0,g=l[0]*f,p=l[1]*d;return[[s-g,r-p],[s+f-g,r+d-p]]}function N_({domNode:n,nodeId:i,getStoreItems:l,onChange:s,onEnd:r}){const f=kt(n);let d={controlDirection:zm("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function g({controlPosition:h,boundaries:b,keepAspectRatio:x,resizeDirection:m,onResizeStart:S,onResize:w,onResizeEnd:N,shouldResize:D}){let j={...q0},H={...w_};d={boundaries:b,resizeDirection:m,keepAspectRatio:x,controlDirection:zm(h)};let _,M=null,A=[],T,G,B,Y=!1;const se=Wy().on("start",J=>{const{nodeLookup:$,transform:ie,snapGrid:z,snapToGrid:X,nodeOrigin:C,paneDomNode:k}=l();if(_=$.get(i),!_)return;M=k?.getBoundingClientRect()??null;const{xSnapped:I,ySnapped:K}=fl(J.sourceEvent,{transform:ie,snapGrid:z,snapToGrid:X,containerBounds:M});j={width:_.measured.width??0,height:_.measured.height??0,x:_.position.x??0,y:_.position.y??0},H={...j,pointerX:I,pointerY:K,aspectRatio:j.width/j.height},T=void 0,_.parentId&&(_.extent==="parent"||_.expandParent)&&(T=$.get(_.parentId),G=T&&_.extent==="parent"?E_(T):void 0),A=[],B=void 0;for(const[te,O]of $)if(O.parentId===i&&(A.push({id:te,position:{...O.position},extent:O.extent}),O.extent==="parent"||O.expandParent)){const U=__(O,_,O.origin??C);B?B=[[Math.min(U[0][0],B[0][0]),Math.min(U[0][1],B[0][1])],[Math.max(U[1][0],B[1][0]),Math.max(U[1][1],B[1][1])]]:B=U}S?.(J,{...j})}).on("drag",J=>{const{transform:$,snapGrid:ie,snapToGrid:z,nodeOrigin:X}=l(),C=fl(J.sourceEvent,{transform:$,snapGrid:ie,snapToGrid:z,containerBounds:M}),k=[];if(!_)return;const{x:I,y:K,width:te,height:O}=j,U={},ee=_.origin??X,{width:q,height:le,x:ue,y:ce}=S_(H,d.controlDirection,C,d.boundaries,d.keepAspectRatio,ee,G,B),re=q!==te,fe=le!==O,we=ue!==I&&re,be=ce!==K&&fe;if(!we&&!be&&!re&&!fe)return;if((we||be||ee[0]===1||ee[1]===1)&&(U.x=we?ue:j.x,U.y=be?ce:j.y,j.x=U.x,j.y=U.y,A.length>0)){const ke=ue-I,Re=ce-K;for(const ot of A)ot.position={x:ot.position.x-ke+ee[0]*(q-te),y:ot.position.y-Re+ee[1]*(le-O)},k.push(ot)}if((re||fe)&&(U.width=re&&(!d.resizeDirection||d.resizeDirection==="horizontal")?q:j.width,U.height=fe&&(!d.resizeDirection||d.resizeDirection==="vertical")?le:j.height,j.width=U.width,j.height=U.height),T&&_.expandParent){const ke=ee[0]*(U.width??0);U.x&&U.x<ke&&(j.x=ke,H.x=H.x-(U.x-ke));const Re=ee[1]*(U.height??0);U.y&&U.y<Re&&(j.y=Re,H.y=H.y-(U.y-Re))}const me=b_({width:j.width,prevWidth:te,height:j.height,prevHeight:O,affectsX:d.controlDirection.affectsX,affectsY:d.controlDirection.affectsY}),ve={...j,direction:me};D?.(J,ve)!==!1&&(Y=!0,w?.(J,ve),s(U,k))}).on("end",J=>{Y&&(N?.(J,{...j}),r?.({...j}),Y=!1)});f.call(se)}function p(){f.on(".drag",null)}return{update:g,destroy:p}}var wf={exports:{}},Ef={},_f={exports:{}},Nf={};var Hm;function A_(){if(Hm)return Nf;Hm=1;var n=Nl();function i(x,m){return x===m&&(x!==0||1/x===1/m)||x!==x&&m!==m}var l=typeof Object.is=="function"?Object.is:i,s=n.useState,r=n.useEffect,f=n.useLayoutEffect,d=n.useDebugValue;function g(x,m){var S=m(),w=s({inst:{value:S,getSnapshot:m}}),N=w[0].inst,D=w[1];return f(function(){N.value=S,N.getSnapshot=m,p(N)&&D({inst:N})},[x,S,m]),r(function(){return p(N)&&D({inst:N}),x(function(){p(N)&&D({inst:N})})},[x]),d(S),S}function p(x){var m=x.getSnapshot;x=x.value;try{var S=m();return!l(x,S)}catch{return!0}}function h(x,m){return m()}var b=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:g;return Nf.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:b,Nf}var Gm;function T_(){return Gm||(Gm=1,_f.exports=A_()),_f.exports}var km;function C_(){if(km)return Ef;km=1;var n=Nl(),i=T_();function l(h,b){return h===b&&(h!==0||1/h===1/b)||h!==h&&b!==b}var s=typeof Object.is=="function"?Object.is:l,r=i.useSyncExternalStore,f=n.useRef,d=n.useEffect,g=n.useMemo,p=n.useDebugValue;return Ef.useSyncExternalStoreWithSelector=function(h,b,x,m,S){var w=f(null);if(w.current===null){var N={hasValue:!1,value:null};w.current=N}else N=w.current;w=g(function(){function j(T){if(!H){if(H=!0,_=T,T=m(T),S!==void 0&&N.hasValue){var G=N.value;if(S(G,T))return M=G}return M=T}if(G=M,s(_,T))return G;var B=m(T);return S!==void 0&&S(G,B)?(_=T,G):(_=T,M=B)}var H=!1,_,M,A=x===void 0?null:x;return[function(){return j(b())},A===null?void 0:function(){return j(A())}]},[b,x,m,S]);var D=r(h,w[0],w[1]);return d(function(){N.hasValue=!0,N.value=D},[D]),p(D),D},Ef}var Um;function M_(){return Um||(Um=1,wf.exports=C_()),wf.exports}var O_=M_();const D_=Gy(O_),j_={},Lm=n=>{let i;const l=new Set,s=(b,x)=>{const m=typeof b=="function"?b(i):b;if(!Object.is(m,i)){const S=i;i=x??(typeof m!="object"||m===null)?m:Object.assign({},i,m),l.forEach(w=>w(i,S))}},r=()=>i,p={setState:s,getState:r,getInitialState:()=>h,subscribe:b=>(l.add(b),()=>l.delete(b)),destroy:()=>{(j_?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),l.clear()}},h=i=n(s,r,p);return p},z_=n=>n?Lm(n):Lm,{useDebugValue:R_}=sl,{useSyncExternalStoreWithSelector:H_}=D_,G_=n=>n;function Y0(n,i=G_,l){const s=H_(n.subscribe,n.getState,n.getServerState||n.getInitialState,i,l);return R_(s),s}const Bm=(n,i)=>{const l=z_(n),s=(r,f=i)=>Y0(l,r,f);return Object.assign(s,l),s},k_=(n,i)=>n?Bm(n,i):Bm;function $e(n,i){if(Object.is(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;if(n instanceof Map&&i instanceof Map){if(n.size!==i.size)return!1;for(const[s,r]of n)if(!Object.is(r,i.get(s)))return!1;return!0}if(n instanceof Set&&i instanceof Set){if(n.size!==i.size)return!1;for(const s of n)if(!i.has(s))return!1;return!0}const l=Object.keys(n);if(l.length!==Object.keys(i).length)return!1;for(const s of l)if(!Object.prototype.hasOwnProperty.call(i,s)||!Object.is(n[s],i[s]))return!1;return!0}var U_=ky();const Ir=W.createContext(null),L_=Ir.Provider,V0=hn.error001();function Oe(n,i){const l=W.useContext(Ir);if(l===null)throw new Error(V0);return Y0(l,n,i)}function Xe(){const n=W.useContext(Ir);if(n===null)throw new Error(V0);return W.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe}),[n])}const Im={display:"none"},B_={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},$0="react-flow__node-desc",X0="react-flow__edge-desc",I_="react-flow__aria-live",q_=n=>n.ariaLiveMessage,Y_=n=>n.ariaLabelConfig;function V_({rfId:n}){const i=Oe(q_);return y.jsx("div",{id:`${I_}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:B_,children:i})}function $_({rfId:n,disableKeyboardA11y:i}){const l=Oe(Y_);return y.jsxs(y.Fragment,{children:[y.jsx("div",{id:`${$0}-${n}`,style:Im,children:i?l["node.a11yDescription.default"]:l["node.a11yDescription.keyboardDisabled"]}),y.jsx("div",{id:`${X0}-${n}`,style:Im,children:l["edge.a11yDescription.default"]}),!i&&y.jsx(V_,{rfId:n})]})}const qr=W.forwardRef(({position:n="top-left",children:i,className:l,style:s,...r},f)=>{const d=`${n}`.split("-");return y.jsx("div",{className:nt(["react-flow__panel",l,...d]),style:s,ref:f,...r,children:i})});qr.displayName="Panel";function X_({proOptions:n,position:i="bottom-right"}){return n?.hideAttribution?null:y.jsx(qr,{position:i,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:y.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const K_=n=>{const i=[],l=[];for(const[,s]of n.nodeLookup)s.selected&&i.push(s.internals.userNode);for(const[,s]of n.edgeLookup)s.selected&&l.push(s);return{selectedNodes:i,selectedEdges:l}},ur=n=>n.id;function Z_(n,i){return $e(n.selectedNodes.map(ur),i.selectedNodes.map(ur))&&$e(n.selectedEdges.map(ur),i.selectedEdges.map(ur))}function Q_({onSelectionChange:n}){const i=Xe(),{selectedNodes:l,selectedEdges:s}=Oe(K_,Z_);return W.useEffect(()=>{const r={nodes:l,edges:s};n?.(r),i.getState().onSelectionChangeHandlers.forEach(f=>f(r))},[l,s,n]),null}const J_=n=>!!n.onSelectionChangeHandlers;function F_({onSelectionChange:n}){const i=Oe(J_);return n||i?y.jsx(Q_,{onSelectionChange:n}):null}const K0=[0,0],W_={x:0,y:0,zoom:1},P_=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],qm=[...P_,"rfId"],eN=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges}),Ym={translateExtent:vl,nodeOrigin:K0,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function tN(n){const{setNodes:i,setEdges:l,setMinZoom:s,setMaxZoom:r,setTranslateExtent:f,setNodeExtent:d,reset:g,setDefaultNodesAndEdges:p}=Oe(eN,$e),h=Xe();W.useEffect(()=>(p(n.defaultNodes,n.defaultEdges),()=>{b.current=Ym,g()}),[]);const b=W.useRef(Ym);return W.useEffect(()=>{for(const x of qm){const m=n[x],S=b.current[x];m!==S&&(typeof n[x]>"u"||(x==="nodes"?i(m):x==="edges"?l(m):x==="minZoom"?s(m):x==="maxZoom"?r(m):x==="translateExtent"?f(m):x==="nodeExtent"?d(m):x==="ariaLabelConfig"?h.setState({ariaLabelConfig:UE(m)}):x==="fitView"?h.setState({fitViewQueued:m}):x==="fitViewOptions"?h.setState({fitViewOptions:m}):h.setState({[x]:m})))}b.current=n},qm.map(x=>n[x])),null}function Vm(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function nN(n){const[i,l]=W.useState(n==="system"?null:n);return W.useEffect(()=>{if(n!=="system"){l(n);return}const s=Vm(),r=()=>l(s?.matches?"dark":"light");return r(),s?.addEventListener("change",r),()=>{s?.removeEventListener("change",r)}},[n]),i!==null?i:Vm()?.matches?"dark":"light"}const $m=typeof document<"u"?document:null;function wl(n=null,i={target:$m,actInsideInputWithModifier:!0}){const[l,s]=W.useState(!1),r=W.useRef(!1),f=W.useRef(new Set([])),[d,g]=W.useMemo(()=>{if(n!==null){const h=(Array.isArray(n)?n:[n]).filter(x=>typeof x=="string").map(x=>x.replace("+",`
`).replace(`

`,`
+`).split(`
`)),b=h.reduce((x,m)=>x.concat(...m),[]);return[h,b]}return[[],[]]},[n]);return W.useEffect(()=>{const p=i?.target??$m,h=i?.actInsideInputWithModifier??!0;if(n!==null){const b=S=>{if(r.current=S.ctrlKey||S.metaKey||S.shiftKey||S.altKey,(!r.current||r.current&&!h)&&A0(S))return!1;const N=Km(S.code,g);if(f.current.add(S[N]),Xm(d,f.current,!1)){const D=S.composedPath?.()?.[0]||S.target,j=D?.nodeName==="BUTTON"||D?.nodeName==="A";i.preventDefault!==!1&&(r.current||!j)&&S.preventDefault(),s(!0)}},x=S=>{const w=Km(S.code,g);Xm(d,f.current,!0)?(s(!1),f.current.clear()):f.current.delete(S[w]),S.key==="Meta"&&f.current.clear(),r.current=!1},m=()=>{f.current.clear(),s(!1)};return p?.addEventListener("keydown",b),p?.addEventListener("keyup",x),window.addEventListener("blur",m),window.addEventListener("contextmenu",m),()=>{p?.removeEventListener("keydown",b),p?.removeEventListener("keyup",x),window.removeEventListener("blur",m),window.removeEventListener("contextmenu",m)}}},[n,s]),l}function Xm(n,i,l){return n.filter(s=>l||s.length===i.size).some(s=>s.every(r=>i.has(r)))}function Km(n,i){return i.includes(n)?"code":"key"}const aN=()=>{const n=Xe();return W.useMemo(()=>({zoomIn:i=>{const{panZoom:l}=n.getState();return l?l.scaleBy(1.2,{duration:i?.duration}):Promise.resolve(!1)},zoomOut:i=>{const{panZoom:l}=n.getState();return l?l.scaleBy(1/1.2,{duration:i?.duration}):Promise.resolve(!1)},zoomTo:(i,l)=>{const{panZoom:s}=n.getState();return s?s.scaleTo(i,{duration:l?.duration}):Promise.resolve(!1)},getZoom:()=>n.getState().transform[2],setViewport:async(i,l)=>{const{transform:[s,r,f],panZoom:d}=n.getState();return d?(await d.setViewport({x:i.x??s,y:i.y??r,zoom:i.zoom??f},l),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[i,l,s]=n.getState().transform;return{x:i,y:l,zoom:s}},setCenter:async(i,l,s)=>n.getState().setCenter(i,l,s),fitBounds:async(i,l)=>{const{width:s,height:r,minZoom:f,maxZoom:d,panZoom:g}=n.getState(),p=td(i,s,r,f,d,l?.padding??.1);return g?(await g.setViewport(p,{duration:l?.duration,ease:l?.ease,interpolate:l?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(i,l={})=>{const{transform:s,snapGrid:r,snapToGrid:f,domNode:d}=n.getState();if(!d)return i;const{x:g,y:p}=d.getBoundingClientRect(),h={x:i.x-g,y:i.y-p},b=l.snapGrid??r,x=l.snapToGrid??f;return Dl(h,s,x,b)},flowToScreenPosition:i=>{const{transform:l,domNode:s}=n.getState();if(!s)return i;const{x:r,y:f}=s.getBoundingClientRect(),d=Mr(i,l);return{x:d.x+r,y:d.y+f}}}),[])};function Z0(n,i){const l=[],s=new Map,r=[];for(const f of n)if(f.type==="add"){r.push(f);continue}else if(f.type==="remove"||f.type==="replace")s.set(f.id,[f]);else{const d=s.get(f.id);d?d.push(f):s.set(f.id,[f])}for(const f of i){const d=s.get(f.id);if(!d){l.push(f);continue}if(d[0].type==="remove")continue;if(d[0].type==="replace"){l.push({...d[0].item});continue}const g={...f};for(const p of d)iN(p,g);l.push(g)}return r.length&&r.forEach(f=>{f.index!==void 0?l.splice(f.index,0,{...f.item}):l.push({...f.item})}),l}function iN(n,i){switch(n.type){case"select":{i.selected=n.selected;break}case"position":{typeof n.position<"u"&&(i.position=n.position),typeof n.dragging<"u"&&(i.dragging=n.dragging);break}case"dimensions":{typeof n.dimensions<"u"&&(i.measured={...n.dimensions},n.setAttributes&&((n.setAttributes===!0||n.setAttributes==="width")&&(i.width=n.dimensions.width),(n.setAttributes===!0||n.setAttributes==="height")&&(i.height=n.dimensions.height))),typeof n.resizing=="boolean"&&(i.resizing=n.resizing);break}}}function Q0(n,i){return Z0(n,i)}function J0(n,i){return Z0(n,i)}function Ja(n,i){return{id:n,type:"select",selected:i}}function Fi(n,i=new Set,l=!1){const s=[];for(const[r,f]of n){const d=i.has(r);!(f.selected===void 0&&!d)&&f.selected!==d&&(l&&(f.selected=d),s.push(Ja(f.id,d)))}return s}function Zm({items:n=[],lookup:i}){const l=[],s=new Map(n.map(r=>[r.id,r]));for(const[r,f]of n.entries()){const d=i.get(f.id),g=d?.internals?.userNode??d;g!==void 0&&g!==f&&l.push({id:f.id,item:f,type:"replace"}),g===void 0&&l.push({item:f,type:"add",index:r})}for(const[r]of i)s.get(r)===void 0&&l.push({id:r,type:"remove"});return l}function Qm(n){return{id:n.id,type:"remove"}}const Jm=n=>CE(n),oN=n=>v0(n);function F0(n){return W.forwardRef(n)}const lN=typeof window<"u"?W.useLayoutEffect:W.useEffect;function Fm(n){const[i,l]=W.useState(BigInt(0)),[s]=W.useState(()=>sN(()=>l(r=>r+BigInt(1))));return lN(()=>{const r=s.get();r.length&&(n(r),s.reset())},[i]),s}function sN(n){let i=[];return{get:()=>i,reset:()=>{i=[]},push:l=>{i.push(l),n()}}}const W0=W.createContext(null);function rN({children:n}){const i=Xe(),l=W.useCallback(g=>{const{nodes:p=[],setNodes:h,hasDefaultNodes:b,onNodesChange:x,nodeLookup:m,fitViewQueued:S,onNodesChangeMiddlewareMap:w}=i.getState();let N=p;for(const j of g)N=typeof j=="function"?j(N):j;let D=Zm({items:N,lookup:m});for(const j of w.values())D=j(D);b&&h(N),D.length>0?x?.(D):S&&window.requestAnimationFrame(()=>{const{fitViewQueued:j,nodes:H,setNodes:_}=i.getState();j&&_(H)})},[]),s=Fm(l),r=W.useCallback(g=>{const{edges:p=[],setEdges:h,hasDefaultEdges:b,onEdgesChange:x,edgeLookup:m}=i.getState();let S=p;for(const w of g)S=typeof w=="function"?w(S):w;b?h(S):x&&x(Zm({items:S,lookup:m}))},[]),f=Fm(r),d=W.useMemo(()=>({nodeQueue:s,edgeQueue:f}),[]);return y.jsx(W0.Provider,{value:d,children:n})}function cN(){const n=W.useContext(W0);if(!n)throw new Error("useBatchContext must be used within a BatchProvider");return n}const uN=n=>!!n.panZoom;function Yr(){const n=aN(),i=Xe(),l=cN(),s=Oe(uN),r=W.useMemo(()=>{const f=x=>i.getState().nodeLookup.get(x),d=x=>{l.nodeQueue.push(x)},g=x=>{l.edgeQueue.push(x)},p=x=>{const{nodeLookup:m,nodeOrigin:S}=i.getState(),w=Jm(x)?x:m.get(x.id),N=w.parentId?_0(w.position,w.measured,w.parentId,m,S):w.position,D={...w,position:N,width:w.measured?.width??w.width,height:w.measured?.height??w.height};return io(D)},h=(x,m,S={replace:!1})=>{d(w=>w.map(N=>{if(N.id===x){const D=typeof m=="function"?m(N):m;return S.replace&&Jm(D)?D:{...N,...D}}return N}))},b=(x,m,S={replace:!1})=>{g(w=>w.map(N=>{if(N.id===x){const D=typeof m=="function"?m(N):m;return S.replace&&oN(D)?D:{...N,...D}}return N}))};return{getNodes:()=>i.getState().nodes.map(x=>({...x})),getNode:x=>f(x)?.internals.userNode,getInternalNode:f,getEdges:()=>{const{edges:x=[]}=i.getState();return x.map(m=>({...m}))},getEdge:x=>i.getState().edgeLookup.get(x),setNodes:d,setEdges:g,addNodes:x=>{const m=Array.isArray(x)?x:[x];l.nodeQueue.push(S=>[...S,...m])},addEdges:x=>{const m=Array.isArray(x)?x:[x];l.edgeQueue.push(S=>[...S,...m])},toObject:()=>{const{nodes:x=[],edges:m=[],transform:S}=i.getState(),[w,N,D]=S;return{nodes:x.map(j=>({...j})),edges:m.map(j=>({...j})),viewport:{x:w,y:N,zoom:D}}},deleteElements:async({nodes:x=[],edges:m=[]})=>{const{nodes:S,edges:w,onNodesDelete:N,onEdgesDelete:D,triggerNodeChanges:j,triggerEdgeChanges:H,onDelete:_,onBeforeDelete:M}=i.getState(),{nodes:A,edges:T}=await zE({nodesToRemove:x,edgesToRemove:m,nodes:S,edges:w,onBeforeDelete:M}),G=T.length>0,B=A.length>0;if(G){const Y=T.map(Qm);D?.(T),H(Y)}if(B){const Y=A.map(Qm);N?.(A),j(Y)}return(B||G)&&_?.({nodes:A,edges:T}),{deletedNodes:A,deletedEdges:T}},getIntersectingNodes:(x,m=!0,S)=>{const w=wm(x),N=w?x:p(x),D=S!==void 0;return N?(S||i.getState().nodes).filter(j=>{const H=i.getState().nodeLookup.get(j.id);if(H&&!w&&(j.id===x.id||!H.internals.positionAbsolute))return!1;const _=io(D?j:H),M=bl(_,N);return m&&M>0||M>=_.width*_.height||M>=N.width*N.height}):[]},isNodeIntersecting:(x,m,S=!0)=>{const N=wm(x)?x:p(x);if(!N)return!1;const D=bl(N,m);return S&&D>0||D>=m.width*m.height||D>=N.width*N.height},updateNode:h,updateNodeData:(x,m,S={replace:!1})=>{h(x,w=>{const N=typeof m=="function"?m(w):m;return S.replace?{...w,data:N}:{...w,data:{...w.data,...N}}},S)},updateEdge:b,updateEdgeData:(x,m,S={replace:!1})=>{b(x,w=>{const N=typeof m=="function"?m(w):m;return S.replace?{...w,data:N}:{...w,data:{...w.data,...N}}},S)},getNodesBounds:x=>{const{nodeLookup:m,nodeOrigin:S}=i.getState();return ME(x,{nodeLookup:m,nodeOrigin:S})},getHandleConnections:({type:x,id:m,nodeId:S})=>Array.from(i.getState().connectionLookup.get(`${S}-${x}${m?`-${m}`:""}`)?.values()??[]),getNodeConnections:({type:x,handleId:m,nodeId:S})=>Array.from(i.getState().connectionLookup.get(`${S}${x?m?`-${x}-${m}`:`-${x}`:""}`)?.values()??[]),fitView:async x=>{const m=i.getState().fitViewResolver??kE();return i.setState({fitViewQueued:!0,fitViewOptions:x,fitViewResolver:m}),l.nodeQueue.push(S=>[...S]),m.promise}}},[]);return W.useMemo(()=>({...r,...n,viewportInitialized:s}),[s])}const Wm=n=>n.selected,fN=typeof window<"u"?window:void 0;function dN({deleteKeyCode:n,multiSelectionKeyCode:i}){const l=Xe(),{deleteElements:s}=Yr(),r=wl(n,{actInsideInputWithModifier:!1}),f=wl(i,{target:fN});W.useEffect(()=>{if(r){const{edges:d,nodes:g}=l.getState();s({nodes:g.filter(Wm),edges:d.filter(Wm)}),l.setState({nodesSelectionActive:!1})}},[r]),W.useEffect(()=>{l.setState({multiSelectionActive:f})},[f])}function gN(n){const i=Xe();W.useEffect(()=>{const l=()=>{if(!n.current||!(n.current.checkVisibility?.()??!0))return!1;const s=nd(n.current);(s.height===0||s.width===0)&&i.getState().onError?.("004",hn.error004()),i.setState({width:s.width||500,height:s.height||500})};if(n.current){l(),window.addEventListener("resize",l);const s=new ResizeObserver(()=>l());return s.observe(n.current),()=>{window.removeEventListener("resize",l),s&&n.current&&s.unobserve(n.current)}}},[])}const Vr={position:"absolute",width:"100%",height:"100%",top:0,left:0},hN=n=>({userSelectionActive:n.userSelectionActive,lib:n.lib,connectionInProgress:n.connection.inProgress});function pN({onPaneContextMenu:n,zoomOnScroll:i=!0,zoomOnPinch:l=!0,panOnScroll:s=!1,panOnScrollSpeed:r=.5,panOnScrollMode:f=Pa.Free,zoomOnDoubleClick:d=!0,panOnDrag:g=!0,defaultViewport:p,translateExtent:h,minZoom:b,maxZoom:x,zoomActivationKeyCode:m,preventScrolling:S=!0,children:w,noWheelClassName:N,noPanClassName:D,onViewportChange:j,isControlledViewport:H,paneClickDistance:_,selectionOnDrag:M}){const A=Xe(),T=W.useRef(null),{userSelectionActive:G,lib:B,connectionInProgress:Y}=Oe(hN,$e),se=wl(m),J=W.useRef();gN(T);const $=W.useCallback(ie=>{j?.({x:ie[0],y:ie[1],zoom:ie[2]}),H||A.setState({transform:ie})},[j,H]);return W.useEffect(()=>{if(T.current){J.current=x_({domNode:T.current,minZoom:b,maxZoom:x,translateExtent:h,viewport:p,onDraggingChange:C=>A.setState({paneDragging:C}),onPanZoomStart:(C,k)=>{const{onViewportChangeStart:I,onMoveStart:K}=A.getState();K?.(C,k),I?.(k)},onPanZoom:(C,k)=>{const{onViewportChange:I,onMove:K}=A.getState();K?.(C,k),I?.(k)},onPanZoomEnd:(C,k)=>{const{onViewportChangeEnd:I,onMoveEnd:K}=A.getState();K?.(C,k),I?.(k)}});const{x:ie,y:z,zoom:X}=J.current.getViewport();return A.setState({panZoom:J.current,transform:[ie,z,X],domNode:T.current.closest(".react-flow")}),()=>{J.current?.destroy()}}},[]),W.useEffect(()=>{J.current?.update({onPaneContextMenu:n,zoomOnScroll:i,zoomOnPinch:l,panOnScroll:s,panOnScrollSpeed:r,panOnScrollMode:f,zoomOnDoubleClick:d,panOnDrag:g,zoomActivationKeyPressed:se,preventScrolling:S,noPanClassName:D,userSelectionActive:G,noWheelClassName:N,lib:B,onTransformChange:$,connectionInProgress:Y,selectionOnDrag:M,paneClickDistance:_})},[n,i,l,s,r,f,d,g,se,S,D,G,N,B,$,Y,M,_]),y.jsx("div",{className:"react-flow__renderer",ref:T,style:Vr,children:w})}const mN=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function yN(){const{userSelectionActive:n,userSelectionRect:i}=Oe(mN,$e);return n&&i?y.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:i.width,height:i.height,transform:`translate(${i.x}px, ${i.y}px)`}}):null}const Af=(n,i)=>l=>{l.target===i.current&&n?.(l)},vN=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,connectionInProgress:n.connection.inProgress,dragging:n.paneDragging});function xN({isSelecting:n,selectionKeyPressed:i,selectionMode:l=xl.Full,panOnDrag:s,paneClickDistance:r,selectionOnDrag:f,onSelectionStart:d,onSelectionEnd:g,onPaneClick:p,onPaneContextMenu:h,onPaneScroll:b,onPaneMouseEnter:x,onPaneMouseMove:m,onPaneMouseLeave:S,children:w}){const N=Xe(),{userSelectionActive:D,elementsSelectable:j,dragging:H,connectionInProgress:_}=Oe(vN,$e),M=j&&(n||D),A=W.useRef(null),T=W.useRef(),G=W.useRef(new Set),B=W.useRef(new Set),Y=W.useRef(!1),se=I=>{if(Y.current||_){Y.current=!1;return}p?.(I),N.getState().resetSelectedElements(),N.setState({nodesSelectionActive:!1})},J=I=>{if(Array.isArray(s)&&s?.includes(2)){I.preventDefault();return}h?.(I)},$=b?I=>b(I):void 0,ie=I=>{Y.current&&(I.stopPropagation(),Y.current=!1)},z=I=>{const{domNode:K}=N.getState();if(T.current=K?.getBoundingClientRect(),!T.current)return;const te=I.target===A.current;if(!te&&!!I.target.closest(".nokey")||!n||!(f&&te||i)||I.button!==0||!I.isPrimary)return;I.target?.setPointerCapture?.(I.pointerId),Y.current=!1;const{x:ee,y:q}=nn(I.nativeEvent,T.current);N.setState({userSelectionRect:{width:0,height:0,startX:ee,startY:q,x:ee,y:q}}),te||(I.stopPropagation(),I.preventDefault())},X=I=>{const{userSelectionRect:K,transform:te,nodeLookup:O,edgeLookup:U,connectionLookup:ee,triggerNodeChanges:q,triggerEdgeChanges:le,defaultEdgeOptions:ue,resetSelectedElements:ce}=N.getState();if(!T.current||!K)return;const{x:re,y:fe}=nn(I.nativeEvent,T.current),{startX:we,startY:be}=K;if(!Y.current){const Re=i?0:r;if(Math.hypot(re-we,fe-be)<=Re)return;ce(),d?.(I)}Y.current=!0;const me={startX:we,startY:be,x:re<we?re:we,y:fe<be?fe:be,width:Math.abs(re-we),height:Math.abs(fe-be)},ve=G.current,Ae=B.current;G.current=new Set(ed(O,me,te,l===xl.Partial,!0).map(Re=>Re.id)),B.current=new Set;const ke=ue?.selectable??!0;for(const Re of G.current){const ot=ee.get(Re);if(ot)for(const{edgeId:Kt}of ot.values()){const Mt=U.get(Kt);Mt&&(Mt.selectable??ke)&&B.current.add(Kt)}}if(!Em(ve,G.current)){const Re=Fi(O,G.current,!0);q(Re)}if(!Em(Ae,B.current)){const Re=Fi(U,B.current);le(Re)}N.setState({userSelectionRect:me,userSelectionActive:!0,nodesSelectionActive:!1})},C=I=>{I.button===0&&(I.target?.releasePointerCapture?.(I.pointerId),!D&&I.target===A.current&&N.getState().userSelectionRect&&se?.(I),N.setState({userSelectionActive:!1,userSelectionRect:null}),Y.current&&(g?.(I),N.setState({nodesSelectionActive:G.current.size>0})))},k=s===!0||Array.isArray(s)&&s.includes(0);return y.jsxs("div",{className:nt(["react-flow__pane",{draggable:k,dragging:H,selection:n}]),onClick:M?void 0:Af(se,A),onContextMenu:Af(J,A),onWheel:Af($,A),onPointerEnter:M?void 0:x,onPointerMove:M?X:m,onPointerUp:M?C:void 0,onPointerDownCapture:M?z:void 0,onClickCapture:M?ie:void 0,onPointerLeave:S,ref:A,style:Vr,children:[w,y.jsx(yN,{})]})}function Yf({id:n,store:i,unselect:l=!1,nodeRef:s}){const{addSelectedNodes:r,unselectNodesAndEdges:f,multiSelectionActive:d,nodeLookup:g,onError:p}=i.getState(),h=g.get(n);if(!h){p?.("012",hn.error012(n));return}i.setState({nodesSelectionActive:!1}),h.selected?(l||h.selected&&d)&&(f({nodes:[h],edges:[]}),requestAnimationFrame(()=>s?.current?.blur())):r([n])}function P0({nodeRef:n,disabled:i=!1,noDragClassName:l,handleSelector:s,nodeId:r,isSelectable:f,nodeClickDistance:d}){const g=Xe(),[p,h]=W.useState(!1),b=W.useRef();return W.useEffect(()=>{b.current=o_({getStoreItems:()=>g.getState(),onNodeMouseDown:x=>{Yf({id:x,store:g,nodeRef:n})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),W.useEffect(()=>{if(i)b.current?.destroy();else if(n.current)return b.current?.update({noDragClassName:l,handleSelector:s,domNode:n.current,isSelectable:f,nodeId:r,nodeClickDistance:d}),()=>{b.current?.destroy()}},[l,s,i,f,n,r]),p}const bN=n=>i=>i.selected&&(i.draggable||n&&typeof i.draggable>"u");function ev(){const n=Xe();return W.useCallback(l=>{const{nodeExtent:s,snapToGrid:r,snapGrid:f,nodesDraggable:d,onError:g,updateNodePositions:p,nodeLookup:h,nodeOrigin:b}=n.getState(),x=new Map,m=bN(d),S=r?f[0]:5,w=r?f[1]:5,N=l.direction.x*S*l.factor,D=l.direction.y*w*l.factor;for(const[,j]of h){if(!m(j))continue;let H={x:j.internals.positionAbsolute.x+N,y:j.internals.positionAbsolute.y+D};r&&(H=Ol(H,f));const{position:_,positionAbsolute:M}=x0({nodeId:j.id,nextPosition:H,nodeLookup:h,nodeExtent:s,nodeOrigin:b,onError:g});j.position=_,j.internals.positionAbsolute=M,x.set(j.id,j)}p(x)},[])}const cd=W.createContext(null),SN=cd.Provider;cd.Consumer;const tv=()=>W.useContext(cd),wN=n=>({connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName,rfId:n.rfId}),EN=(n,i,l)=>s=>{const{connectionClickStartHandle:r,connectionMode:f,connection:d}=s,{fromHandle:g,toHandle:p,isValid:h}=d,b=p?.nodeId===n&&p?.id===i&&p?.type===l;return{connectingFrom:g?.nodeId===n&&g?.id===i&&g?.type===l,connectingTo:b,clickConnecting:r?.nodeId===n&&r?.id===i&&r?.type===l,isPossibleEndHandle:f===no.Strict?g?.type!==l:n!==g?.nodeId||i!==g?.id,connectionInProcess:!!g,clickConnectionInProcess:!!r,valid:b&&h}};function _N({type:n="source",position:i=de.Top,isValidConnection:l,isConnectable:s=!0,isConnectableStart:r=!0,isConnectableEnd:f=!0,id:d,onConnect:g,children:p,className:h,onMouseDown:b,onTouchStart:x,...m},S){const w=d||null,N=n==="target",D=Xe(),j=tv(),{connectOnClick:H,noPanClassName:_,rfId:M}=Oe(wN,$e),{connectingFrom:A,connectingTo:T,clickConnecting:G,isPossibleEndHandle:B,connectionInProcess:Y,clickConnectionInProcess:se,valid:J}=Oe(EN(j,w,n),$e);j||D.getState().onError?.("010",hn.error010());const $=X=>{const{defaultEdgeOptions:C,onConnect:k,hasDefaultEdges:I}=D.getState(),K={...C,...X};if(I){const{edges:te,setEdges:O}=D.getState();O(O0(K,te))}k?.(K),g?.(K)},ie=X=>{if(!j)return;const C=T0(X.nativeEvent);if(r&&(C&&X.button===0||!C)){const k=D.getState();qf.onPointerDown(X.nativeEvent,{handleDomNode:X.currentTarget,autoPanOnConnect:k.autoPanOnConnect,connectionMode:k.connectionMode,connectionRadius:k.connectionRadius,domNode:k.domNode,nodeLookup:k.nodeLookup,lib:k.lib,isTarget:N,handleId:w,nodeId:j,flowId:k.rfId,panBy:k.panBy,cancelConnection:k.cancelConnection,onConnectStart:k.onConnectStart,onConnectEnd:k.onConnectEnd,updateConnection:k.updateConnection,onConnect:$,isValidConnection:l||k.isValidConnection,getTransform:()=>D.getState().transform,getFromHandle:()=>D.getState().connection.fromHandle,autoPanSpeed:k.autoPanSpeed,dragThreshold:k.connectionDragThreshold})}C?b?.(X):x?.(X)},z=X=>{const{onClickConnectStart:C,onClickConnectEnd:k,connectionClickStartHandle:I,connectionMode:K,isValidConnection:te,lib:O,rfId:U,nodeLookup:ee,connection:q}=D.getState();if(!j||!I&&!r)return;if(!I){C?.(X.nativeEvent,{nodeId:j,handleId:w,handleType:n}),D.setState({connectionClickStartHandle:{nodeId:j,type:n,id:w}});return}const le=N0(X.target),ue=l||te,{connection:ce,isValid:re}=qf.isValid(X.nativeEvent,{handle:{nodeId:j,id:w,type:n},connectionMode:K,fromNodeId:I.nodeId,fromHandleId:I.id||null,fromType:I.type,isValidConnection:ue,flowId:U,doc:le,lib:O,nodeLookup:ee});re&&ce&&$(ce);const fe=structuredClone(q);delete fe.inProgress,fe.toPosition=fe.toHandle?fe.toHandle.position:null,k?.(X,fe),D.setState({connectionClickStartHandle:null})};return y.jsx("div",{"data-handleid":w,"data-nodeid":j,"data-handlepos":i,"data-id":`${M}-${j}-${w}-${n}`,className:nt(["react-flow__handle",`react-flow__handle-${i}`,"nodrag",_,h,{source:!N,target:N,connectable:s,connectablestart:r,connectableend:f,clickconnecting:G,connectingfrom:A,connectingto:T,valid:J,connectionindicator:s&&(!Y||B)&&(Y||se?f:r)}]),onMouseDown:ie,onTouchStart:ie,onClick:H?z:void 0,ref:S,...m,children:p})}const dt=W.memo(F0(_N));function NN({data:n,isConnectable:i,sourcePosition:l=de.Bottom}){return y.jsxs(y.Fragment,{children:[n?.label,y.jsx(dt,{type:"source",position:l,isConnectable:i})]})}function AN({data:n,isConnectable:i,targetPosition:l=de.Top,sourcePosition:s=de.Bottom}){return y.jsxs(y.Fragment,{children:[y.jsx(dt,{type:"target",position:l,isConnectable:i}),n?.label,y.jsx(dt,{type:"source",position:s,isConnectable:i})]})}function TN(){return null}function CN({data:n,isConnectable:i,targetPosition:l=de.Top}){return y.jsxs(y.Fragment,{children:[y.jsx(dt,{type:"target",position:l,isConnectable:i}),n?.label]})}const Or={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Pm={input:NN,default:AN,output:CN,group:TN};function MN(n){return n.internals.handleBounds===void 0?{width:n.width??n.initialWidth??n.style?.width,height:n.height??n.initialHeight??n.style?.height}:{width:n.width??n.style?.width,height:n.height??n.style?.height}}const ON=n=>{const{width:i,height:l,x:s,y:r}=Ml(n.nodeLookup,{filter:f=>!!f.selected});return{width:tn(i)?i:null,height:tn(l)?l:null,userSelectionActive:n.userSelectionActive,transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]}) translate(${s}px,${r}px)`}};function DN({onSelectionContextMenu:n,noPanClassName:i,disableKeyboardA11y:l}){const s=Xe(),{width:r,height:f,transformString:d,userSelectionActive:g}=Oe(ON,$e),p=ev(),h=W.useRef(null);if(W.useEffect(()=>{l||h.current?.focus({preventScroll:!0})},[l]),P0({nodeRef:h}),g||!r||!f)return null;const b=n?m=>{const S=s.getState().nodes.filter(w=>w.selected);n(m,S)}:void 0,x=m=>{Object.prototype.hasOwnProperty.call(Or,m.key)&&(m.preventDefault(),p({direction:Or[m.key],factor:m.shiftKey?4:1}))};return y.jsx("div",{className:nt(["react-flow__nodesselection","react-flow__container",i]),style:{transform:d},children:y.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:b,tabIndex:l?void 0:-1,onKeyDown:l?void 0:x,style:{width:r,height:f}})})}const ey=typeof window<"u"?window:void 0,jN=n=>({nodesSelectionActive:n.nodesSelectionActive,userSelectionActive:n.userSelectionActive});function nv({children:n,onPaneClick:i,onPaneMouseEnter:l,onPaneMouseMove:s,onPaneMouseLeave:r,onPaneContextMenu:f,onPaneScroll:d,paneClickDistance:g,deleteKeyCode:p,selectionKeyCode:h,selectionOnDrag:b,selectionMode:x,onSelectionStart:m,onSelectionEnd:S,multiSelectionKeyCode:w,panActivationKeyCode:N,zoomActivationKeyCode:D,elementsSelectable:j,zoomOnScroll:H,zoomOnPinch:_,panOnScroll:M,panOnScrollSpeed:A,panOnScrollMode:T,zoomOnDoubleClick:G,panOnDrag:B,defaultViewport:Y,translateExtent:se,minZoom:J,maxZoom:$,preventScrolling:ie,onSelectionContextMenu:z,noWheelClassName:X,noPanClassName:C,disableKeyboardA11y:k,onViewportChange:I,isControlledViewport:K}){const{nodesSelectionActive:te,userSelectionActive:O}=Oe(jN,$e),U=wl(h,{target:ey}),ee=wl(N,{target:ey}),q=ee||B,le=ee||M,ue=b&&q!==!0,ce=U||O||ue;return dN({deleteKeyCode:p,multiSelectionKeyCode:w}),y.jsx(pN,{onPaneContextMenu:f,elementsSelectable:j,zoomOnScroll:H,zoomOnPinch:_,panOnScroll:le,panOnScrollSpeed:A,panOnScrollMode:T,zoomOnDoubleClick:G,panOnDrag:!U&&q,defaultViewport:Y,translateExtent:se,minZoom:J,maxZoom:$,zoomActivationKeyCode:D,preventScrolling:ie,noWheelClassName:X,noPanClassName:C,onViewportChange:I,isControlledViewport:K,paneClickDistance:g,selectionOnDrag:ue,children:y.jsxs(xN,{onSelectionStart:m,onSelectionEnd:S,onPaneClick:i,onPaneMouseEnter:l,onPaneMouseMove:s,onPaneMouseLeave:r,onPaneContextMenu:f,onPaneScroll:d,panOnDrag:q,isSelecting:!!ce,selectionMode:x,selectionKeyPressed:U,paneClickDistance:g,selectionOnDrag:ue,children:[n,te&&y.jsx(DN,{onSelectionContextMenu:z,noPanClassName:C,disableKeyboardA11y:k})]})})}nv.displayName="FlowRenderer";const zN=W.memo(nv),RN=n=>i=>n?ed(i.nodeLookup,{x:0,y:0,width:i.width,height:i.height},i.transform,!0).map(l=>l.id):Array.from(i.nodeLookup.keys());function HN(n){return Oe(W.useCallback(RN(n),[n]),$e)}const GN=n=>n.updateNodeInternals;function kN(){const n=Oe(GN),[i]=W.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(l=>{const s=new Map;l.forEach(r=>{const f=r.target.getAttribute("data-id");s.set(f,{id:f,nodeElement:r.target,force:!0})}),n(s)}));return W.useEffect(()=>()=>{i?.disconnect()},[i]),i}function UN({node:n,nodeType:i,hasDimensions:l,resizeObserver:s}){const r=Xe(),f=W.useRef(null),d=W.useRef(null),g=W.useRef(n.sourcePosition),p=W.useRef(n.targetPosition),h=W.useRef(i),b=l&&!!n.internals.handleBounds;return W.useEffect(()=>{f.current&&!n.hidden&&(!b||d.current!==f.current)&&(d.current&&s?.unobserve(d.current),s?.observe(f.current),d.current=f.current)},[b,n.hidden]),W.useEffect(()=>()=>{d.current&&(s?.unobserve(d.current),d.current=null)},[]),W.useEffect(()=>{if(f.current){const x=h.current!==i,m=g.current!==n.sourcePosition,S=p.current!==n.targetPosition;(x||m||S)&&(h.current=i,g.current=n.sourcePosition,p.current=n.targetPosition,r.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:f.current,force:!0}]])))}},[n.id,i,n.sourcePosition,n.targetPosition]),f}function LN({id:n,onClick:i,onMouseEnter:l,onMouseMove:s,onMouseLeave:r,onContextMenu:f,onDoubleClick:d,nodesDraggable:g,elementsSelectable:p,nodesConnectable:h,nodesFocusable:b,resizeObserver:x,noDragClassName:m,noPanClassName:S,disableKeyboardA11y:w,rfId:N,nodeTypes:D,nodeClickDistance:j,onError:H}){const{node:_,internals:M,isParent:A}=Oe(re=>{const fe=re.nodeLookup.get(n),we=re.parentLookup.has(n);return{node:fe,internals:fe.internals,isParent:we}},$e);let T=_.type||"default",G=D?.[T]||Pm[T];G===void 0&&(H?.("003",hn.error003(T)),T="default",G=D?.default||Pm.default);const B=!!(_.draggable||g&&typeof _.draggable>"u"),Y=!!(_.selectable||p&&typeof _.selectable>"u"),se=!!(_.connectable||h&&typeof _.connectable>"u"),J=!!(_.focusable||b&&typeof _.focusable>"u"),$=Xe(),ie=E0(_),z=UN({node:_,nodeType:T,hasDimensions:ie,resizeObserver:x}),X=P0({nodeRef:z,disabled:_.hidden||!B,noDragClassName:m,handleSelector:_.dragHandle,nodeId:n,isSelectable:Y,nodeClickDistance:j}),C=ev();if(_.hidden)return null;const k=Yn(_),I=MN(_),K=Y||B||i||l||s||r,te=l?re=>l(re,{...M.userNode}):void 0,O=s?re=>s(re,{...M.userNode}):void 0,U=r?re=>r(re,{...M.userNode}):void 0,ee=f?re=>f(re,{...M.userNode}):void 0,q=d?re=>d(re,{...M.userNode}):void 0,le=re=>{const{selectNodesOnDrag:fe,nodeDragThreshold:we}=$.getState();Y&&(!fe||!B||we>0)&&Yf({id:n,store:$,nodeRef:z}),i&&i(re,{...M.userNode})},ue=re=>{if(!(A0(re.nativeEvent)||w)){if(h0.includes(re.key)&&Y){const fe=re.key==="Escape";Yf({id:n,store:$,unselect:fe,nodeRef:z})}else if(B&&_.selected&&Object.prototype.hasOwnProperty.call(Or,re.key)){re.preventDefault();const{ariaLabelConfig:fe}=$.getState();$.setState({ariaLiveMessage:fe["node.a11yDescription.ariaLiveMessage"]({direction:re.key.replace("Arrow","").toLowerCase(),x:~~M.positionAbsolute.x,y:~~M.positionAbsolute.y})}),C({direction:Or[re.key],factor:re.shiftKey?4:1})}}},ce=()=>{if(w||!z.current?.matches(":focus-visible"))return;const{transform:re,width:fe,height:we,autoPanOnNodeFocus:be,setCenter:me}=$.getState();if(!be)return;ed(new Map([[n,_]]),{x:0,y:0,width:fe,height:we},re,!0).length>0||me(_.position.x+k.width/2,_.position.y+k.height/2,{zoom:re[2]})};return y.jsx("div",{className:nt(["react-flow__node",`react-flow__node-${T}`,{[S]:B},_.className,{selected:_.selected,selectable:Y,parent:A,draggable:B,dragging:X}]),ref:z,style:{zIndex:M.z,transform:`translate(${M.positionAbsolute.x}px,${M.positionAbsolute.y}px)`,pointerEvents:K?"all":"none",visibility:ie?"visible":"hidden",..._.style,...I},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:te,onMouseMove:O,onMouseLeave:U,onContextMenu:ee,onClick:le,onDoubleClick:q,onKeyDown:J?ue:void 0,tabIndex:J?0:void 0,onFocus:J?ce:void 0,role:_.ariaRole??(J?"group":void 0),"aria-roledescription":"node","aria-describedby":w?void 0:`${$0}-${N}`,"aria-label":_.ariaLabel,..._.domAttributes,children:y.jsx(SN,{value:n,children:y.jsx(G,{id:n,data:_.data,type:T,positionAbsoluteX:M.positionAbsolute.x,positionAbsoluteY:M.positionAbsolute.y,selected:_.selected??!1,selectable:Y,draggable:B,deletable:_.deletable??!0,isConnectable:se,sourcePosition:_.sourcePosition,targetPosition:_.targetPosition,dragging:X,dragHandle:_.dragHandle,zIndex:M.z,parentId:_.parentId,...k})})})}var BN=W.memo(LN);const IN=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,onError:n.onError});function av(n){const{nodesDraggable:i,nodesConnectable:l,nodesFocusable:s,elementsSelectable:r,onError:f}=Oe(IN,$e),d=HN(n.onlyRenderVisibleElements),g=kN();return y.jsx("div",{className:"react-flow__nodes",style:Vr,children:d.map(p=>y.jsx(BN,{id:p,nodeTypes:n.nodeTypes,nodeExtent:n.nodeExtent,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,resizeObserver:g,nodesDraggable:i,nodesConnectable:l,nodesFocusable:s,elementsSelectable:r,nodeClickDistance:n.nodeClickDistance,onError:f},p))})}av.displayName="NodeRenderer";const qN=W.memo(av);function YN(n){return Oe(W.useCallback(l=>{if(!n)return l.edges.map(r=>r.id);const s=[];if(l.width&&l.height)for(const r of l.edges){const f=l.nodeLookup.get(r.source),d=l.nodeLookup.get(r.target);f&&d&&IE({sourceNode:f,targetNode:d,width:l.width,height:l.height,transform:l.transform})&&s.push(r.id)}return s},[n]),$e)}const VN=({color:n="none",strokeWidth:i=1})=>{const l={strokeWidth:i,...n&&{stroke:n}};return y.jsx("polyline",{className:"arrow",style:l,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},$N=({color:n="none",strokeWidth:i=1})=>{const l={strokeWidth:i,...n&&{stroke:n,fill:n}};return y.jsx("polyline",{className:"arrowclosed",style:l,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},ty={[Tr.Arrow]:VN,[Tr.ArrowClosed]:$N};function XN(n){const i=Xe();return W.useMemo(()=>Object.prototype.hasOwnProperty.call(ty,n)?ty[n]:(i.getState().onError?.("009",hn.error009(n)),null),[n])}const KN=({id:n,type:i,color:l,width:s=12.5,height:r=12.5,markerUnits:f="strokeWidth",strokeWidth:d,orient:g="auto-start-reverse"})=>{const p=XN(i);return p?y.jsx("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${s}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:f,orient:g,refX:"0",refY:"0",children:y.jsx(p,{color:l,strokeWidth:d})}):null},iv=({defaultColor:n,rfId:i})=>{const l=Oe(f=>f.edges),s=Oe(f=>f.defaultEdgeOptions),r=W.useMemo(()=>ZE(l,{id:i,defaultColor:n,defaultMarkerStart:s?.markerStart,defaultMarkerEnd:s?.markerEnd}),[l,s,i,n]);return r.length?y.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:y.jsx("defs",{children:r.map(f=>y.jsx(KN,{id:f.id,type:f.type,color:f.color,width:f.width,height:f.height,markerUnits:f.markerUnits,strokeWidth:f.strokeWidth,orient:f.orient},f.id))})}):null};iv.displayName="MarkerDefinitions";var ZN=W.memo(iv);function ov({x:n,y:i,label:l,labelStyle:s,labelShowBg:r=!0,labelBgStyle:f,labelBgPadding:d=[2,4],labelBgBorderRadius:g=2,children:p,className:h,...b}){const[x,m]=W.useState({x:1,y:0,width:0,height:0}),S=nt(["react-flow__edge-textwrapper",h]),w=W.useRef(null);return W.useEffect(()=>{if(w.current){const N=w.current.getBBox();m({x:N.x,y:N.y,width:N.width,height:N.height})}},[l]),l?y.jsxs("g",{transform:`translate(${n-x.width/2} ${i-x.height/2})`,className:S,visibility:x.width?"visible":"hidden",...b,children:[r&&y.jsx("rect",{width:x.width+2*d[0],x:-d[0],y:-d[1],height:x.height+2*d[1],className:"react-flow__edge-textbg",style:f,rx:g,ry:g}),y.jsx("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:w,style:s,children:l}),p]}):null}ov.displayName="EdgeText";const QN=W.memo(ov);function jl({path:n,labelX:i,labelY:l,label:s,labelStyle:r,labelShowBg:f,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:p,interactionWidth:h=20,...b}){return y.jsxs(y.Fragment,{children:[y.jsx("path",{...b,d:n,fill:"none",className:nt(["react-flow__edge-path",b.className])}),h?y.jsx("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,s&&tn(i)&&tn(l)?y.jsx(QN,{x:i,y:l,label:s,labelStyle:r,labelShowBg:f,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:p}):null]})}function ny({pos:n,x1:i,y1:l,x2:s,y2:r}){return n===de.Left||n===de.Right?[.5*(i+s),l]:[i,.5*(l+r)]}function lv({sourceX:n,sourceY:i,sourcePosition:l=de.Bottom,targetX:s,targetY:r,targetPosition:f=de.Top}){const[d,g]=ny({pos:l,x1:n,y1:i,x2:s,y2:r}),[p,h]=ny({pos:f,x1:s,y1:r,x2:n,y2:i}),[b,x,m,S]=C0({sourceX:n,sourceY:i,targetX:s,targetY:r,sourceControlX:d,sourceControlY:g,targetControlX:p,targetControlY:h});return[`M${n},${i} C${d},${g} ${p},${h} ${s},${r}`,b,x,m,S]}function sv(n){return W.memo(({id:i,sourceX:l,sourceY:s,targetX:r,targetY:f,sourcePosition:d,targetPosition:g,label:p,labelStyle:h,labelShowBg:b,labelBgStyle:x,labelBgPadding:m,labelBgBorderRadius:S,style:w,markerEnd:N,markerStart:D,interactionWidth:j})=>{const[H,_,M]=lv({sourceX:l,sourceY:s,sourcePosition:d,targetX:r,targetY:f,targetPosition:g}),A=n.isInternal?void 0:i;return y.jsx(jl,{id:A,path:H,labelX:_,labelY:M,label:p,labelStyle:h,labelShowBg:b,labelBgStyle:x,labelBgPadding:m,labelBgBorderRadius:S,style:w,markerEnd:N,markerStart:D,interactionWidth:j})})}const JN=sv({isInternal:!1}),rv=sv({isInternal:!0});JN.displayName="SimpleBezierEdge";rv.displayName="SimpleBezierEdgeInternal";function cv(n){return W.memo(({id:i,sourceX:l,sourceY:s,targetX:r,targetY:f,label:d,labelStyle:g,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:m,sourcePosition:S=de.Bottom,targetPosition:w=de.Top,markerEnd:N,markerStart:D,pathOptions:j,interactionWidth:H})=>{const[_,M,A]=Lf({sourceX:l,sourceY:s,sourcePosition:S,targetX:r,targetY:f,targetPosition:w,borderRadius:j?.borderRadius,offset:j?.offset,stepPosition:j?.stepPosition}),T=n.isInternal?void 0:i;return y.jsx(jl,{id:T,path:_,labelX:M,labelY:A,label:d,labelStyle:g,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:m,markerEnd:N,markerStart:D,interactionWidth:H})})}const uv=cv({isInternal:!1}),fv=cv({isInternal:!0});uv.displayName="SmoothStepEdge";fv.displayName="SmoothStepEdgeInternal";function dv(n){return W.memo(({id:i,...l})=>{const s=n.isInternal?void 0:i;return y.jsx(uv,{...l,id:s,pathOptions:W.useMemo(()=>({borderRadius:0,offset:l.pathOptions?.offset}),[l.pathOptions?.offset])})})}const FN=dv({isInternal:!1}),gv=dv({isInternal:!0});FN.displayName="StepEdge";gv.displayName="StepEdgeInternal";function hv(n){return W.memo(({id:i,sourceX:l,sourceY:s,targetX:r,targetY:f,label:d,labelStyle:g,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:m,markerEnd:S,markerStart:w,interactionWidth:N})=>{const[D,j,H]=D0({sourceX:l,sourceY:s,targetX:r,targetY:f}),_=n.isInternal?void 0:i;return y.jsx(jl,{id:_,path:D,labelX:j,labelY:H,label:d,labelStyle:g,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:m,markerEnd:S,markerStart:w,interactionWidth:N})})}const WN=hv({isInternal:!1}),pv=hv({isInternal:!0});WN.displayName="StraightEdge";pv.displayName="StraightEdgeInternal";function mv(n){return W.memo(({id:i,sourceX:l,sourceY:s,targetX:r,targetY:f,sourcePosition:d=de.Bottom,targetPosition:g=de.Top,label:p,labelStyle:h,labelShowBg:b,labelBgStyle:x,labelBgPadding:m,labelBgBorderRadius:S,style:w,markerEnd:N,markerStart:D,pathOptions:j,interactionWidth:H})=>{const[_,M,A]=ad({sourceX:l,sourceY:s,sourcePosition:d,targetX:r,targetY:f,targetPosition:g,curvature:j?.curvature}),T=n.isInternal?void 0:i;return y.jsx(jl,{id:T,path:_,labelX:M,labelY:A,label:p,labelStyle:h,labelShowBg:b,labelBgStyle:x,labelBgPadding:m,labelBgBorderRadius:S,style:w,markerEnd:N,markerStart:D,interactionWidth:H})})}const PN=mv({isInternal:!1}),yv=mv({isInternal:!0});PN.displayName="BezierEdge";yv.displayName="BezierEdgeInternal";const ay={default:yv,straight:pv,step:gv,smoothstep:fv,simplebezier:rv},iy={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},eA=(n,i,l)=>l===de.Left?n-i:l===de.Right?n+i:n,tA=(n,i,l)=>l===de.Top?n-i:l===de.Bottom?n+i:n,oy="react-flow__edgeupdater";function ly({position:n,centerX:i,centerY:l,radius:s=10,onMouseDown:r,onMouseEnter:f,onMouseOut:d,type:g}){return y.jsx("circle",{onMouseDown:r,onMouseEnter:f,onMouseOut:d,className:nt([oy,`${oy}-${g}`]),cx:eA(i,s,n),cy:tA(l,s,n),r:s,stroke:"transparent",fill:"transparent"})}function nA({isReconnectable:n,reconnectRadius:i,edge:l,sourceX:s,sourceY:r,targetX:f,targetY:d,sourcePosition:g,targetPosition:p,onReconnect:h,onReconnectStart:b,onReconnectEnd:x,setReconnecting:m,setUpdateHover:S}){const w=Xe(),N=(M,A)=>{if(M.button!==0)return;const{autoPanOnConnect:T,domNode:G,isValidConnection:B,connectionMode:Y,connectionRadius:se,lib:J,onConnectStart:$,onConnectEnd:ie,cancelConnection:z,nodeLookup:X,rfId:C,panBy:k,updateConnection:I}=w.getState(),K=A.type==="target",te=(ee,q)=>{m(!1),x?.(ee,l,A.type,q)},O=ee=>h?.(l,ee),U=(ee,q)=>{m(!0),b?.(M,l,A.type),$?.(ee,q)};qf.onPointerDown(M.nativeEvent,{autoPanOnConnect:T,connectionMode:Y,connectionRadius:se,domNode:G,handleId:A.id,nodeId:A.nodeId,nodeLookup:X,isTarget:K,edgeUpdaterType:A.type,lib:J,flowId:C,cancelConnection:z,panBy:k,isValidConnection:B,onConnect:O,onConnectStart:U,onConnectEnd:ie,onReconnectEnd:te,updateConnection:I,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,dragThreshold:w.getState().connectionDragThreshold,handleDomNode:M.currentTarget})},D=M=>N(M,{nodeId:l.target,id:l.targetHandle??null,type:"target"}),j=M=>N(M,{nodeId:l.source,id:l.sourceHandle??null,type:"source"}),H=()=>S(!0),_=()=>S(!1);return y.jsxs(y.Fragment,{children:[(n===!0||n==="source")&&y.jsx(ly,{position:g,centerX:s,centerY:r,radius:i,onMouseDown:D,onMouseEnter:H,onMouseOut:_,type:"source"}),(n===!0||n==="target")&&y.jsx(ly,{position:p,centerX:f,centerY:d,radius:i,onMouseDown:j,onMouseEnter:H,onMouseOut:_,type:"target"})]})}function aA({id:n,edgesFocusable:i,edgesReconnectable:l,elementsSelectable:s,onClick:r,onDoubleClick:f,onContextMenu:d,onMouseEnter:g,onMouseMove:p,onMouseLeave:h,reconnectRadius:b,onReconnect:x,onReconnectStart:m,onReconnectEnd:S,rfId:w,edgeTypes:N,noPanClassName:D,onError:j,disableKeyboardA11y:H}){let _=Oe(me=>me.edgeLookup.get(n));const M=Oe(me=>me.defaultEdgeOptions);_=M?{...M,..._}:_;let A=_.type||"default",T=N?.[A]||ay[A];T===void 0&&(j?.("011",hn.error011(A)),A="default",T=N?.default||ay.default);const G=!!(_.focusable||i&&typeof _.focusable>"u"),B=typeof x<"u"&&(_.reconnectable||l&&typeof _.reconnectable>"u"),Y=!!(_.selectable||s&&typeof _.selectable>"u"),se=W.useRef(null),[J,$]=W.useState(!1),[ie,z]=W.useState(!1),X=Xe(),{zIndex:C,sourceX:k,sourceY:I,targetX:K,targetY:te,sourcePosition:O,targetPosition:U}=Oe(W.useCallback(me=>{const ve=me.nodeLookup.get(_.source),Ae=me.nodeLookup.get(_.target);if(!ve||!Ae)return{zIndex:_.zIndex,...iy};const ke=KE({id:n,sourceNode:ve,targetNode:Ae,sourceHandle:_.sourceHandle||null,targetHandle:_.targetHandle||null,connectionMode:me.connectionMode,onError:j});return{zIndex:BE({selected:_.selected,zIndex:_.zIndex,sourceNode:ve,targetNode:Ae,elevateOnSelect:me.elevateEdgesOnSelect,zIndexMode:me.zIndexMode}),...ke||iy}},[_.source,_.target,_.sourceHandle,_.targetHandle,_.selected,_.zIndex]),$e),ee=W.useMemo(()=>_.markerStart?`url('#${Bf(_.markerStart,w)}')`:void 0,[_.markerStart,w]),q=W.useMemo(()=>_.markerEnd?`url('#${Bf(_.markerEnd,w)}')`:void 0,[_.markerEnd,w]);if(_.hidden||k===null||I===null||K===null||te===null)return null;const le=me=>{const{addSelectedEdges:ve,unselectNodesAndEdges:Ae,multiSelectionActive:ke}=X.getState();Y&&(X.setState({nodesSelectionActive:!1}),_.selected&&ke?(Ae({nodes:[],edges:[_]}),se.current?.blur()):ve([n])),r&&r(me,_)},ue=f?me=>{f(me,{..._})}:void 0,ce=d?me=>{d(me,{..._})}:void 0,re=g?me=>{g(me,{..._})}:void 0,fe=p?me=>{p(me,{..._})}:void 0,we=h?me=>{h(me,{..._})}:void 0,be=me=>{if(!H&&h0.includes(me.key)&&Y){const{unselectNodesAndEdges:ve,addSelectedEdges:Ae}=X.getState();me.key==="Escape"?(se.current?.blur(),ve({edges:[_]})):Ae([n])}};return y.jsx("svg",{style:{zIndex:C},children:y.jsxs("g",{className:nt(["react-flow__edge",`react-flow__edge-${A}`,_.className,D,{selected:_.selected,animated:_.animated,inactive:!Y&&!r,updating:J,selectable:Y}]),onClick:le,onDoubleClick:ue,onContextMenu:ce,onMouseEnter:re,onMouseMove:fe,onMouseLeave:we,onKeyDown:G?be:void 0,tabIndex:G?0:void 0,role:_.ariaRole??(G?"group":"img"),"aria-roledescription":"edge","data-id":n,"data-testid":`rf__edge-${n}`,"aria-label":_.ariaLabel===null?void 0:_.ariaLabel||`Edge from ${_.source} to ${_.target}`,"aria-describedby":G?`${X0}-${w}`:void 0,ref:se,..._.domAttributes,children:[!ie&&y.jsx(T,{id:n,source:_.source,target:_.target,type:_.type,selected:_.selected,animated:_.animated,selectable:Y,deletable:_.deletable??!0,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,sourceX:k,sourceY:I,targetX:K,targetY:te,sourcePosition:O,targetPosition:U,data:_.data,style:_.style,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerStart:ee,markerEnd:q,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth}),B&&y.jsx(nA,{edge:_,isReconnectable:B,reconnectRadius:b,onReconnect:x,onReconnectStart:m,onReconnectEnd:S,sourceX:k,sourceY:I,targetX:K,targetY:te,sourcePosition:O,targetPosition:U,setUpdateHover:$,setReconnecting:z})]})})}var iA=W.memo(aA);const oA=n=>({edgesFocusable:n.edgesFocusable,edgesReconnectable:n.edgesReconnectable,elementsSelectable:n.elementsSelectable,connectionMode:n.connectionMode,onError:n.onError});function vv({defaultMarkerColor:n,onlyRenderVisibleElements:i,rfId:l,edgeTypes:s,noPanClassName:r,onReconnect:f,onEdgeContextMenu:d,onEdgeMouseEnter:g,onEdgeMouseMove:p,onEdgeMouseLeave:h,onEdgeClick:b,reconnectRadius:x,onEdgeDoubleClick:m,onReconnectStart:S,onReconnectEnd:w,disableKeyboardA11y:N}){const{edgesFocusable:D,edgesReconnectable:j,elementsSelectable:H,onError:_}=Oe(oA,$e),M=YN(i);return y.jsxs("div",{className:"react-flow__edges",children:[y.jsx(ZN,{defaultColor:n,rfId:l}),M.map(A=>y.jsx(iA,{id:A,edgesFocusable:D,edgesReconnectable:j,elementsSelectable:H,noPanClassName:r,onReconnect:f,onContextMenu:d,onMouseEnter:g,onMouseMove:p,onMouseLeave:h,onClick:b,reconnectRadius:x,onDoubleClick:m,onReconnectStart:S,onReconnectEnd:w,rfId:l,onError:_,edgeTypes:s,disableKeyboardA11y:N},A))]})}vv.displayName="EdgeRenderer";const lA=W.memo(vv),sA=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function rA({children:n}){const i=Oe(sA);return y.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:i},children:n})}function cA(n){const i=Yr(),l=W.useRef(!1);W.useEffect(()=>{!l.current&&i.viewportInitialized&&n&&(setTimeout(()=>n(i),1),l.current=!0)},[n,i.viewportInitialized])}const uA=n=>n.panZoom?.syncViewport;function fA(n){const i=Oe(uA),l=Xe();return W.useEffect(()=>{n&&(i?.(n),l.setState({transform:[n.x,n.y,n.zoom]}))},[n,i]),null}function dA(n){return n.connection.inProgress?{...n.connection,to:Dl(n.connection.to,n.transform)}:{...n.connection}}function gA(n){return dA}function hA(n){const i=gA();return Oe(i,$e)}const pA=n=>({nodesConnectable:n.nodesConnectable,isValid:n.connection.isValid,inProgress:n.connection.inProgress,width:n.width,height:n.height});function mA({containerStyle:n,style:i,type:l,component:s}){const{nodesConnectable:r,width:f,height:d,isValid:g,inProgress:p}=Oe(pA,$e);return!(f&&r&&p)?null:y.jsx("svg",{style:n,width:f,height:d,className:"react-flow__connectionline react-flow__container",children:y.jsx("g",{className:nt(["react-flow__connection",y0(g)]),children:y.jsx(xv,{style:i,type:l,CustomComponent:s,isValid:g})})})}const xv=({style:n,type:i=wa.Bezier,CustomComponent:l,isValid:s})=>{const{inProgress:r,from:f,fromNode:d,fromHandle:g,fromPosition:p,to:h,toNode:b,toHandle:x,toPosition:m,pointer:S}=hA();if(!r)return;if(l)return y.jsx(l,{connectionLineType:i,connectionLineStyle:n,fromNode:d,fromHandle:g,fromX:f.x,fromY:f.y,toX:h.x,toY:h.y,fromPosition:p,toPosition:m,connectionStatus:y0(s),toNode:b,toHandle:x,pointer:S});let w="";const N={sourceX:f.x,sourceY:f.y,sourcePosition:p,targetX:h.x,targetY:h.y,targetPosition:m};switch(i){case wa.Bezier:[w]=ad(N);break;case wa.SimpleBezier:[w]=lv(N);break;case wa.Step:[w]=Lf({...N,borderRadius:0});break;case wa.SmoothStep:[w]=Lf(N);break;default:[w]=D0(N)}return y.jsx("path",{d:w,fill:"none",className:"react-flow__connection-path",style:n})};xv.displayName="ConnectionLine";const yA={};function sy(n=yA){W.useRef(n),Xe(),W.useEffect(()=>{},[n])}function vA(){Xe(),W.useRef(!1),W.useEffect(()=>{},[])}function bv({nodeTypes:n,edgeTypes:i,onInit:l,onNodeClick:s,onEdgeClick:r,onNodeDoubleClick:f,onEdgeDoubleClick:d,onNodeMouseEnter:g,onNodeMouseMove:p,onNodeMouseLeave:h,onNodeContextMenu:b,onSelectionContextMenu:x,onSelectionStart:m,onSelectionEnd:S,connectionLineType:w,connectionLineStyle:N,connectionLineComponent:D,connectionLineContainerStyle:j,selectionKeyCode:H,selectionOnDrag:_,selectionMode:M,multiSelectionKeyCode:A,panActivationKeyCode:T,zoomActivationKeyCode:G,deleteKeyCode:B,onlyRenderVisibleElements:Y,elementsSelectable:se,defaultViewport:J,translateExtent:$,minZoom:ie,maxZoom:z,preventScrolling:X,defaultMarkerColor:C,zoomOnScroll:k,zoomOnPinch:I,panOnScroll:K,panOnScrollSpeed:te,panOnScrollMode:O,zoomOnDoubleClick:U,panOnDrag:ee,onPaneClick:q,onPaneMouseEnter:le,onPaneMouseMove:ue,onPaneMouseLeave:ce,onPaneScroll:re,onPaneContextMenu:fe,paneClickDistance:we,nodeClickDistance:be,onEdgeContextMenu:me,onEdgeMouseEnter:ve,onEdgeMouseMove:Ae,onEdgeMouseLeave:ke,reconnectRadius:Re,onReconnect:ot,onReconnectStart:Kt,onReconnectEnd:Mt,noDragClassName:Zt,noWheelClassName:mn,noPanClassName:_a,disableKeyboardA11y:Na,nodeExtent:st,rfId:li,viewport:yn,onViewportChange:Vn}){return sy(n),sy(i),vA(),cA(l),fA(yn),y.jsx(zN,{onPaneClick:q,onPaneMouseEnter:le,onPaneMouseMove:ue,onPaneMouseLeave:ce,onPaneContextMenu:fe,onPaneScroll:re,paneClickDistance:we,deleteKeyCode:B,selectionKeyCode:H,selectionOnDrag:_,selectionMode:M,onSelectionStart:m,onSelectionEnd:S,multiSelectionKeyCode:A,panActivationKeyCode:T,zoomActivationKeyCode:G,elementsSelectable:se,zoomOnScroll:k,zoomOnPinch:I,zoomOnDoubleClick:U,panOnScroll:K,panOnScrollSpeed:te,panOnScrollMode:O,panOnDrag:ee,defaultViewport:J,translateExtent:$,minZoom:ie,maxZoom:z,onSelectionContextMenu:x,preventScrolling:X,noDragClassName:Zt,noWheelClassName:mn,noPanClassName:_a,disableKeyboardA11y:Na,onViewportChange:Vn,isControlledViewport:!!yn,children:y.jsxs(rA,{children:[y.jsx(lA,{edgeTypes:i,onEdgeClick:r,onEdgeDoubleClick:d,onReconnect:ot,onReconnectStart:Kt,onReconnectEnd:Mt,onlyRenderVisibleElements:Y,onEdgeContextMenu:me,onEdgeMouseEnter:ve,onEdgeMouseMove:Ae,onEdgeMouseLeave:ke,reconnectRadius:Re,defaultMarkerColor:C,noPanClassName:_a,disableKeyboardA11y:Na,rfId:li}),y.jsx(mA,{style:N,type:w,component:D,containerStyle:j}),y.jsx("div",{className:"react-flow__edgelabel-renderer"}),y.jsx(qN,{nodeTypes:n,onNodeClick:s,onNodeDoubleClick:f,onNodeMouseEnter:g,onNodeMouseMove:p,onNodeMouseLeave:h,onNodeContextMenu:b,nodeClickDistance:be,onlyRenderVisibleElements:Y,noPanClassName:_a,noDragClassName:Zt,disableKeyboardA11y:Na,nodeExtent:st,rfId:li}),y.jsx("div",{className:"react-flow__viewport-portal"})]})})}bv.displayName="GraphView";const xA=W.memo(bv),ry=({nodes:n,edges:i,defaultNodes:l,defaultEdges:s,width:r,height:f,fitView:d,fitViewOptions:g,minZoom:p=.5,maxZoom:h=2,nodeOrigin:b,nodeExtent:x,zIndexMode:m="basic"}={})=>{const S=new Map,w=new Map,N=new Map,D=new Map,j=s??i??[],H=l??n??[],_=b??[0,0],M=x??vl;R0(N,D,j);const A=If(H,S,w,{nodeOrigin:_,nodeExtent:M,zIndexMode:m});let T=[0,0,1];if(d&&r&&f){const G=Ml(S,{filter:J=>!!((J.width||J.initialWidth)&&(J.height||J.initialHeight))}),{x:B,y:Y,zoom:se}=td(G,r,f,p,h,g?.padding??.1);T=[B,Y,se]}return{rfId:"1",width:r??0,height:f??0,transform:T,nodes:H,nodesInitialized:A,nodeLookup:S,parentLookup:w,edges:j,edgeLookup:D,connectionLookup:N,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:l!==void 0,hasDefaultEdges:s!==void 0,panZoom:null,minZoom:p,maxZoom:h,translateExtent:vl,nodeExtent:M,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:no.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:_,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:d??!1,fitViewOptions:g,fitViewResolver:null,connection:{...m0},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:RE,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:p0,zIndexMode:m,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},bA=({nodes:n,edges:i,defaultNodes:l,defaultEdges:s,width:r,height:f,fitView:d,fitViewOptions:g,minZoom:p,maxZoom:h,nodeOrigin:b,nodeExtent:x,zIndexMode:m})=>k_((S,w)=>{async function N(){const{nodeLookup:D,panZoom:j,fitViewOptions:H,fitViewResolver:_,width:M,height:A,minZoom:T,maxZoom:G}=w();j&&(await jE({nodes:D,width:M,height:A,panZoom:j,minZoom:T,maxZoom:G},H),_?.resolve(!0),S({fitViewResolver:null}))}return{...ry({nodes:n,edges:i,width:r,height:f,fitView:d,fitViewOptions:g,minZoom:p,maxZoom:h,nodeOrigin:b,nodeExtent:x,defaultNodes:l,defaultEdges:s,zIndexMode:m}),setNodes:D=>{const{nodeLookup:j,parentLookup:H,nodeOrigin:_,elevateNodesOnSelect:M,fitViewQueued:A,zIndexMode:T}=w(),G=If(D,j,H,{nodeOrigin:_,nodeExtent:x,elevateNodesOnSelect:M,checkEquality:!0,zIndexMode:T});A&&G?(N(),S({nodes:D,nodesInitialized:G,fitViewQueued:!1,fitViewOptions:void 0})):S({nodes:D,nodesInitialized:G})},setEdges:D=>{const{connectionLookup:j,edgeLookup:H}=w();R0(j,H,D),S({edges:D})},setDefaultNodesAndEdges:(D,j)=>{if(D){const{setNodes:H}=w();H(D),S({hasDefaultNodes:!0})}if(j){const{setEdges:H}=w();H(j),S({hasDefaultEdges:!0})}},updateNodeInternals:D=>{const{triggerNodeChanges:j,nodeLookup:H,parentLookup:_,domNode:M,nodeOrigin:A,nodeExtent:T,debug:G,fitViewQueued:B,zIndexMode:Y}=w(),{changes:se,updatedInternals:J}=t_(D,H,_,M,A,T,Y);J&&(FE(H,_,{nodeOrigin:A,nodeExtent:T,zIndexMode:Y}),B?(N(),S({fitViewQueued:!1,fitViewOptions:void 0})):S({}),se?.length>0&&(G&&console.log("React Flow: trigger node changes",se),j?.(se)))},updateNodePositions:(D,j=!1)=>{const H=[];let _=[];const{nodeLookup:M,triggerNodeChanges:A,connection:T,updateConnection:G,onNodesChangeMiddlewareMap:B}=w();for(const[Y,se]of D){const J=M.get(Y),$=!!(J?.expandParent&&J?.parentId&&se?.position),ie={id:Y,type:"position",position:$?{x:Math.max(0,se.position.x),y:Math.max(0,se.position.y)}:se.position,dragging:j};if(J&&T.inProgress&&T.fromNode.id===J.id){const z=ii(J,T.fromHandle,de.Left,!0);G({...T,from:z})}$&&J.parentId&&H.push({id:Y,parentId:J.parentId,rect:{...se.internals.positionAbsolute,width:se.measured.width??0,height:se.measured.height??0}}),_.push(ie)}if(H.length>0){const{parentLookup:Y,nodeOrigin:se}=w(),J=rd(H,M,Y,se);_.push(...J)}for(const Y of B.values())_=Y(_);A(_)},triggerNodeChanges:D=>{const{onNodesChange:j,setNodes:H,nodes:_,hasDefaultNodes:M,debug:A}=w();if(D?.length){if(M){const T=Q0(D,_);H(T)}A&&console.log("React Flow: trigger node changes",D),j?.(D)}},triggerEdgeChanges:D=>{const{onEdgesChange:j,setEdges:H,edges:_,hasDefaultEdges:M,debug:A}=w();if(D?.length){if(M){const T=J0(D,_);H(T)}A&&console.log("React Flow: trigger edge changes",D),j?.(D)}},addSelectedNodes:D=>{const{multiSelectionActive:j,edgeLookup:H,nodeLookup:_,triggerNodeChanges:M,triggerEdgeChanges:A}=w();if(j){const T=D.map(G=>Ja(G,!0));M(T);return}M(Fi(_,new Set([...D]),!0)),A(Fi(H))},addSelectedEdges:D=>{const{multiSelectionActive:j,edgeLookup:H,nodeLookup:_,triggerNodeChanges:M,triggerEdgeChanges:A}=w();if(j){const T=D.map(G=>Ja(G,!0));A(T);return}A(Fi(H,new Set([...D]))),M(Fi(_,new Set,!0))},unselectNodesAndEdges:({nodes:D,edges:j}={})=>{const{edges:H,nodes:_,nodeLookup:M,triggerNodeChanges:A,triggerEdgeChanges:T}=w(),G=D||_,B=j||H,Y=G.map(J=>{const $=M.get(J.id);return $&&($.selected=!1),Ja(J.id,!1)}),se=B.map(J=>Ja(J.id,!1));A(Y),T(se)},setMinZoom:D=>{const{panZoom:j,maxZoom:H}=w();j?.setScaleExtent([D,H]),S({minZoom:D})},setMaxZoom:D=>{const{panZoom:j,minZoom:H}=w();j?.setScaleExtent([H,D]),S({maxZoom:D})},setTranslateExtent:D=>{w().panZoom?.setTranslateExtent(D),S({translateExtent:D})},resetSelectedElements:()=>{const{edges:D,nodes:j,triggerNodeChanges:H,triggerEdgeChanges:_,elementsSelectable:M}=w();if(!M)return;const A=j.reduce((G,B)=>B.selected?[...G,Ja(B.id,!1)]:G,[]),T=D.reduce((G,B)=>B.selected?[...G,Ja(B.id,!1)]:G,[]);H(A),_(T)},setNodeExtent:D=>{const{nodes:j,nodeLookup:H,parentLookup:_,nodeOrigin:M,elevateNodesOnSelect:A,nodeExtent:T,zIndexMode:G}=w();D[0][0]===T[0][0]&&D[0][1]===T[0][1]&&D[1][0]===T[1][0]&&D[1][1]===T[1][1]||(If(j,H,_,{nodeOrigin:M,nodeExtent:D,elevateNodesOnSelect:A,checkEquality:!1,zIndexMode:G}),S({nodeExtent:D}))},panBy:D=>{const{transform:j,width:H,height:_,panZoom:M,translateExtent:A}=w();return n_({delta:D,panZoom:M,transform:j,translateExtent:A,width:H,height:_})},setCenter:async(D,j,H)=>{const{width:_,height:M,maxZoom:A,panZoom:T}=w();if(!T)return Promise.resolve(!1);const G=typeof H?.zoom<"u"?H.zoom:A;return await T.setViewport({x:_/2-D*G,y:M/2-j*G,zoom:G},{duration:H?.duration,ease:H?.ease,interpolate:H?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{S({connection:{...m0}})},updateConnection:D=>{S({connection:D})},reset:()=>S({...ry()})}},Object.is);function Sv({initialNodes:n,initialEdges:i,defaultNodes:l,defaultEdges:s,initialWidth:r,initialHeight:f,initialMinZoom:d,initialMaxZoom:g,initialFitViewOptions:p,fitView:h,nodeOrigin:b,nodeExtent:x,zIndexMode:m,children:S}){const[w]=W.useState(()=>bA({nodes:n,edges:i,defaultNodes:l,defaultEdges:s,width:r,height:f,fitView:h,minZoom:d,maxZoom:g,fitViewOptions:p,nodeOrigin:b,nodeExtent:x,zIndexMode:m}));return y.jsx(L_,{value:w,children:y.jsx(rN,{children:S})})}function SA({children:n,nodes:i,edges:l,defaultNodes:s,defaultEdges:r,width:f,height:d,fitView:g,fitViewOptions:p,minZoom:h,maxZoom:b,nodeOrigin:x,nodeExtent:m,zIndexMode:S}){return W.useContext(Ir)?y.jsx(y.Fragment,{children:n}):y.jsx(Sv,{initialNodes:i,initialEdges:l,defaultNodes:s,defaultEdges:r,initialWidth:f,initialHeight:d,fitView:g,initialFitViewOptions:p,initialMinZoom:h,initialMaxZoom:b,nodeOrigin:x,nodeExtent:m,zIndexMode:S,children:n})}const wA={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function EA({nodes:n,edges:i,defaultNodes:l,defaultEdges:s,className:r,nodeTypes:f,edgeTypes:d,onNodeClick:g,onEdgeClick:p,onInit:h,onMove:b,onMoveStart:x,onMoveEnd:m,onConnect:S,onConnectStart:w,onConnectEnd:N,onClickConnectStart:D,onClickConnectEnd:j,onNodeMouseEnter:H,onNodeMouseMove:_,onNodeMouseLeave:M,onNodeContextMenu:A,onNodeDoubleClick:T,onNodeDragStart:G,onNodeDrag:B,onNodeDragStop:Y,onNodesDelete:se,onEdgesDelete:J,onDelete:$,onSelectionChange:ie,onSelectionDragStart:z,onSelectionDrag:X,onSelectionDragStop:C,onSelectionContextMenu:k,onSelectionStart:I,onSelectionEnd:K,onBeforeDelete:te,connectionMode:O,connectionLineType:U=wa.Bezier,connectionLineStyle:ee,connectionLineComponent:q,connectionLineContainerStyle:le,deleteKeyCode:ue="Backspace",selectionKeyCode:ce="Shift",selectionOnDrag:re=!1,selectionMode:fe=xl.Full,panActivationKeyCode:we="Space",multiSelectionKeyCode:be=Sl()?"Meta":"Control",zoomActivationKeyCode:me=Sl()?"Meta":"Control",snapToGrid:ve,snapGrid:Ae,onlyRenderVisibleElements:ke=!1,selectNodesOnDrag:Re,nodesDraggable:ot,autoPanOnNodeFocus:Kt,nodesConnectable:Mt,nodesFocusable:Zt,nodeOrigin:mn=K0,edgesFocusable:_a,edgesReconnectable:Na,elementsSelectable:st=!0,defaultViewport:li=W_,minZoom:yn=.5,maxZoom:Vn=2,translateExtent:Aa=vl,preventScrolling:$r=!0,nodeExtent:si,defaultMarkerColor:Xr="#b1b1b7",zoomOnScroll:Kr=!0,zoomOnPinch:Ta=!0,panOnScroll:yt=!1,panOnScrollSpeed:on=.5,panOnScrollMode:vt=Pa.Free,zoomOnDoubleClick:Zr=!0,panOnDrag:Qr=!0,onPaneClick:Jr,onPaneMouseEnter:ri,onPaneMouseMove:ci,onPaneMouseLeave:ui,onPaneScroll:vn,onPaneContextMenu:fi,paneClickDistance:Ca=1,nodeClickDistance:Fr=0,children:Rl,onReconnect:so,onReconnectStart:Ma,onReconnectEnd:Wr,onEdgeContextMenu:Hl,onEdgeDoubleClick:Gl,onEdgeMouseEnter:kl,onEdgeMouseMove:ro,onEdgeMouseLeave:co,reconnectRadius:Ul=10,onNodesChange:Ll,onEdgesChange:ln,noDragClassName:at="nodrag",noWheelClassName:ht="nowheel",noPanClassName:xn="nopan",fitView:di,fitViewOptions:Bl,connectOnClick:Pr,attributionPosition:Il,proOptions:Oa,defaultEdgeOptions:uo,elevateNodesOnSelect:$n=!0,elevateEdgesOnSelect:Xn=!1,disableKeyboardA11y:Kn=!1,autoPanOnConnect:Zn,autoPanOnNodeDrag:Fe,autoPanSpeed:ql,connectionRadius:Yl,isValidConnection:bn,onError:Qn,style:ec,id:fo,nodeDragThreshold:Vl,connectionDragThreshold:tc,viewport:gi,onViewportChange:hi,width:Qt,height:bt,colorMode:$l="light",debug:nc,onScroll:pi,ariaLabelConfig:Xl,zIndexMode:Da="basic",...ac},St){const ja=fo||"1",Kl=nN($l),go=W.useCallback(Sn=>{Sn.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),pi?.(Sn)},[pi]);return y.jsx("div",{"data-testid":"rf__wrapper",...ac,onScroll:go,style:{...ec,...wA},ref:St,className:nt(["react-flow",r,Kl]),id:fo,role:"application",children:y.jsxs(SA,{nodes:n,edges:i,width:Qt,height:bt,fitView:di,fitViewOptions:Bl,minZoom:yn,maxZoom:Vn,nodeOrigin:mn,nodeExtent:si,zIndexMode:Da,children:[y.jsx(xA,{onInit:h,onNodeClick:g,onEdgeClick:p,onNodeMouseEnter:H,onNodeMouseMove:_,onNodeMouseLeave:M,onNodeContextMenu:A,onNodeDoubleClick:T,nodeTypes:f,edgeTypes:d,connectionLineType:U,connectionLineStyle:ee,connectionLineComponent:q,connectionLineContainerStyle:le,selectionKeyCode:ce,selectionOnDrag:re,selectionMode:fe,deleteKeyCode:ue,multiSelectionKeyCode:be,panActivationKeyCode:we,zoomActivationKeyCode:me,onlyRenderVisibleElements:ke,defaultViewport:li,translateExtent:Aa,minZoom:yn,maxZoom:Vn,preventScrolling:$r,zoomOnScroll:Kr,zoomOnPinch:Ta,zoomOnDoubleClick:Zr,panOnScroll:yt,panOnScrollSpeed:on,panOnScrollMode:vt,panOnDrag:Qr,onPaneClick:Jr,onPaneMouseEnter:ri,onPaneMouseMove:ci,onPaneMouseLeave:ui,onPaneScroll:vn,onPaneContextMenu:fi,paneClickDistance:Ca,nodeClickDistance:Fr,onSelectionContextMenu:k,onSelectionStart:I,onSelectionEnd:K,onReconnect:so,onReconnectStart:Ma,onReconnectEnd:Wr,onEdgeContextMenu:Hl,onEdgeDoubleClick:Gl,onEdgeMouseEnter:kl,onEdgeMouseMove:ro,onEdgeMouseLeave:co,reconnectRadius:Ul,defaultMarkerColor:Xr,noDragClassName:at,noWheelClassName:ht,noPanClassName:xn,rfId:ja,disableKeyboardA11y:Kn,nodeExtent:si,viewport:gi,onViewportChange:hi}),y.jsx(tN,{nodes:n,edges:i,defaultNodes:l,defaultEdges:s,onConnect:S,onConnectStart:w,onConnectEnd:N,onClickConnectStart:D,onClickConnectEnd:j,nodesDraggable:ot,autoPanOnNodeFocus:Kt,nodesConnectable:Mt,nodesFocusable:Zt,edgesFocusable:_a,edgesReconnectable:Na,elementsSelectable:st,elevateNodesOnSelect:$n,elevateEdgesOnSelect:Xn,minZoom:yn,maxZoom:Vn,nodeExtent:si,onNodesChange:Ll,onEdgesChange:ln,snapToGrid:ve,snapGrid:Ae,connectionMode:O,translateExtent:Aa,connectOnClick:Pr,defaultEdgeOptions:uo,fitView:di,fitViewOptions:Bl,onNodesDelete:se,onEdgesDelete:J,onDelete:$,onNodeDragStart:G,onNodeDrag:B,onNodeDragStop:Y,onSelectionDrag:X,onSelectionDragStart:z,onSelectionDragStop:C,onMove:b,onMoveStart:x,onMoveEnd:m,noPanClassName:xn,nodeOrigin:mn,rfId:ja,autoPanOnConnect:Zn,autoPanOnNodeDrag:Fe,autoPanSpeed:ql,onError:Qn,connectionRadius:Yl,isValidConnection:bn,selectNodesOnDrag:Re,nodeDragThreshold:Vl,connectionDragThreshold:tc,onBeforeDelete:te,debug:nc,ariaLabelConfig:Xl,zIndexMode:Da}),y.jsx(F_,{onSelectionChange:ie}),Rl,y.jsx(X_,{proOptions:Oa,position:Il}),y.jsx($_,{rfId:ja,disableKeyboardA11y:Kn})]})})}var _A=F0(EA);const NA=n=>n.domNode?.querySelector(".react-flow__edgelabel-renderer");function AA({children:n}){const i=Oe(NA);return i?U_.createPortal(n,i):null}function TA({dimensions:n,lineWidth:i,variant:l,className:s}){return y.jsx("path",{strokeWidth:i,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`,className:nt(["react-flow__background-pattern",l,s])})}function CA({radius:n,className:i}){return y.jsx("circle",{cx:n,cy:n,r:n,className:nt(["react-flow__background-pattern","dots",i])})}var In;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(In||(In={}));const MA={[In.Dots]:1,[In.Lines]:1,[In.Cross]:6},OA=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function wv({id:n,variant:i=In.Dots,gap:l=20,size:s,lineWidth:r=1,offset:f=0,color:d,bgColor:g,style:p,className:h,patternClassName:b}){const x=W.useRef(null),{transform:m,patternId:S}=Oe(OA,$e),w=s||MA[i],N=i===In.Dots,D=i===In.Cross,j=Array.isArray(l)?l:[l,l],H=[j[0]*m[2]||1,j[1]*m[2]||1],_=w*m[2],M=Array.isArray(f)?f:[f,f],A=D?[_,_]:H,T=[M[0]*m[2]||1+A[0]/2,M[1]*m[2]||1+A[1]/2],G=`${S}${n||""}`;return y.jsxs("svg",{className:nt(["react-flow__background",h]),style:{...p,...Vr,"--xy-background-color-props":g,"--xy-background-pattern-color-props":d},ref:x,"data-testid":"rf__background",children:[y.jsx("pattern",{id:G,x:m[0]%H[0],y:m[1]%H[1],width:H[0],height:H[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${T[0]},-${T[1]})`,children:N?y.jsx(CA,{radius:_/2,className:b}):y.jsx(TA,{dimensions:A,lineWidth:r,variant:i,className:b})}),y.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${G})`})]})}wv.displayName="Background";const DA=W.memo(wv);function jA(){return y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:y.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function zA(){return y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:y.jsx("path",{d:"M0 0h32v4.2H0z"})})}function RA(){return y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:y.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function HA(){return y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:y.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function GA(){return y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:y.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function fr({children:n,className:i,...l}){return y.jsx("button",{type:"button",className:nt(["react-flow__controls-button",i]),...l,children:n})}const kA=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom,ariaLabelConfig:n.ariaLabelConfig});function Ev({style:n,showZoom:i=!0,showFitView:l=!0,showInteractive:s=!0,fitViewOptions:r,onZoomIn:f,onZoomOut:d,onFitView:g,onInteractiveChange:p,className:h,children:b,position:x="bottom-left",orientation:m="vertical","aria-label":S}){const w=Xe(),{isInteractive:N,minZoomReached:D,maxZoomReached:j,ariaLabelConfig:H}=Oe(kA,$e),{zoomIn:_,zoomOut:M,fitView:A}=Yr(),T=()=>{_(),f?.()},G=()=>{M(),d?.()},B=()=>{A(r),g?.()},Y=()=>{w.setState({nodesDraggable:!N,nodesConnectable:!N,elementsSelectable:!N}),p?.(!N)},se=m==="horizontal"?"horizontal":"vertical";return y.jsxs(qr,{className:nt(["react-flow__controls",se,h]),position:x,style:n,"data-testid":"rf__controls","aria-label":S??H["controls.ariaLabel"],children:[i&&y.jsxs(y.Fragment,{children:[y.jsx(fr,{onClick:T,className:"react-flow__controls-zoomin",title:H["controls.zoomIn.ariaLabel"],"aria-label":H["controls.zoomIn.ariaLabel"],disabled:j,children:y.jsx(jA,{})}),y.jsx(fr,{onClick:G,className:"react-flow__controls-zoomout",title:H["controls.zoomOut.ariaLabel"],"aria-label":H["controls.zoomOut.ariaLabel"],disabled:D,children:y.jsx(zA,{})})]}),l&&y.jsx(fr,{className:"react-flow__controls-fitview",onClick:B,title:H["controls.fitView.ariaLabel"],"aria-label":H["controls.fitView.ariaLabel"],children:y.jsx(RA,{})}),s&&y.jsx(fr,{className:"react-flow__controls-interactive",onClick:Y,title:H["controls.interactive.ariaLabel"],"aria-label":H["controls.interactive.ariaLabel"],children:N?y.jsx(GA,{}):y.jsx(HA,{})}),b]})}Ev.displayName="Controls";const UA=W.memo(Ev);function LA({id:n,x:i,y:l,width:s,height:r,style:f,color:d,strokeColor:g,strokeWidth:p,className:h,borderRadius:b,shapeRendering:x,selected:m,onClick:S}){const{background:w,backgroundColor:N}=f||{},D=d||w||N;return y.jsx("rect",{className:nt(["react-flow__minimap-node",{selected:m},h]),x:i,y:l,rx:b,ry:b,width:s,height:r,style:{fill:D,stroke:g,strokeWidth:p},shapeRendering:x,onClick:S?j=>S(j,n):void 0})}const BA=W.memo(LA),IA=n=>n.nodes.map(i=>i.id),Tf=n=>n instanceof Function?n:()=>n;function qA({nodeStrokeColor:n,nodeColor:i,nodeClassName:l="",nodeBorderRadius:s=5,nodeStrokeWidth:r,nodeComponent:f=BA,onClick:d}){const g=Oe(IA,$e),p=Tf(i),h=Tf(n),b=Tf(l),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return y.jsx(y.Fragment,{children:g.map(m=>y.jsx(VA,{id:m,nodeColorFunc:p,nodeStrokeColorFunc:h,nodeClassNameFunc:b,nodeBorderRadius:s,nodeStrokeWidth:r,NodeComponent:f,onClick:d,shapeRendering:x},m))})}function YA({id:n,nodeColorFunc:i,nodeStrokeColorFunc:l,nodeClassNameFunc:s,nodeBorderRadius:r,nodeStrokeWidth:f,shapeRendering:d,NodeComponent:g,onClick:p}){const{node:h,x:b,y:x,width:m,height:S}=Oe(w=>{const{internals:N}=w.nodeLookup.get(n),D=N.userNode,{x:j,y:H}=N.positionAbsolute,{width:_,height:M}=Yn(D);return{node:D,x:j,y:H,width:_,height:M}},$e);return!h||h.hidden||!E0(h)?null:y.jsx(g,{x:b,y:x,width:m,height:S,style:h.style,selected:!!h.selected,className:s(h),color:i(h),borderRadius:r,strokeColor:l(h),strokeWidth:f,shapeRendering:d,onClick:p,id:h.id})}const VA=W.memo(YA);var $A=W.memo(qA);const XA=200,KA=150,ZA=n=>!n.hidden,QA=n=>{const i={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:i,boundingRect:n.nodeLookup.size>0?w0(Ml(n.nodeLookup,{filter:ZA}),i):i,rfId:n.rfId,panZoom:n.panZoom,translateExtent:n.translateExtent,flowWidth:n.width,flowHeight:n.height,ariaLabelConfig:n.ariaLabelConfig}},JA="react-flow__minimap-desc";function _v({style:n,className:i,nodeStrokeColor:l,nodeColor:s,nodeClassName:r="",nodeBorderRadius:f=5,nodeStrokeWidth:d,nodeComponent:g,bgColor:p,maskColor:h,maskStrokeColor:b,maskStrokeWidth:x,position:m="bottom-right",onClick:S,onNodeClick:w,pannable:N=!1,zoomable:D=!1,ariaLabel:j,inversePan:H,zoomStep:_=1,offsetScale:M=5}){const A=Xe(),T=W.useRef(null),{boundingRect:G,viewBB:B,rfId:Y,panZoom:se,translateExtent:J,flowWidth:$,flowHeight:ie,ariaLabelConfig:z}=Oe(QA,$e),X=n?.width??XA,C=n?.height??KA,k=G.width/X,I=G.height/C,K=Math.max(k,I),te=K*X,O=K*C,U=M*K,ee=G.x-(te-G.width)/2-U,q=G.y-(O-G.height)/2-U,le=te+U*2,ue=O+U*2,ce=`${JA}-${Y}`,re=W.useRef(0),fe=W.useRef();re.current=K,W.useEffect(()=>{if(T.current&&se)return fe.current=f_({domNode:T.current,panZoom:se,getTransform:()=>A.getState().transform,getViewScale:()=>re.current}),()=>{fe.current?.destroy()}},[se]),W.useEffect(()=>{fe.current?.update({translateExtent:J,width:$,height:ie,inversePan:H,pannable:N,zoomStep:_,zoomable:D})},[N,D,H,_,J,$,ie]);const we=S?ve=>{const[Ae,ke]=fe.current?.pointer(ve)||[0,0];S(ve,{x:Ae,y:ke})}:void 0,be=w?W.useCallback((ve,Ae)=>{const ke=A.getState().nodeLookup.get(Ae).internals.userNode;w(ve,ke)},[]):void 0,me=j??z["minimap.ariaLabel"];return y.jsx(qr,{position:m,style:{...n,"--xy-minimap-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof b=="string"?b:void 0,"--xy-minimap-mask-stroke-width-props":typeof x=="number"?x*K:void 0,"--xy-minimap-node-background-color-props":typeof s=="string"?s:void 0,"--xy-minimap-node-stroke-color-props":typeof l=="string"?l:void 0,"--xy-minimap-node-stroke-width-props":typeof d=="number"?d:void 0},className:nt(["react-flow__minimap",i]),"data-testid":"rf__minimap",children:y.jsxs("svg",{width:X,height:C,viewBox:`${ee} ${q} ${le} ${ue}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ce,ref:T,onClick:we,children:[me&&y.jsx("title",{id:ce,children:me}),y.jsx($A,{onClick:be,nodeColor:s,nodeStrokeColor:l,nodeBorderRadius:f,nodeClassName:r,nodeStrokeWidth:d,nodeComponent:g}),y.jsx("path",{className:"react-flow__minimap-mask",d:`M${ee-U},${q-U}h${le+U*2}v${ue+U*2}h${-le-U*2}z
        M${B.x},${B.y}h${B.width}v${B.height}h${-B.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}_v.displayName="MiniMap";const FA=W.memo(_v),WA=n=>i=>n?`${Math.max(1/i.transform[2],1)}`:void 0,PA={[lo.Line]:"right",[lo.Handle]:"bottom-right"};function eT({nodeId:n,position:i,variant:l=lo.Handle,className:s,style:r=void 0,children:f,color:d,minWidth:g=10,minHeight:p=10,maxWidth:h=Number.MAX_VALUE,maxHeight:b=Number.MAX_VALUE,keepAspectRatio:x=!1,resizeDirection:m,autoScale:S=!0,shouldResize:w,onResizeStart:N,onResize:D,onResizeEnd:j}){const H=tv(),_=typeof n=="string"?n:H,M=Xe(),A=W.useRef(null),T=l===lo.Handle,G=Oe(W.useCallback(WA(T&&S),[T,S]),$e),B=W.useRef(null),Y=i??PA[l];W.useEffect(()=>{if(!(!A.current||!_))return B.current||(B.current=N_({domNode:A.current,nodeId:_,getStoreItems:()=>{const{nodeLookup:J,transform:$,snapGrid:ie,snapToGrid:z,nodeOrigin:X,domNode:C}=M.getState();return{nodeLookup:J,transform:$,snapGrid:ie,snapToGrid:z,nodeOrigin:X,paneDomNode:C}},onChange:(J,$)=>{const{triggerNodeChanges:ie,nodeLookup:z,parentLookup:X,nodeOrigin:C}=M.getState(),k=[],I={x:J.x,y:J.y},K=z.get(_);if(K&&K.expandParent&&K.parentId){const te=K.origin??C,O=J.width??K.measured.width??0,U=J.height??K.measured.height??0,ee={id:K.id,parentId:K.parentId,rect:{width:O,height:U,..._0({x:J.x??K.position.x,y:J.y??K.position.y},{width:O,height:U},K.parentId,z,te)}},q=rd([ee],z,X,C);k.push(...q),I.x=J.x?Math.max(te[0]*O,J.x):void 0,I.y=J.y?Math.max(te[1]*U,J.y):void 0}if(I.x!==void 0&&I.y!==void 0){const te={id:_,type:"position",position:{...I}};k.push(te)}if(J.width!==void 0&&J.height!==void 0){const O={id:_,type:"dimensions",resizing:!0,setAttributes:m?m==="horizontal"?"width":"height":!0,dimensions:{width:J.width,height:J.height}};k.push(O)}for(const te of $){const O={...te,type:"position"};k.push(O)}ie(k)},onEnd:({width:J,height:$})=>{const ie={id:_,type:"dimensions",resizing:!1,dimensions:{width:J,height:$}};M.getState().triggerNodeChanges([ie])}})),B.current.update({controlPosition:Y,boundaries:{minWidth:g,minHeight:p,maxWidth:h,maxHeight:b},keepAspectRatio:x,resizeDirection:m,onResizeStart:N,onResize:D,onResizeEnd:j,shouldResize:w}),()=>{B.current?.destroy()}},[Y,g,p,h,b,x,N,D,j,w]);const se=Y.split("-");return y.jsx("div",{className:nt(["react-flow__resize-control","nodrag",...se,l,s]),ref:A,style:{...r,scale:G,...d&&{[T?"backgroundColor":"borderColor"]:d}},children:f})}W.memo(eT);const cy=n=>{let i;const l=new Set,s=(h,b)=>{const x=typeof h=="function"?h(i):h;if(!Object.is(x,i)){const m=i;i=b??(typeof x!="object"||x===null)?x:Object.assign({},i,x),l.forEach(S=>S(i,m))}},r=()=>i,g={setState:s,getState:r,getInitialState:()=>p,subscribe:h=>(l.add(h),()=>l.delete(h))},p=i=n(s,r,g);return g},tT=(n=>n?cy(n):cy),nT=n=>n;function aT(n,i=nT){const l=sl.useSyncExternalStore(n.subscribe,sl.useCallback(()=>i(n.getState()),[n,i]),sl.useCallback(()=>i(n.getInitialState()),[n,i]));return sl.useDebugValue(l),l}const iT=n=>{const i=tT(n),l=s=>aT(i,s);return Object.assign(l,i),l},oT=(n=>iT);function lT(n,i){let l;try{l=n()}catch{return}return{getItem:r=>{var f;const d=p=>p===null?null:JSON.parse(p,void 0),g=(f=l.getItem(r))!=null?f:null;return g instanceof Promise?g.then(d):d(g)},setItem:(r,f)=>l.setItem(r,JSON.stringify(f,void 0)),removeItem:r=>l.removeItem(r)}}const Vf=n=>i=>{try{const l=n(i);return l instanceof Promise?l:{then(s){return Vf(s)(l)},catch(s){return this}}}catch(l){return{then(s){return this},catch(s){return Vf(s)(l)}}}},sT=(n,i)=>(l,s,r)=>{let f={storage:lT(()=>localStorage),partialize:N=>N,version:0,merge:(N,D)=>({...D,...N}),...i},d=!1;const g=new Set,p=new Set;let h=f.storage;if(!h)return n((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${f.name}', the given storage is currently unavailable.`),l(...N)},s,r);const b=()=>{const N=f.partialize({...s()});return h.setItem(f.name,{state:N,version:f.version})},x=r.setState;r.setState=(N,D)=>(x(N,D),b());const m=n((...N)=>(l(...N),b()),s,r);r.getInitialState=()=>m;let S;const w=()=>{var N,D;if(!h)return;d=!1,g.forEach(H=>{var _;return H((_=s())!=null?_:m)});const j=((D=f.onRehydrateStorage)==null?void 0:D.call(f,(N=s())!=null?N:m))||void 0;return Vf(h.getItem.bind(h))(f.name).then(H=>{if(H)if(typeof H.version=="number"&&H.version!==f.version){if(f.migrate){const _=f.migrate(H.state,H.version);return _ instanceof Promise?_.then(M=>[!0,M]):[!0,_]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,H.state];return[!1,void 0]}).then(H=>{var _;const[M,A]=H;if(S=f.merge(A,(_=s())!=null?_:m),l(S,!0),M)return b()}).then(()=>{j?.(S,void 0),S=s(),d=!0,p.forEach(H=>H(S))}).catch(H=>{j?.(void 0,H)})};return r.persist={setOptions:N=>{f={...f,...N},N.storage&&(h=N.storage)},clearStorage:()=>{h?.removeItem(f.name)},getOptions:()=>f,rehydrate:()=>w(),hasHydrated:()=>d,onHydrate:N=>(g.add(N),()=>{g.delete(N)}),onFinishHydration:N=>(p.add(N),()=>{p.delete(N)})},f.skipHydration||w(),S||m},rT=sT,cT=["gemini-3-pro-preview","gemini-3-flash-preview","gemini-2.5-pro","gemini-2.5-flash","gemini-2.5-flash-lite","gemini-2.0-flash"],Nv=["google_search","code_execution","file_search","url_context","google_maps"],Dr=["youtube_data","google_calendar","gmail","google_drive","places_api"],ei=["gas_gmail","gas_calendar","gas_sheets","gas_drive"],$f={youtube_data:["https://www.googleapis.com/auth/youtube.readonly","https://www.googleapis.com/auth/youtube.upload"],google_calendar:["https://www.googleapis.com/auth/calendar.readonly","https://www.googleapis.com/auth/calendar.events"],gmail:["https://www.googleapis.com/auth/gmail.readonly","https://www.googleapis.com/auth/gmail.send"],google_drive:["https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.file"],places_api:[]};function Av(n){return $f[n]?.length>0}const uy={isLoggedIn:!1,accessToken:null,expiresAt:null},uT={webAppUrl:null,apiToken:null,projectId:null,syncStatus:"not_configured",lastSyncAt:null},fT=n=>{switch(n){case"start":return{label:"Start",inputVariables:[{name:"input",type:"string",description:"User input"}]};case"agent":return{label:"Agent",model:"gemini-2.5-flash",systemPrompt:"You are a helpful assistant.",temperature:.7,enabledTools:[]};case"tool":return{label:"Tool",toolType:"google_search",config:{}};case"condition":return{label:"Classify",categories:["Category 1","Category 2"],examples:[],model:"gemini-2.5-flash"};case"output":return{label:"Output",outputFormat:"text"};case"memory":return{label:"Memory",storageKey:"chat_history",maxMessages:10}}},ol={variables:{},history:[],currentNodeId:null,status:"idle"},dT={geminiApiKey:"",gcpClientId:"",gcpApiKey:"",defaultModel:"gemini-2.5-flash",theme:"dark"},gt=oT()(rT((n,i)=>({nodes:[],edges:[],workflowName:"New Workflow",workflowDescription:"",savedWorkflows:[],selectedNodeId:null,execution:ol,settings:dT,appMode:"edit",chatMessages:[],gasConfig:uT,gasAuth:uy,onNodesChange:l=>{n({nodes:Q0(l,i().nodes)})},onEdgesChange:l=>{n({edges:J0(l,i().edges)})},onConnect:l=>{n({edges:O0(l,i().edges)})},addNode:(l,s)=>{const r={id:`${l}-${Date.now()}`,type:l,position:s,data:fT(l)};n({nodes:[...i().nodes,r]})},updateNodeData:(l,s)=>{n({nodes:i().nodes.map(r=>r.id===l?{...r,data:{...r.data,...s}}:r)})},deleteNode:l=>{n({nodes:i().nodes.filter(s=>s.id!==l),edges:i().edges.filter(s=>s.source!==l&&s.target!==l),selectedNodeId:i().selectedNodeId===l?null:i().selectedNodeId})},selectNode:l=>{n({selectedNodeId:l})},saveWorkflow:()=>{const{nodes:l,edges:s,workflowName:r,workflowDescription:f,savedWorkflows:d}=i(),g=new Date().toISOString(),p=d.findIndex(b=>b.name===r),h={id:p>=0?d[p].id:`workflow-${Date.now()}`,name:r,description:f,nodes:l,edges:s,createdAt:p>=0?d[p].createdAt:g,updatedAt:g};if(p>=0){const b=[...d];b[p]=h,n({savedWorkflows:b})}else n({savedWorkflows:[...d,h]})},loadWorkflow:l=>{const s=i().savedWorkflows.find(r=>r.id===l);s&&n({nodes:s.nodes,edges:s.edges,workflowName:s.name,workflowDescription:s.description||"",selectedNodeId:null,execution:ol})},newWorkflow:()=>{n({nodes:[],edges:[],workflowName:"New Workflow",workflowDescription:"",selectedNodeId:null,execution:ol})},deleteWorkflow:l=>{n({savedWorkflows:i().savedWorkflows.filter(s=>s.id!==l)})},updateSettings:l=>{n({settings:{...i().settings,...l}})},setExecutionStatus:l=>{n({execution:{...i().execution,status:l}})},addExecutionStep:l=>{n({execution:{...i().execution,history:[...i().execution.history,l],currentNodeId:l.nodeId}})},resetExecution:()=>{n({execution:ol})},setAppMode:l=>{n({appMode:l})},addChatMessage:l=>{const s={...l,id:`msg-${Date.now()}`,timestamp:Date.now()};n({chatMessages:[...i().chatMessages,s]})},clearChatMessages:()=>{n({chatMessages:[]})},updateGasConfig:l=>{n({gasConfig:{...i().gasConfig,...l}})},setGasSyncStatus:l=>{n({gasConfig:{...i().gasConfig,syncStatus:l}})},exportWorkflow:()=>{const{nodes:l,edges:s,workflowName:r,workflowDescription:f}=i(),d=new Date().toISOString();return{id:`workflow-${Date.now()}`,name:r,description:f,nodes:l,edges:s,createdAt:d,updatedAt:d}},setGasAuth:l=>{n({gasAuth:{...i().gasAuth,...l}})},gasLogout:()=>{n({gasAuth:uy})},loadWorkflowFromGas:l=>{n({nodes:l.nodes,edges:l.edges,workflowName:l.name,workflowDescription:l.description||"",selectedNodeId:null,execution:ol})}}),{name:"gemini-agent-builder-storage",partialize:n=>({savedWorkflows:n.savedWorkflows,settings:n.settings})}));function gT({data:n,selected:i}){const l=n;return y.jsxs("div",{className:`custom-node start-node ${i?"selected":""} ${l.isExecuting?"executing":""}`,children:[y.jsxs("div",{className:"node-header",children:[y.jsx("span",{className:"node-icon",children:""}),y.jsx("span",{className:"node-title",children:l.label})]}),y.jsx("div",{className:"node-content",children:y.jsxs("div",{className:"node-info",children:[l.inputVariables?.length||0," input variable(s)"]})}),y.jsx(dt,{type:"source",position:de.Right,className:"handle source-handle"})]})}function hT({data:n,selected:i}){const l=n;return y.jsxs("div",{className:`custom-node agent-node ${i?"selected":""} ${l.isExecuting?"executing":""}`,children:[y.jsx(dt,{type:"target",position:de.Top,id:"tools",className:"handle tool-handle-target",style:{left:"50%",background:"#faa61a",borderColor:"#faa61a"}}),y.jsx("div",{className:"tool-handle-label",style:{position:"absolute",top:"-20px",left:"50%",transform:"translateX(-50%)",fontSize:"10px",color:"#faa61a",fontWeight:"bold"},children:"Tools"}),y.jsx(dt,{type:"target",position:de.Left,id:"main-input",className:"handle target-handle"}),y.jsxs("div",{className:"node-header",children:[y.jsx("span",{className:"node-icon",children:""}),y.jsx("span",{className:"node-title",children:l.label})]}),y.jsxs("div",{className:"node-content",children:[y.jsx("div",{className:"node-model",children:l.model}),y.jsxs("div",{className:"node-prompt",title:l.systemPrompt,children:[l.systemPrompt?.slice(0,50),(l.systemPrompt?.length??0)>50?"...":""]})]}),y.jsx(dt,{type:"source",position:de.Right,id:"main-output",className:"handle source-handle"}),y.jsx(dt,{type:"target",position:de.Bottom,id:"memory",className:"handle memory-handle-target",style:{left:"50%",background:"#9b59b6",borderColor:"#9b59b6"}}),y.jsx("div",{className:"memory-handle-label",style:{position:"absolute",bottom:"-20px",left:"50%",transform:"translateX(-50%)",fontSize:"10px",color:"#9b59b6",fontWeight:"bold"},children:"Memory"})]})}const pT={google_search:"",code_execution:"",file_search:"",url_context:"",google_maps:"",youtube_data:"",google_calendar:"",gmail:"",google_drive:"",places_api:"",mcp:"",function_calling:"",gas_gmail:"",gas_calendar:"",gas_sheets:"",gas_drive:""},mT={google_search:"Google Search",code_execution:"Code Execution",file_search:"File Search",url_context:"URL Context",google_maps:"Maps Grounding",youtube_data:"YouTube API",google_calendar:"Calendar",gmail:"Gmail",google_drive:"Drive",places_api:"Places API",mcp:"MCP Server",function_calling:"Function Call",gas_gmail:"GAS Gmail",gas_calendar:"GAS Calendar",gas_sheets:"GAS Sheets",gas_drive:"GAS Drive"},yT=n=>Nv.includes(n)?"gemini_builtin":Dr.includes(n)?"gcp_api":ei.includes(n)?"gas_native":"custom_mcp",vT={gemini_builtin:{bg:"rgba(88, 101, 242, 0.15)",label:" Gemini"},gcp_api:{bg:"rgba(66, 133, 244, 0.15)",label:" GCP"},custom_mcp:{bg:"rgba(250, 166, 26, 0.15)",label:" Custom"},gas_native:{bg:"rgba(52, 168, 83, 0.15)",label:" GAS"}};function xT({data:n,selected:i}){const l=n,s=yT(l.toolType),r=vT[s];return y.jsxs("div",{className:`custom-node tool-node ${i?"selected":""} ${l.isExecuting?"executing":""}`,children:[y.jsx(dt,{type:"target",position:de.Left,className:"handle target-handle"}),y.jsxs("div",{className:"node-header",children:[y.jsx("span",{className:"node-icon",children:pT[l.toolType]||""}),y.jsx("span",{className:"node-title",children:l.label})]}),y.jsxs("div",{className:"node-content",children:[y.jsx("div",{className:"node-category-badge",style:{background:r.bg,padding:"2px 6px",borderRadius:"4px",fontSize:"9px",marginBottom:"4px",display:"inline-block"},children:r.label}),y.jsx("div",{className:"node-tool-type",children:mT[l.toolType]||l.toolType}),l.config?.functionName&&y.jsxs("div",{className:"node-function-name",children:["fn: ",l.config.functionName]}),l.config?.targetUrl&&y.jsxs("div",{className:"node-url",title:l.config.targetUrl,children:[l.config.targetUrl.slice(0,30),"..."]})]}),y.jsx(dt,{type:"source",position:de.Right,id:"flow-output",className:"handle source-handle"}),y.jsx(dt,{type:"source",position:de.Bottom,id:"tool-output",className:"handle tool-handle-source",style:{left:"50%",background:"#faa61a",borderColor:"#faa61a"}})]})}function bT({data:n,selected:i}){const l=n;return y.jsxs("div",{className:`custom-node condition-node ${i?"selected":""} ${l.isExecuting?"executing":""}`,children:[y.jsx(dt,{type:"target",position:de.Left,className:"handle target-handle"}),y.jsxs("div",{className:"node-header",children:[y.jsx("span",{className:"node-icon",children:""}),y.jsx("span",{className:"node-title",children:l.label})]}),y.jsx("div",{className:"node-content",children:y.jsx("div",{className:"condition-categories",children:l.categories?.map((s,r)=>y.jsxs("div",{className:"category-item",style:{position:"relative",height:"24px",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"10px"},children:[y.jsx("span",{className:"category-label",children:s}),y.jsx(dt,{type:"source",position:de.Right,id:s,className:"handle source-handle category-handle",style:{top:"50%",right:"-8px"}})]},r))})})]})}function ST({data:n,selected:i}){const l=n;return y.jsxs("div",{className:`custom-node output-node ${i?"selected":""} ${l.isExecuting?"executing":""}`,children:[y.jsx(dt,{type:"target",position:de.Left,className:"handle target-handle"}),y.jsxs("div",{className:"node-header",children:[y.jsx("span",{className:"node-icon",children:""}),y.jsx("span",{className:"node-title",children:l.label})]}),y.jsx("div",{className:"node-content",children:y.jsxs("div",{className:"output-format",children:["Format: ",l.outputFormat?.toUpperCase()]})})]})}function wT({data:n,selected:i}){const l=n;return y.jsxs("div",{className:`custom-node memory-node ${i?"selected":""} ${l.isExecuting?"executing":""}`,children:[y.jsx(dt,{type:"target",position:de.Left,id:"main-input",className:"handle target-handle"}),y.jsxs("div",{className:"node-header",children:[y.jsx("span",{className:"node-icon",children:""}),y.jsx("span",{className:"node-title",children:l.label})]}),y.jsxs("div",{className:"node-content",children:[y.jsxs("div",{className:"memory-key",children:["Key: ",l.storageKey||"chat_history"]}),y.jsxs("div",{className:"memory-limit",children:["Max: ",l.maxMessages||10," messages"]})]}),y.jsx(dt,{type:"source",position:de.Top,id:"memory-output",className:"handle memory-handle-source",style:{left:"50%",background:"#9b59b6",borderColor:"#9b59b6"}})]})}function ET({id:n,sourceX:i,sourceY:l,targetX:s,targetY:r,sourcePosition:f,targetPosition:d,selected:g,style:p={},markerEnd:h}){const{setEdges:b}=Yr(),{appMode:x,execution:m}=gt(),S=x==="run",w=m.status==="running",[N,D,j]=ad({sourceX:i,sourceY:l,sourcePosition:f,targetX:s,targetY:r,targetPosition:d}),H=()=>{b(A=>A.filter(T=>T.id!==n))},_={...p,stroke:g?"#ffffff":"#5865f2",strokeWidth:g?3:2},M=S&&w;return y.jsxs(y.Fragment,{children:[y.jsx(jl,{path:N,markerEnd:h,style:_,className:M?"animated-edge":""}),g&&!S&&y.jsx(AA,{children:y.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${D}px,${j}px)`,pointerEvents:"all"},className:"edge-delete-button",children:y.jsx("button",{onClick:H,title:"Delete connection",children:""})})})]})}const _T={start:gT,agent:hT,tool:xT,condition:bT,output:ST,memory:wT},NT={default:ET};function AT(){const{nodes:n,edges:i,onNodesChange:l,onEdgesChange:s,onConnect:r,selectNode:f,execution:d,appMode:g}=gt(),p=g==="run",h=n.map(m=>({...m,data:{...m.data,isExecuting:d.currentNodeId===m.id}})),b=W.useCallback((m,S)=>{f(S.id)},[f]),x=W.useCallback(()=>{f(null)},[f]);return y.jsx("div",{className:"canvas-container",children:y.jsxs(_A,{nodes:h,edges:i,onNodesChange:p?void 0:l,onEdgesChange:p?void 0:s,onConnect:p?void 0:r,onNodeClick:b,onPaneClick:x,nodeTypes:_T,edgeTypes:NT,nodesDraggable:!p,nodesConnectable:!p,elementsSelectable:!p,edgesReconnectable:!p,deleteKeyCode:p?null:["Backspace","Delete"],isValidConnection:m=>m.targetHandle==="tools"?m.sourceHandle==="tool-output":m.sourceHandle==="tool-output"?m.targetHandle==="tools":m.targetHandle==="memory"?m.sourceHandle==="memory-output":m.sourceHandle==="memory-output"?m.targetHandle==="memory":!0,fitView:!0,proOptions:{hideAttribution:!0},defaultEdgeOptions:{style:{stroke:"#5865f2",strokeWidth:2},type:"default"},children:[y.jsx(DA,{variant:In.Dots,gap:20,size:1,color:"#3d3d5c"}),y.jsx(UA,{className:"canvas-controls"}),y.jsx(FA,{className:"canvas-minimap",nodeColor:m=>{switch(m.type){case"start":return"#43b581";case"agent":return"#5865f2";case"tool":return"#faa61a";case"memory":return"#9b59b6";case"condition":return"#f04747";case"output":return"#808090";default:return"#808090"}},maskColor:"rgba(0, 0, 0, 0.8)"})]})})}var fy;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(fy||(fy={}));var dy;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(dy||(dy={}));var gy;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(gy||(gy={}));const hy=["user","model","function","system"];var py;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(py||(py={}));var my;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(my||(my={}));var yy;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(yy||(yy={}));var vy;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(vy||(vy={}));var dl;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(dl||(dl={}));var xy;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(xy||(xy={}));var by;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(by||(by={}));var Sy;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Sy||(Sy={}));class mt extends Error{constructor(i){super(`[GoogleGenerativeAI Error]: ${i}`)}}class Qi extends mt{constructor(i,l){super(i),this.response=l}}class Tv extends mt{constructor(i,l,s,r){super(i),this.status=l,this.statusText=s,this.errorDetails=r}}class Ea extends mt{}class Cv extends mt{}const TT="https://generativelanguage.googleapis.com",CT="v1beta",MT="0.24.1",OT="genai-js";var oi;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(oi||(oi={}));class DT{constructor(i,l,s,r,f){this.model=i,this.task=l,this.apiKey=s,this.stream=r,this.requestOptions=f}toString(){var i,l;const s=((i=this.requestOptions)===null||i===void 0?void 0:i.apiVersion)||CT;let f=`${((l=this.requestOptions)===null||l===void 0?void 0:l.baseUrl)||TT}/${s}/${this.model}:${this.task}`;return this.stream&&(f+="?alt=sse"),f}}function jT(n){const i=[];return n?.apiClient&&i.push(n.apiClient),i.push(`${OT}/${MT}`),i.join(" ")}async function zT(n){var i;const l=new Headers;l.append("Content-Type","application/json"),l.append("x-goog-api-client",jT(n.requestOptions)),l.append("x-goog-api-key",n.apiKey);let s=(i=n.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(r){throw new Ea(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${r.message}`)}for(const[r,f]of s.entries()){if(r==="x-goog-api-key")throw new Ea(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new Ea(`Header name ${r} can only be set using the apiClient field`);l.append(r,f)}}return l}async function RT(n,i,l,s,r,f){const d=new DT(n,i,l,s,f);return{url:d.toString(),fetchOptions:Object.assign(Object.assign({},UT(f)),{method:"POST",headers:await zT(d),body:r})}}async function zl(n,i,l,s,r,f={},d=fetch){const{url:g,fetchOptions:p}=await RT(n,i,l,s,r,f);return HT(g,p,d)}async function HT(n,i,l=fetch){let s;try{s=await l(n,i)}catch(r){GT(r,n)}return s.ok||await kT(s,n),s}function GT(n,i){let l=n;throw l.name==="AbortError"?(l=new Cv(`Request aborted when fetching ${i.toString()}: ${n.message}`),l.stack=n.stack):n instanceof Tv||n instanceof Ea||(l=new mt(`Error fetching from ${i.toString()}: ${n.message}`),l.stack=n.stack),l}async function kT(n,i){let l="",s;try{const r=await n.json();l=r.error.message,r.error.details&&(l+=` ${JSON.stringify(r.error.details)}`,s=r.error.details)}catch{}throw new Tv(`Error fetching from ${i.toString()}: [${n.status} ${n.statusText}] ${l}`,n.status,n.statusText,s)}function UT(n){const i={};if(n?.signal!==void 0||n?.timeout>=0){const l=new AbortController;n?.timeout>=0&&setTimeout(()=>l.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{l.abort()}),i.signal=l.signal}return i}function ud(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),yr(n.candidates[0]))throw new Qi(`${Sa(n)}`,n);return LT(n)}else if(n.promptFeedback)throw new Qi(`Text not available. ${Sa(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),yr(n.candidates[0]))throw new Qi(`${Sa(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),wy(n)[0]}else if(n.promptFeedback)throw new Qi(`Function call not available. ${Sa(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),yr(n.candidates[0]))throw new Qi(`${Sa(n)}`,n);return wy(n)}else if(n.promptFeedback)throw new Qi(`Function call not available. ${Sa(n)}`,n)},n}function LT(n){var i,l,s,r;const f=[];if(!((l=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||l===void 0)&&l.parts)for(const d of(r=(s=n.candidates)===null||s===void 0?void 0:s[0].content)===null||r===void 0?void 0:r.parts)d.text&&f.push(d.text),d.executableCode&&f.push("\n```"+d.executableCode.language+`
`+d.executableCode.code+"\n```\n"),d.codeExecutionResult&&f.push("\n```\n"+d.codeExecutionResult.output+"\n```\n");return f.length>0?f.join(""):""}function wy(n){var i,l,s,r;const f=[];if(!((l=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||l===void 0)&&l.parts)for(const d of(r=(s=n.candidates)===null||s===void 0?void 0:s[0].content)===null||r===void 0?void 0:r.parts)d.functionCall&&f.push(d.functionCall);if(f.length>0)return f}const BT=[dl.RECITATION,dl.SAFETY,dl.LANGUAGE];function yr(n){return!!n.finishReason&&BT.includes(n.finishReason)}function Sa(n){var i,l,s;let r="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)r+="Response was blocked",!((i=n.promptFeedback)===null||i===void 0)&&i.blockReason&&(r+=` due to ${n.promptFeedback.blockReason}`),!((l=n.promptFeedback)===null||l===void 0)&&l.blockReasonMessage&&(r+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((s=n.candidates)===null||s===void 0)&&s[0]){const f=n.candidates[0];yr(f)&&(r+=`Candidate was blocked due to ${f.finishReason}`,f.finishMessage&&(r+=`: ${f.finishMessage}`))}return r}function El(n){return this instanceof El?(this.v=n,this):new El(n)}function IT(n,i,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=l.apply(n,i||[]),r,f=[];return r={},d("next"),d("throw"),d("return"),r[Symbol.asyncIterator]=function(){return this},r;function d(m){s[m]&&(r[m]=function(S){return new Promise(function(w,N){f.push([m,S,w,N])>1||g(m,S)})})}function g(m,S){try{p(s[m](S))}catch(w){x(f[0][3],w)}}function p(m){m.value instanceof El?Promise.resolve(m.value.v).then(h,b):x(f[0][2],m)}function h(m){g("next",m)}function b(m){g("throw",m)}function x(m,S){m(S),f.shift(),f.length&&g(f[0][0],f[0][1])}}const Ey=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function qT(n){const i=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),l=$T(i),[s,r]=l.tee();return{stream:VT(s),response:YT(r)}}async function YT(n){const i=[],l=n.getReader();for(;;){const{done:s,value:r}=await l.read();if(s)return ud(XT(i));i.push(r)}}function VT(n){return IT(this,arguments,function*(){const l=n.getReader();for(;;){const{value:s,done:r}=yield El(l.read());if(r)break;yield yield El(ud(s))}})}function $T(n){const i=n.getReader();return new ReadableStream({start(s){let r="";return f();function f(){return i.read().then(({value:d,done:g})=>{if(g){if(r.trim()){s.error(new mt("Failed to parse stream"));return}s.close();return}r+=d;let p=r.match(Ey),h;for(;p;){try{h=JSON.parse(p[1])}catch{s.error(new mt(`Error parsing JSON response: "${p[1]}"`));return}s.enqueue(h),r=r.substring(p[0].length),p=r.match(Ey)}return f()}).catch(d=>{let g=d;throw g.stack=d.stack,g.name==="AbortError"?g=new Cv("Request aborted when reading from the stream"):g=new mt("Error reading from the stream"),g})}}})}function XT(n){const i=n[n.length-1],l={promptFeedback:i?.promptFeedback};for(const s of n){if(s.candidates){let r=0;for(const f of s.candidates)if(l.candidates||(l.candidates=[]),l.candidates[r]||(l.candidates[r]={index:r}),l.candidates[r].citationMetadata=f.citationMetadata,l.candidates[r].groundingMetadata=f.groundingMetadata,l.candidates[r].finishReason=f.finishReason,l.candidates[r].finishMessage=f.finishMessage,l.candidates[r].safetyRatings=f.safetyRatings,f.content&&f.content.parts){l.candidates[r].content||(l.candidates[r].content={role:f.content.role||"user",parts:[]});const d={};for(const g of f.content.parts)g.text&&(d.text=g.text),g.functionCall&&(d.functionCall=g.functionCall),g.executableCode&&(d.executableCode=g.executableCode),g.codeExecutionResult&&(d.codeExecutionResult=g.codeExecutionResult),Object.keys(d).length===0&&(d.text=""),l.candidates[r].content.parts.push(d)}r++}s.usageMetadata&&(l.usageMetadata=s.usageMetadata)}return l}async function Mv(n,i,l,s){const r=await zl(i,oi.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(l),s);return qT(r)}async function Ov(n,i,l,s){const f=await(await zl(i,oi.GENERATE_CONTENT,n,!1,JSON.stringify(l),s)).json();return{response:ud(f)}}function Dv(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function _l(n){let i=[];if(typeof n=="string")i=[{text:n}];else for(const l of n)typeof l=="string"?i.push({text:l}):i.push(l);return KT(i)}function KT(n){const i={role:"user",parts:[]},l={role:"function",parts:[]};let s=!1,r=!1;for(const f of n)"functionResponse"in f?(l.parts.push(f),r=!0):(i.parts.push(f),s=!0);if(s&&r)throw new mt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!r)throw new mt("No content is provided for sending chat message.");return s?i:l}function ZT(n,i){var l;let s={model:i?.model,generationConfig:i?.generationConfig,safetySettings:i?.safetySettings,tools:i?.tools,toolConfig:i?.toolConfig,systemInstruction:i?.systemInstruction,cachedContent:(l=i?.cachedContent)===null||l===void 0?void 0:l.name,contents:[]};const r=n.generateContentRequest!=null;if(n.contents){if(r)throw new Ea("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=n.contents}else if(r)s=Object.assign(Object.assign({},s),n.generateContentRequest);else{const f=_l(n);s.contents=[f]}return{generateContentRequest:s}}function _y(n){let i;return n.contents?i=n:i={contents:[_l(n)]},n.systemInstruction&&(i.systemInstruction=Dv(n.systemInstruction)),i}function QT(n){return typeof n=="string"||Array.isArray(n)?{content:_l(n)}:n}const Ny=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],JT={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function FT(n){let i=!1;for(const l of n){const{role:s,parts:r}=l;if(!i&&s!=="user")throw new mt(`First content should be with role 'user', got ${s}`);if(!hy.includes(s))throw new mt(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(hy)}`);if(!Array.isArray(r))throw new mt("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new mt("Each Content should have at least one part");const f={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const g of r)for(const p of Ny)p in g&&(f[p]+=1);const d=JT[s];for(const g of Ny)if(!d.includes(g)&&f[g]>0)throw new mt(`Content with role '${s}' can't contain '${g}' part`);i=!0}}function Ay(n){var i;if(n.candidates===void 0||n.candidates.length===0)return!1;const l=(i=n.candidates[0])===null||i===void 0?void 0:i.content;if(l===void 0||l.parts===void 0||l.parts.length===0)return!1;for(const s of l.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}const Ty="SILENT_ERROR";class WT{constructor(i,l,s,r={}){this.model=l,this.params=s,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=i,s?.history&&(FT(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(i,l={}){var s,r,f,d,g,p;await this._sendPromise;const h=_l(i),b={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(f=this.params)===null||f===void 0?void 0:f.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(g=this.params)===null||g===void 0?void 0:g.systemInstruction,cachedContent:(p=this.params)===null||p===void 0?void 0:p.cachedContent,contents:[...this._history,h]},x=Object.assign(Object.assign({},this._requestOptions),l);let m;return this._sendPromise=this._sendPromise.then(()=>Ov(this._apiKey,this.model,b,x)).then(S=>{var w;if(Ay(S.response)){this._history.push(h);const N=Object.assign({parts:[],role:"model"},(w=S.response.candidates)===null||w===void 0?void 0:w[0].content);this._history.push(N)}else{const N=Sa(S.response);N&&console.warn(`sendMessage() was unsuccessful. ${N}. Inspect response object for details.`)}m=S}).catch(S=>{throw this._sendPromise=Promise.resolve(),S}),await this._sendPromise,m}async sendMessageStream(i,l={}){var s,r,f,d,g,p;await this._sendPromise;const h=_l(i),b={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(f=this.params)===null||f===void 0?void 0:f.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(g=this.params)===null||g===void 0?void 0:g.systemInstruction,cachedContent:(p=this.params)===null||p===void 0?void 0:p.cachedContent,contents:[...this._history,h]},x=Object.assign(Object.assign({},this._requestOptions),l),m=Mv(this._apiKey,this.model,b,x);return this._sendPromise=this._sendPromise.then(()=>m).catch(S=>{throw new Error(Ty)}).then(S=>S.response).then(S=>{if(Ay(S)){this._history.push(h);const w=Object.assign({},S.candidates[0].content);w.role||(w.role="model"),this._history.push(w)}else{const w=Sa(S);w&&console.warn(`sendMessageStream() was unsuccessful. ${w}. Inspect response object for details.`)}}).catch(S=>{S.message!==Ty&&console.error(S)}),m}}async function PT(n,i,l,s){return(await zl(i,oi.COUNT_TOKENS,n,!1,JSON.stringify(l),s)).json()}async function eC(n,i,l,s){return(await zl(i,oi.EMBED_CONTENT,n,!1,JSON.stringify(l),s)).json()}async function tC(n,i,l,s){const r=l.requests.map(d=>Object.assign(Object.assign({},d),{model:i}));return(await zl(i,oi.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:r}),s)).json()}class Cy{constructor(i,l,s={}){this.apiKey=i,this._requestOptions=s,l.model.includes("/")?this.model=l.model:this.model=`models/${l.model}`,this.generationConfig=l.generationConfig||{},this.safetySettings=l.safetySettings||[],this.tools=l.tools,this.toolConfig=l.toolConfig,this.systemInstruction=Dv(l.systemInstruction),this.cachedContent=l.cachedContent}async generateContent(i,l={}){var s;const r=_y(i),f=Object.assign(Object.assign({},this._requestOptions),l);return Ov(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},r),f)}async generateContentStream(i,l={}){var s;const r=_y(i),f=Object.assign(Object.assign({},this._requestOptions),l);return Mv(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},r),f)}startChat(i){var l;return new WT(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(l=this.cachedContent)===null||l===void 0?void 0:l.name},i),this._requestOptions)}async countTokens(i,l={}){const s=ZT(i,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),l);return PT(this.apiKey,this.model,s,r)}async embedContent(i,l={}){const s=QT(i),r=Object.assign(Object.assign({},this._requestOptions),l);return eC(this.apiKey,this.model,s,r)}async batchEmbedContents(i,l={}){const s=Object.assign(Object.assign({},this._requestOptions),l);return tC(this.apiKey,this.model,i,s)}}class nC{constructor(i){this.apiKey=i}getGenerativeModel(i,l){if(!i.model)throw new mt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Cy(this.apiKey,i,l)}getGenerativeModelFromCachedContent(i,l,s){if(!i.name)throw new Ea("Cached content must contain a `name` field.");if(!i.model)throw new Ea("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const d of r)if(l?.[d]&&i[d]&&l?.[d]!==i[d]){if(d==="model"){const g=l.model.startsWith("models/")?l.model.replace("models/",""):l.model,p=i.model.startsWith("models/")?i.model.replace("models/",""):i.model;if(g===p)continue}throw new Ea(`Different value for "${d}" specified in modelParams (${l[d]}) and cachedContent (${i[d]})`)}const f=Object.assign(Object.assign({},l),{model:i.model,tools:i.tools,toolConfig:i.toolConfig,systemInstruction:i.systemInstruction,cachedContent:i});return new Cy(this.apiKey,f,s)}}let gl=null,vr=null;function jv(n,i="gemini-2.5-flash"){try{return gl=new nC(n),vr=gl.getGenerativeModel({model:i}),!0}catch(l){return console.error("Failed to initialize Gemini:",l),!1}}async function xr(n,i,l,s){if(!vr&&!gl)throw new Error("Gemini not initialized. Call initializeGemini first.");try{const r=[];l?.functionDeclarations&&l.functionDeclarations.length>0&&r.push({functionDeclarations:l.functionDeclarations.map(S=>({name:S.name,description:S.description,parameters:S.parameters}))}),l?.codeExecution&&r.push({codeExecution:{}}),l?.googleSearch&&r.push({googleSearch:{}}),l?.googleMaps&&(console.log("[GeminiService] Google Maps tool enabled"),r.push({googleMaps:{}})),console.log("[GeminiService] Constructing request with tools:",JSON.stringify(r,null,2));let f;s?f=gl.getGenerativeModel({model:s,systemInstruction:i}):i?f=gl.getGenerativeModel({model:vr.model,systemInstruction:i}):f=vr,console.log("[GeminiService] Using model:",f.model),console.log("[GeminiService] Prompt:",n);const g=(await f.generateContent({contents:[{role:"user",parts:[{text:n}]}],tools:r.length>0?r:void 0})).response;console.log("[GeminiService] Raw API Response:",JSON.stringify(g,null,2));const p=g.candidates?.[0];if(!p)throw new Error("No response candidate received");const h={},b=p.content.parts.filter(S=>"text"in S);b.length>0&&(h.text=b.map(S=>S.text).join(`
`));const x=p.content.parts.filter(S=>"functionCall"in S);x.length>0&&(h.functionCalls=x.map(S=>({name:S.functionCall.name,args:S.functionCall.args})));const m=g.candidates?.[0]?.groundingMetadata;return m?(console.log("[GeminiService] Grounding Metadata found:",m),h.groundingMetadata={searchEntryPoint:m.searchEntryPoint,groundingChunks:m.groundingChunks}):console.log("[GeminiService] No Grounding Metadata found in response"),h}catch(r){throw console.error("Generation error:",r),r}}const Cf="gcp-oauth-state",My="https://accounts.google.com/gsi/client";let Oy=null,Mf=!1;class jr{static authState={isAuthenticated:!1,accessToken:null,expiresAt:null,grantedScopes:[]};static loadGisScript(){return Mf?Promise.resolve():new Promise((i,l)=>{if(document.querySelector(`script[src="${My}"]`)){Mf=!0,i();return}const s=document.createElement("script");s.src=My,s.async=!0,s.defer=!0,s.onload=()=>{Mf=!0,i()},s.onerror=()=>l(new Error("Failed to load Google Identity Services")),document.head.appendChild(s)})}static async initialize(i){if(!i){console.warn("[GcpAuthService] No client ID provided");return}await this.loadGisScript(),this.loadState()}static async requestAccess(i,l){if(!l)throw new Error("GCP Client ID not configured. Please add it in Settings.");return await this.loadGisScript(),new Promise((s,r)=>{Oy=window.google.accounts.oauth2.initTokenClient({client_id:l,scope:i.join(" "),callback:f=>{if(f.error){r(new Error(f.error_description||f.error));return}const d=Date.now()+f.expires_in*1e3,g=f.scope.split(" ");this.authState={isAuthenticated:!0,accessToken:f.access_token,expiresAt:d,grantedScopes:g},this.saveState(),s(f.access_token)},error_callback:f=>{r(new Error(f.message||"OAuth error"))}}),Oy.requestAccessToken({prompt:""})})}static async requestAccessForTool(i,l){const s=$f[i];if(!s||s.length===0)throw new Error(`Tool ${i} does not require OAuth`);return this.requestAccess(s,l)}static getAccessToken(){return this.authState.accessToken?this.authState.expiresAt&&Date.now()>=this.authState.expiresAt?(this.logout(),null):this.authState.accessToken:null}static isAuthenticated(){return this.getAccessToken()!==null}static hasScopes(i){return this.isAuthenticated()?i.every(l=>this.authState.grantedScopes.includes(l)):!1}static isToolAuthorized(i){const l=$f[i];return!l||l.length===0?!0:this.hasScopes(l)}static getAuthState(){return{...this.authState}}static logout(){this.authState={isAuthenticated:!1,accessToken:null,expiresAt:null,grantedScopes:[]},localStorage.removeItem(Cf)}static saveState(){try{localStorage.setItem(Cf,JSON.stringify(this.authState))}catch(i){console.warn("[GcpAuthService] Failed to save state:",i)}}static loadState(){try{const i=localStorage.getItem(Cf);if(i){const l=JSON.parse(i);l.expiresAt&&Date.now()<l.expiresAt?this.authState=l:this.logout()}}catch(i){console.warn("[GcpAuthService] Failed to load state:",i)}}}const Dy={youtube_data:{name:"search_youtube_videos",description:"Search for videos on YouTube. Used to find videos of specific topics, channels, or content types.",parameters:{type:"object",properties:{query:{type:"string",description:"Search query"},maxResults:{type:"number",description:"Max results (1-50)"}},required:["query"]}},google_calendar:{name:"list_calendar_events",description:"List events in Google Calendar. Used to view upcoming schedule or events on specific dates.",parameters:{type:"object",properties:{timeMin:{type:"string",description:"Start time (ISO 8601 format, e.g., 2024-01-01T00:00:00Z)"},timeMax:{type:"string",description:"End time (ISO 8601 format)"},maxResults:{type:"number",description:"Max results"}},required:[]}},gmail:{name:"search_gmail",description:"Search Gmail messages. Used to find emails from specific senders, with specific subjects or content.",parameters:{type:"object",properties:{query:{type:"string",description:"Search query (supports Gmail search syntax, e.g., from:xxx subject:xxx)"},maxResults:{type:"number",description:"Max results"}},required:["query"]}},google_drive:{name:"list_drive_files",description:"List files and folders in Google Drive. Used to browse cloud storage content.",parameters:{type:"object",properties:{query:{type:"string",description:"Search query (supports Drive query syntax)"},maxResults:{type:"number",description:"Max results"}},required:[]}},places_api:{name:"search_places",description:"Search for place information. Used to find restaurants, stores, attractions, etc.",parameters:{type:"object",properties:{query:{type:"string",description:"Search place query"},location:{type:"string",description:"Location coordinates (format: lat,lng)"},radius:{type:"number",description:"Search radius (meters)"}},required:["query"]}}},ll={youtube:"https://www.googleapis.com/youtube/v3",calendar:"https://www.googleapis.com/calendar/v3",gmail:"https://www.googleapis.com/gmail/v1",drive:"https://www.googleapis.com/drive/v3",places:"https://maps.googleapis.com/maps/api/place"};async function aC(n,i){const l=jr.getAccessToken();if(!l)return{error:!0,message:"Unauthorized. Please login to Google first."};const s={Authorization:`Bearer ${l}`,"Content-Type":"application/json"};try{switch(n){case"search_youtube_videos":{const r=new URL(`${ll.youtube}/search`);r.searchParams.set("part","snippet"),r.searchParams.set("type","video"),r.searchParams.set("q",i.query),r.searchParams.set("maxResults",String(i.maxResults||10));const d=await(await fetch(r.toString(),{headers:s})).json();return d.error?{error:!0,message:d.error.message}:{success:!0,videos:d.items?.map(g=>({title:g.snippet.title,description:g.snippet.description,videoId:g.id.videoId,channelTitle:g.snippet.channelTitle,publishedAt:g.snippet.publishedAt,thumbnail:g.snippet.thumbnails?.default?.url}))||[]}}case"list_calendar_events":{const r=new URL(`${ll.calendar}/calendars/primary/events`);i.timeMin&&r.searchParams.set("timeMin",i.timeMin),i.timeMax&&r.searchParams.set("timeMax",i.timeMax),r.searchParams.set("maxResults",String(i.maxResults||10)),r.searchParams.set("singleEvents","true"),r.searchParams.set("orderBy","startTime");const d=await(await fetch(r.toString(),{headers:s})).json();return d.error?{error:!0,message:d.error.message}:{success:!0,events:d.items?.map(g=>({summary:g.summary,start:g.start?.dateTime||g.start?.date,end:g.end?.dateTime||g.end?.date,location:g.location,description:g.description}))||[]}}case"search_gmail":{const r=new URL(`${ll.gmail}/users/me/messages`);r.searchParams.set("q",i.query),r.searchParams.set("maxResults",String(i.maxResults||10));const d=await(await fetch(r.toString(),{headers:s})).json();return d.error?{error:!0,message:d.error.message}:{success:!0,messages:await Promise.all((d.messages||[]).slice(0,5).map(async p=>{const b=await(await fetch(`${ll.gmail}/users/me/messages/${p.id}?format=metadata&metadataHeaders=Subject&metadataHeaders=From&metadataHeaders=Date`,{headers:s})).json(),x=m=>b.payload?.headers?.find(S=>S.name===m)?.value||"";return{id:p.id,subject:x("Subject"),from:x("From"),date:x("Date"),snippet:b.snippet}}))}}case"list_drive_files":{const r=new URL(`${ll.drive}/files`);r.searchParams.set("pageSize",String(i.maxResults||20)),r.searchParams.set("fields","files(id,name,mimeType,modifiedTime,size)"),i.query&&r.searchParams.set("q",i.query);const d=await(await fetch(r.toString(),{headers:s})).json();return d.error?{error:!0,message:d.error.message}:{success:!0,files:d.files?.map(g=>({name:g.name,id:g.id,type:g.mimeType,modifiedTime:g.modifiedTime,size:g.size}))||[]}}case"search_places":{const{settings:r}=gt.getState(),f=r.gcpApiKey;if(!f)return{error:!0,message:"Please set Places API Key in Settings first."};const d=new URL("https://places.googleapis.com/v1/places:searchText"),p=await(await fetch(d.toString(),{method:"POST",headers:{"Content-Type":"application/json","X-Goog-Api-Key":f,"X-Goog-FieldMask":"places.displayName,places.formattedAddress,places.rating,places.userRatingCount,places.types,places.googleMapsUri"},body:JSON.stringify({textQuery:i.query,maxResultCount:i.maxResults||10,...i.location&&{locationBias:{circle:{center:{latitude:parseFloat(i.location.split(",")[0]),longitude:parseFloat(i.location.split(",")[1])},radius:i.radius||5e3}}}})})).json();return p.error?{error:!0,message:p.error.message}:{success:!0,places:p.places?.map(h=>({name:h.displayName?.text,address:h.formattedAddress,rating:h.rating,ratingCount:h.userRatingCount,types:h.types,mapsUrl:h.googleMapsUri}))||[]}}default:return{error:!0,message:`Unknown function: ${n}`}}}catch(r){return{error:!0,message:r.message}}}function iC(n){return n.filter(i=>Dy[i]).map(i=>Dy[i])}const oC={async call(n,i,l){if(!l.webAppUrl)throw new Error("GAS Web App URL not configured");const s={token:l.apiToken||"",action:n,payload:i};try{const r=await fetch(l.webAppUrl,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(s)});if(!r.ok)throw new Error(`HTTP Error: ${r.status}`);const f=await r.json();if(!f.success)throw new Error(f.error||"Unknown GAS error");return f.data}catch(r){throw console.error("GAS Service Error:",r),r}},async ping(n){try{return await this.call("ping",{},n)==="pong"}catch{return!1}},async syncWorkflow(n,i){return this.call("system.sync_workflow",{workflow:n},i)},async getWorkflow(n){return this.call("system.get_workflow",{},n)},async executeTool(n,i,l){return this.call("tool.execute",{toolType:n,config:i},l)},async createCalendarEvent(n,i,l,s,r){return this.call("calendar",{action:"create_event",title:n,startTime:i,endTime:l,description:s},r)},async listCalendarEvents(n,i){return this.call("calendar",{action:"list_events",daysAhead:n},i)},async deleteCalendarEvent(n,i){return this.call("calendar",{action:"delete_event",eventId:n},i)},generateCurlCommand(n,i,l){if(!l.webAppUrl)return"Missing GAS configuration";const s={token:l.apiToken||"",action:n,payload:i};return`curl -L -X POST '${l.webAppUrl}' \\
-H 'Content-Type: text/plain;charset=utf-8' \\
-d '${JSON.stringify(s)}'`}},jy={gas_gmail:{name:"send_email_via_gas",description:"Send an email using Google Apps Script MailApp. Use this to send emails to users.",parameters:{type:"object",properties:{to:{type:"string",description:"Recipient email address"},subject:{type:"string",description:"Email subject line"},body:{type:"string",description:"Email body content (plain text)"}},required:["to","subject","body"]}},gas_calendar:{name:"manage_calendar_via_gas",description:"Manage Google Calendar events using Google Apps Script CalendarApp. Can create, list, or delete events.",parameters:{type:"object",properties:{action:{type:"string",description:"Action to perform: create_event, list_events, or delete_event"},title:{type:"string",description:"Event title (for create_event)"},startTime:{type:"string",description:"Event start time in ISO 8601 format (for create_event)"},endTime:{type:"string",description:"Event end time in ISO 8601 format (for create_event)"},description:{type:"string",description:"Event description (optional)"},daysAhead:{type:"number",description:"Number of days ahead to list events (for list_events, default: 7)"}},required:["action"]}},gas_sheets:{name:"manage_spreadsheet_via_gas",description:"Read or write data to Google Sheets using Google Apps Script SpreadsheetApp.",parameters:{type:"object",properties:{action:{type:"string",description:"Action to perform: read, write, or append"},spreadsheetId:{type:"string",description:"The ID of the Google Spreadsheet"},sheetName:{type:"string",description:"Name of the sheet tab (optional, defaults to first sheet)"},range:{type:"string",description:"Cell range in A1 notation (e.g., A1:D10)"},values:{type:"string",description:"JSON array of values to write (for write/append actions)"}},required:["action","spreadsheetId"]}},gas_drive:{name:"manage_drive_via_gas",description:"Manage files in Google Drive using Google Apps Script DriveApp. Can search, create, or list files.",parameters:{type:"object",properties:{action:{type:"string",description:"Action to perform: search, create, or list"},query:{type:"string",description:"Search query for finding files"},fileName:{type:"string",description:"Name for the new file (for create action)"},content:{type:"string",description:"Content for the new file (for create action)"},folderId:{type:"string",description:"Folder ID to create file in (optional)"}},required:["action"]}}},zv={send_email_via_gas:"gas_gmail",manage_calendar_via_gas:"gas_calendar",manage_spreadsheet_via_gas:"gas_sheets",manage_drive_via_gas:"gas_drive"};function lC(n){return n.filter(i=>jy[i]).map(i=>jy[i])}function sC(n){return n in zv}const zy={async execute(n,i,l){if(!l.webAppUrl)throw new Error("GAS Web App URL not configured. Please deploy your project first to test GAS native tools locally.");const s=i.action||this.getDefaultAction(n),r={...i,action:s};try{console.log(`[GasToolExecutor] Executing ${n} with action: ${s}`,r);const f=await oC.call("tool.execute",{toolType:n,config:r},{webAppUrl:l.webAppUrl,apiToken:l.apiToken||null,projectId:null,syncStatus:"synced",lastSyncAt:null});return console.log("[GasToolExecutor] Result:",f),f}catch(f){throw console.error("[GasToolExecutor] Execution failed:",f),f}},async executeByFunctionName(n,i,l){const s=zv[n];if(!s)throw new Error(`Unknown GAS function: ${n}`);const r=this.mapArgsToConfig(s,i);return this.execute(s,r,l)},mapArgsToConfig(n,i){switch(n){case"gas_gmail":return{action:"send",to:i.to,subject:i.subject,body:i.body};case"gas_calendar":return{action:i.action,title:i.title,startTime:i.startTime,endTime:i.endTime,description:i.description,daysAhead:i.daysAhead};case"gas_sheets":return{action:i.action,spreadsheetId:i.spreadsheetId,sheetName:i.sheetName,range:i.range,values:i.values?JSON.parse(i.values):void 0};case"gas_drive":return{action:i.action,query:i.query,fileName:i.fileName,content:i.content,folderId:i.folderId};default:return i}},getDefaultAction(n){return{gas_gmail:"send",gas_calendar:"list_events",gas_sheets:"read",gas_drive:"list"}[n]||"execute"},canTestLocally(n){return!!n},getToolDescription(n){return{gas_gmail:"Send emails using GAS MailApp/GmailApp",gas_calendar:"Manage calendar events using GAS CalendarApp",gas_sheets:"Read/write spreadsheet data using GAS SpreadsheetApp",gas_drive:"Manage files using GAS DriveApp"}[n]||"GAS native tool"}};class Rv{static isRunning=!1;static async run(i=""){if(this.isRunning)return null;const l=gt.getState(),{nodes:s,edges:r,settings:f}=l;if(!f.geminiApiKey){console.error("Gemini API Key missing"),l.setExecutionStatus("error");return}const d=s.find(g=>g.type==="start");if(!d){console.error("Start node not found"),l.setExecutionStatus("error");return}this.isRunning=!0;try{jv(f.geminiApiKey),l.resetExecution(),l.setExecutionStatus("running");let g=d;const p={user_input:i,last_output:i};let h=null;for(;g;){const b=Date.now(),x=g.type,m=await this.executeNode(g,p,r,s),S={nodeId:g.id,nodeType:x,input:{...p},output:m,startTime:b,endTime:Date.now()};l.addExecutionStep(S),m!=null&&(p[`${g.id}_output`]=m,typeof m=="string"?p.last_output=m:typeof m=="object"&&"text"in m&&(p.last_output=m.text),g.type==="output"&&(h=p.last_output||m)),g=this.getNextNode(g,r,s,m),await new Promise(w=>setTimeout(w,600))}return l.setExecutionStatus("completed"),h}catch(g){console.error("Workflow execution failed:",g),l.setExecutionStatus("error");let p="Workflow execution failed.";return g?.message&&(g.message.includes("429")||g.message.includes("quota")?p=" API quota exceeded. Please try again later (approx. 1 min) or change API Key.":g.message.includes("401")||g.message.includes("API key")?p=" Invalid API Key. Please check settings.":p=` ${g.message.slice(0,200)}`),{error:!0,message:p}}finally{this.isRunning=!1}}static async executeNode(i,l,s,r){const f=i.data;switch(i.type){case"start":return l.user_input||"Workflow started";case"agent":{const d=f,g=l.last_output||"Hello, how can you help me today?",h=s.filter(M=>M.target===i.id&&M.targetHandle==="tools").map(M=>r.find(A=>A.id===M.source)).filter(M=>M?.type==="tool"),b={codeExecution:!1,googleSearch:!1,googleMaps:!1,functionDeclarations:[]},x=[],m=[];if(h.forEach(M=>{const A=M?.data;A&&(A.toolType==="code_execution"&&(b.codeExecution=!0),A.toolType==="google_search"&&(b.googleSearch=!0),A.toolType==="google_maps"&&(b.googleMaps=!0),Dr.includes(A.toolType)&&x.push(A.toolType),ei.includes(A.toolType)&&m.push(A.toolType))}),x.length>0){const M=iC(x);b.functionDeclarations.push(...M)}if(m.length>0){const M=lC(m);b.functionDeclarations.push(...M),console.log("[WorkflowEngine] Added GAS Native function declarations:",M.map(A=>A.name))}h.length===0&&d.enabledTools&&(d.enabledTools.includes("code_execution")&&(b.codeExecution=!0),d.enabledTools.includes("google_search")&&(b.googleSearch=!0),d.enabledTools.includes("google_maps")&&(b.googleMaps=!0));const w=s.filter(M=>M.target===i.id&&M.targetHandle==="memory").map(M=>r.find(A=>A.id===M.source)).find(M=>M?.type==="memory");let N=[],D="chat_history",j=10;if(w){const M=w.data;D=M.storageKey||"chat_history",j=M.maxMessages||10;try{const A=localStorage.getItem(D);A&&(N=JSON.parse(A))}catch(A){console.warn("[WorkflowEngine] Failed to parse memory:",A)}}let H=g;N.length>0&&(H=`Previous conversation:
${N.slice(-j).map(A=>`${A.role==="user"?"User":"Assistant"}: ${A.content}`).join(`

`)}

User: ${g}`);let _=await xr(H,d.systemPrompt,b);if(_.functionCalls&&_.functionCalls.length>0){const M=[],{gasConfig:A}=gt.getState();for(const B of _.functionCalls){console.log(`[WorkflowEngine] Function call requested: ${B.name}`,B.args);let Y;if(sC(B.name)){console.log(`[WorkflowEngine] Executing GAS Native function: ${B.name}`);const se={webAppUrl:A.webAppUrl||"",apiToken:A.apiToken||void 0};if(!se.webAppUrl)Y={error:!0,message:"GAS Web App URL not configured. Please deploy your project first."};else try{Y=await zy.executeByFunctionName(B.name,B.args,se)}catch(J){Y={error:!0,message:J.message}}}else console.log(`[WorkflowEngine] Executing GCP function: ${B.name}`),Y=await aC(B.name,B.args);M.push(`Function ${B.name} result:
${JSON.stringify(Y,null,2)}`)}const T=M.join(`

`),G=`${H}

[System] API call executed, results start:
${T}

Please answer the user's question based on the API results above.`;_=await xr(G,d.systemPrompt,{codeExecution:!1,googleSearch:!1,googleMaps:!1,functionDeclarations:[]})}if(w){N.push({role:"user",content:g}),N.push({role:"assistant",content:_.text||""});const M=N.slice(-(j*2));try{localStorage.setItem(D,JSON.stringify(M))}catch(A){console.warn("[WorkflowEngine] Failed to save memory:",A)}}return _}case"condition":{const d=f,g=String(l[d.inputVariable||"last_output"]||"");let p=`You are a text classifier. Classify the following input into one of these categories: ${d.categories?.join(", ")}.
`;p+=`Return ONLY the exact category name. Do not explain. If it doesn't fit any, return "Unclassified".

`,d.examples&&d.examples.length>0&&(p+=`Examples:
`,d.examples.forEach(h=>{p+=`Input: "${h.text}"
Category: ${h.category}
`}),p+=`
`),p+=`Input: "${g}"
Category:`;try{const b=(await xr(p,void 0,void 0,d.model||"gemini-2.5-flash")).text?.trim()||"Unclassified";return d.categories?.find(m=>m.toLowerCase()===b.toLowerCase())||"Unclassified"}catch(h){return console.error("Classification failed",h),"Error"}}case"tool":{const d=f;if(ei.includes(d.toolType)){const{gasConfig:g}=gt.getState(),p={webAppUrl:g.webAppUrl||"",apiToken:g.apiToken||void 0};try{return await zy.execute(d.toolType,{...d.config,input:l.last_output},p)}catch(h){return{error:!0,message:h.message}}}return d.toolType==="google_maps"?{tool:"google_maps",status:"configured",description:"Google Maps Grounding enabled"}:d.toolType==="mcp"?{tool:"mcp",status:"configured",server:d.config?.mcpServerUrl}:{status:"success",tool:d.toolType,message:`Executed ${d.label}`}}case"output":return{format:f.outputFormat,content:l.last_output||"No content generated"};default:return null}}static getNextNode(i,l,s,r){if(i.type==="condition"){const p=r,h=l.find(b=>b.source===i.id&&b.sourceHandle===p);if(!h){console.log(`[Flow] No edge for category: ${p}`);return}return s.find(b=>b.id===h.target)}const f=l.find(p=>p.source===i.id);if(f)return s.find(p=>p.id===f.target);const d=["start","agent","tool","condition","output"],g=d.indexOf(i.type);if(g>=0&&g<d.length-1)for(let p=g+1;p<d.length;p++){const h=d[p],b=s.find(x=>x.type===h);if(b)return console.log(`[Fallback] No edge from ${i.type}, using ${h} node`),b}}}const rC=`You are a workflow generator AI. Your job is to convert natural language descriptions into workflow graphs.

## Available Node Types:
- "start": Entry point. Has inputVariables array.
- "agent": Core LLM processing. Has model (GeminiModel), systemPrompt (string), temperature (number).
- "tool": External tool execution. Has toolType and config.
- "condition": Classification/branching. Has categories array, model, examples array.
- "output": Final output. Has outputFormat ("text" | "json" | "markdown").
- "memory": Conversation history. Has storageKey, maxMessages.

## Available Tool Types:
### Gemini Built-in (no auth required):
- "google_search": Search the web
- "code_execution": Execute Python code
- "url_context": Read content from URLs
- "google_maps": Location and maps data

### GCP APIs (require OAuth):
- "youtube_data": YouTube video search and data
- "google_calendar": Calendar events
- "gmail": Email access
- "google_drive": Drive file access
- "places_api": Places/Business info

## GeminiModel options:
"gemini-2.5-flash", "gemini-2.5-pro", "gemini-3-flash-preview", "gemini-3-pro-preview"

## CRITICAL: Node Handle IDs for Edges
Each node has specific connection points (handles). You MUST use the correct sourceHandle and targetHandle in edges:

### Start Node:
- Source: right side (no id needed, omit sourceHandle)

### Agent Node:
- Target "main-input": left side (for main flow from start/other agents)
- Target "tools": top (for tool connections)
- Target "memory": bottom (for memory connections)
- Source "main-output": right side (for output to next node)

### Tool Node:
- Target: left side (no id needed, omit targetHandle)
- Source "tool-output": bottom (connects to agent's "tools" handle)  USE THIS FOR TOOLAGENT
- Source "flow-output": right side (for sequential flow)

### Output Node:
- Target: left side (no id needed, omit targetHandle)

### Memory Node:
- Target "main-input": left side
- Source "memory-output": top (connects to agent's "memory" handle)

## Output Format:
Return ONLY valid JSON (no markdown, no explanation):
{
  "nodes": [
    {
      "id": "node_1",
      "type": "start" | "agent" | "tool" | "condition" | "output" | "memory",
      "position": { "x": number, "y": number },
      "data": { ... node specific data ... }
    }
  ],
  "edges": [
    {
      "id": "edge_1",
      "source": "source_node_id",
      "target": "target_node_id",
      "sourceHandle": "handle_id_or_omit",
      "targetHandle": "handle_id_or_omit"
    }
  ]
}

## Position Guidelines:
- Start node at x: 100, y: 150
- Agent node at x: 350, y: 150
- Tool nodes ABOVE agent at x: 350, y: 0 (for tools handle on top)
- Memory nodes BELOW agent at x: 350, y: 300 (for memory handle on bottom)
- Output node at x: 600, y: 150

## Example: "Search Google for AI news and summarize"
{
  "nodes": [
    { "id": "start_1", "type": "start", "position": { "x": 100, "y": 150 }, "data": { "label": "Start", "inputVariables": [{ "name": "query", "type": "string", "defaultValue": "AI news" }] }},
    { "id": "agent_1", "type": "agent", "position": { "x": 350, "y": 150 }, "data": { "label": "Search & Summarize", "model": "gemini-2.5-flash", "systemPrompt": "Search the web for the given query and provide a comprehensive summary.", "temperature": 0.7 }},
    { "id": "tool_1", "type": "tool", "position": { "x": 350, "y": 0 }, "data": { "label": "Google Search", "toolType": "google_search", "config": {} }},
    { "id": "output_1", "type": "output", "position": { "x": 600, "y": 150 }, "data": { "label": "Output", "outputFormat": "markdown" }}
  ],
  "edges": [
    { "id": "e1", "source": "start_1", "target": "agent_1", "targetHandle": "main-input" },
    { "id": "e2", "source": "tool_1", "sourceHandle": "tool-output", "target": "agent_1", "targetHandle": "tools" },
    { "id": "e3", "source": "agent_1", "sourceHandle": "main-output", "target": "output_1" }
  ]
}`;async function cC(n,i="gemini-2.5-flash"){const{settings:l}=gt.getState();if(!l.geminiApiKey)throw new Error("Gemini API key not configured. Please add it in Settings.");jv(l.geminiApiKey,i);const s=`Generate a workflow for: "${n}"

Remember: Return ONLY valid JSON, no markdown code blocks, no explanations.`;try{const r=await xr(s,rC,void 0,i);if(!r.text)throw new Error("No response from Gemini");let f=r.text.trim();f.startsWith("```")&&(f=f.replace(/^```(?:json)?\n?/,"").replace(/\n?```$/,""));const d=JSON.parse(f);if(!d.nodes||!Array.isArray(d.nodes))throw new Error("Invalid workflow: missing nodes array");if(!d.edges||!Array.isArray(d.edges))throw new Error("Invalid workflow: missing edges array");d.nodes=d.nodes.map((p,h)=>({...p,id:p.id||`generated_${h}`,position:p.position||{x:100+h*230,y:150},data:{...p.data,label:p.data?.label||`Node ${h+1}`}}));const g=new Map;return d.nodes.forEach(p=>{g.set(p.id,p.type)}),d.edges=d.edges.map((p,h)=>{const b=g.get(p.source),x=g.get(p.target);let m=p.sourceHandle,S=p.targetHandle;return b==="tool"&&x==="agent"?(m="tool-output",S="tools"):b==="start"&&x==="agent"?(m=void 0,S="main-input"):b==="agent"&&(x==="output"||x==="condition")?(m="main-output",S=void 0):b==="agent"&&x==="agent"?(m="main-output",S="main-input"):b==="memory"&&x==="agent"?(m="memory-output",S="memory"):b==="start"&&(m=void 0,S=x==="memory"?"main-input":void 0),{...p,id:p.id||`edge_${h}`,sourceHandle:m,targetHandle:S}}),console.log("[WorkflowGenerator] Generated workflow:",d),d}catch(r){throw console.error("[WorkflowGenerator] Generation failed:",r),r instanceof SyntaxError?new Error("Failed to parse AI response. Please try again with a clearer description."):r}}function uC(n){gt.setState({nodes:n.nodes,edges:n.edges,selectedNodeId:null}),console.log("[WorkflowGenerator] Applied workflow with",n.nodes.length,"nodes and",n.edges.length,"edges")}const fC=`/**
 * G8N - GAS Backend Entry Point
 * Handles HTTP requests and routing
 */

/**
 * Handle GET requests - serve the Test Dialog HTML
 */
function doGet(e) {
  return HtmlService.createHtmlOutputFromFile('TestDialog')
    .setTitle('G8N Workflow Test')
    .setXFrameOptionsMode(HtmlService.XFrameOptionsMode.ALLOWALL);
}

/**
 * Handle POST requests - process workflow actions
 */
function doPost(e) {
  try {
    const data = JSON.parse(e.postData.contents);

    // Check if this is a workflow run request
    if (data.action === 'workflow.run') {
      const result = WorkflowRunner.run(
        data.payload.input,
        data.payload.triggerType || 'webhook',
        data.payload.triggerMeta || {}
      );
      return ContentService.createTextOutput(JSON.stringify(result))
        .setMimeType(ContentService.MimeType.JSON);
    }

    // Otherwise use Router for other actions
    const result = Router.dispatch(data);

    return ContentService.createTextOutput(JSON.stringify({
      success: true,
      data: result
    })).setMimeType(ContentService.MimeType.JSON);

  } catch (error) {
    return ContentService.createTextOutput(JSON.stringify({
      success: false,
      error: error.toString()
    })).setMimeType(ContentService.MimeType.JSON);
  }
}

/**
 * Ping function for connection testing
 */
function ping() {
  return 'pong';
}
`,dC=`/**
 * G8N - GAS Router
 * Dispatches actions to appropriate handlers
 */

const Router = {
    dispatch(request) {
        const { action, payload, token } = request;

        // Token validation
        const storedToken = PropertiesService.getScriptProperties().getProperty('API_TOKEN');
        if (storedToken && token !== storedToken) {
            throw new Error('Unauthorized: Invalid API Token');
        }

        switch (action) {
            case 'ping':
                return 'pong';

            // Workflow actions
            case 'workflow.run':
                return WorkflowRunner.run(
                    payload.input,
                    payload.triggerType || 'manual',
                    payload.triggerMeta || {}
                );

            case 'system.sync_workflow':
                return Engine.syncWorkflow(payload.workflow);

            case 'system.get_workflow':
                return Engine.getWorkflow();

            // API Key management
            case 'system.set_api_key':
                PropertiesService.getScriptProperties().setProperty('GEMINI_API_KEY', payload.apiKey);
                return { success: true };

            case 'system.get_settings':
                const apiKey = PropertiesService.getScriptProperties().getProperty('GEMINI_API_KEY');
                return {
                    hasApiKey: !!apiKey,
                    keyPreview: apiKey ? apiKey.substring(0, 8) + '...' : null
                };

            case 'tool.execute':
                return Engine.executeTool(payload.toolType, payload.config);

            // Tool-specific shortcuts
            case 'calendar':
                return Engine.executeTool('calendar', payload);

            case 'sheets':
                return Engine.executeTool('sheets', payload);

            case 'gmail':
                return Engine.executeTool('gmail', payload);

            case 'drive':
                return Engine.executeTool('drive', payload);

            default:
                throw new Error(\`Unknown action: \${action}\`);
        }
    }
};
`,gC=`/**
 * G8N - GAS Engine
 * Handles workflow storage and tool execution
 */

const Engine = {
    /**
     * Save workflow definition to Script Properties or Drive
     */
    syncWorkflow(workflow) {
        const json = JSON.stringify(workflow);

        // GAS Properties have 9KB limit per property
        if (json.length > 9000) {
            // Fallback to Drive storage
            const filename = \`g8n_workflow_\${workflow.id}.json\`;
            const files = DriveApp.getFilesByName(filename);

            if (files.hasNext()) {
                const file = files.next();
                file.setContent(json);
            } else {
                DriveApp.createFile(filename, json, MimeType.PLAIN_TEXT);
            }

            return { storage: 'drive', id: workflow.id };
        } else {
            PropertiesService.getScriptProperties().setProperty('CURRENT_WORKFLOW', json);
            return { storage: 'properties', id: workflow.id };
        }
    },

    /**
     * Get current workflow
     */
    getWorkflow() {
        const json = PropertiesService.getScriptProperties().getProperty('CURRENT_WORKFLOW');
        return json ? JSON.parse(json) : null;
    },

    /**
     * Execute a specific tool
     */
    executeTool(toolType, config) {
        switch (toolType) {
            case 'calendar':
            case 'gas_calendar':
                return Tools.calendar(config);
            case 'sheets':
            case 'gas_sheets':
                return Tools.sheets(config);
            case 'gmail':
            case 'gas_gmail':
                return Tools.gmail(config);
            case 'drive':
            case 'gas_drive':
                return Tools.drive(config);
            default:
                throw new Error(\`Tool type not supported in GAS: \${toolType}\`);
        }
    },

    /**
     * Memory Management
     */
    memory: {
        get(key) {
            const props = PropertiesService.getScriptProperties();
            const value = props.getProperty(key);
            try {
                return value ? JSON.parse(value) : null;
            } catch (e) {
                console.error('Error parsing memory key ' + key, e);
                return null;
            }
        },

        set(key, value) {
            const props = PropertiesService.getScriptProperties();
            if (value === null || value === undefined) {
                props.deleteProperty(key);
            } else {
                props.setProperty(key, JSON.stringify(value));
            }
            return true;
        }
    }
};

/**
 * Tool Implementations
 */
const Tools = {
    /**
     * Google Calendar operations
     */
    calendar(config) {
        const { action, title, startTime, endTime, description, calendarId, eventId } = config;
        const calendar = calendarId
            ? CalendarApp.getCalendarById(calendarId)
            : CalendarApp.getDefaultCalendar();

        if (!calendar) {
            throw new Error('Calendar not found');
        }

        switch (action) {
            case 'create_event':
                if (!title || !startTime || !endTime) {
                    throw new Error('Missing required fields: title, startTime, endTime');
                }
                const newEvent = calendar.createEvent(
                    title,
                    new Date(startTime),
                    new Date(endTime),
                    { description: description || '' }
                );
                return {
                    success: true,
                    eventId: newEvent.getId(),
                    title: newEvent.getTitle(),
                    startTime: newEvent.getStartTime().toISOString(),
                    endTime: newEvent.getEndTime().toISOString()
                };

            case 'list_events':
                const now = new Date();
                const future = new Date(now.getTime() + (config.daysAhead || 7) * 86400000);
                const events = calendar.getEvents(now, future);
                return events.map(e => ({
                    id: e.getId(),
                    title: e.getTitle(),
                    startTime: e.getStartTime().toISOString(),
                    endTime: e.getEndTime().toISOString(),
                    description: e.getDescription()
                }));

            case 'delete_event':
                if (!eventId) {
                    throw new Error('Missing eventId');
                }
                const eventToDelete = calendar.getEventById(eventId);
                if (eventToDelete) {
                    eventToDelete.deleteEvent();
                    return { success: true, message: 'Event deleted' };
                }
                throw new Error('Event not found');

            case 'update_event':
                if (!eventId) {
                    throw new Error('Missing eventId');
                }
                const eventToUpdate = calendar.getEventById(eventId);
                if (!eventToUpdate) {
                    throw new Error('Event not found');
                }
                if (title) eventToUpdate.setTitle(title);
                if (description) eventToUpdate.setDescription(description);
                if (startTime && endTime) {
                    eventToUpdate.setTime(new Date(startTime), new Date(endTime));
                }
                return {
                    success: true,
                    eventId: eventToUpdate.getId(),
                    title: eventToUpdate.getTitle()
                };

            default:
                // Default: list upcoming events
                const defaultEvents = calendar.getEvents(new Date(), new Date(Date.now() + 7 * 86400000));
                return defaultEvents.map(e => ({
                    id: e.getId(),
                    title: e.getTitle(),
                    startTime: e.getStartTime().toISOString(),
                    endTime: e.getEndTime().toISOString()
                }));
        }
    },

    /**
     * Google Sheets operations (placeholder for future)
     */
    sheets(config) {
        const { spreadsheetId, sheetName, action, range, values } = config;

        if (!spreadsheetId) {
            throw new Error('Missing spreadsheetId');
        }

        const ss = SpreadsheetApp.openById(spreadsheetId);
        const sheet = sheetName ? ss.getSheetByName(sheetName) : ss.getSheets()[0];

        if (!sheet) {
            throw new Error(\`Sheet \${sheetName} not found\`);
        }

        switch (action) {
            case 'read':
                const dataRange = range ? sheet.getRange(range) : sheet.getDataRange();
                return dataRange.getValues();

            case 'append':
                if (!values) throw new Error('Missing values');
                sheet.appendRow(Array.isArray(values) ? values : [values]);
                return { success: true, message: 'Row appended' };

            case 'write':
                if (!range || !values) throw new Error('Missing range or values');
                sheet.getRange(range).setValues(values);
                return { success: true, message: 'Data written' };

            default:
                return sheet.getDataRange().getValues();
        }
    },

    /**
     * Gmail operations (placeholder for future)
     */
    gmail(config) {
        const { to, subject, body, action } = config;

        switch (action) {
            case 'send':
                if (!to || !subject || !body) {
                    throw new Error('Missing required fields: to, subject, body');
                }
                GmailApp.sendEmail(to, subject, body);
                return { success: true, message: 'Email sent' };

            case 'list_drafts':
                const drafts = GmailApp.getDrafts();
                return drafts.slice(0, 10).map(d => ({
                    id: d.getId(),
                    subject: d.getMessage().getSubject()
                }));

            default:
                throw new Error('Invalid Gmail action');
        }
    },

    /**
     * Google Drive operations (placeholder for future)
     */
    drive(config) {
        const { action, query, fileName, content, folderId } = config;

        switch (action) {
            case 'search':
                const files = DriveApp.searchFiles(query || 'trashed = false');
                const results = [];
                while (files.hasNext() && results.length < 10) {
                    const f = files.next();
                    results.push({
                        name: f.getName(),
                        id: f.getId(),
                        url: f.getUrl(),
                        mimeType: f.getMimeType()
                    });
                }
                return results;

            case 'create':
                if (!fileName || !content) {
                    throw new Error('Missing fileName or content');
                }
                const folder = folderId ? DriveApp.getFolderById(folderId) : DriveApp.getRootFolder();
                const file = folder.createFile(fileName, content);
                return {
                    id: file.getId(),
                    url: file.getUrl(),
                    name: file.getName()
                };

            default:
                throw new Error('Invalid Drive action');
        }
    }
};
`,hC=`/**
 * G8N - Workflow Runner
 * Decoupled execution logic that can be triggered from multiple sources:
 * - Manual (chat dialog)
 * - Webhook (doPost)
 * - Time-driven trigger (cron)
 * - Event-driven trigger (Sheets onEdit, Form submit, etc.)
 */

// GAS Native Function Declarations for Gemini Function Calling
const GAS_NATIVE_FUNCTION_DECLARATIONS = {
    gas_gmail: {
        name: 'send_email_via_gas',
        description: 'Send an email using Google Apps Script MailApp. Use this to send emails to users.',
        parameters: {
            type: 'object',
            properties: {
                to: { type: 'string', description: 'Recipient email address' },
                subject: { type: 'string', description: 'Email subject line' },
                body: { type: 'string', description: 'Email body content (plain text)' }
            },
            required: ['to', 'subject', 'body']
        }
    },
    gas_calendar: {
        name: 'manage_calendar_via_gas',
        description: 'Manage Google Calendar events using Google Apps Script CalendarApp.',
        parameters: {
            type: 'object',
            properties: {
                action: { type: 'string', description: 'Action: create_event, list_events, or delete_event' },
                title: { type: 'string', description: 'Event title' },
                startTime: { type: 'string', description: 'Start time in ISO 8601 format' },
                endTime: { type: 'string', description: 'End time in ISO 8601 format' },
                description: { type: 'string', description: 'Event description' },
                daysAhead: { type: 'number', description: 'Days ahead for list_events' }
            },
            required: ['action']
        }
    },
    gas_sheets: {
        name: 'manage_spreadsheet_via_gas',
        description: 'Read or write data to Google Sheets.',
        parameters: {
            type: 'object',
            properties: {
                action: { type: 'string', description: 'Action: read, write, or append' },
                spreadsheetId: { type: 'string', description: 'Spreadsheet ID' },
                sheetName: { type: 'string', description: 'Sheet name' },
                range: { type: 'string', description: 'Cell range (A1 notation)' },
                values: { type: 'string', description: 'JSON array of values for write/append' }
            },
            required: ['action', 'spreadsheetId']
        }
    },
    gas_drive: {
        name: 'manage_drive_via_gas',
        description: 'Manage files in Google Drive.',
        parameters: {
            type: 'object',
            properties: {
                action: { type: 'string', description: 'Action: search, create, or list' },
                query: { type: 'string', description: 'Search query' },
                fileName: { type: 'string', description: 'File name for create' },
                content: { type: 'string', description: 'File content for create' },
                folderId: { type: 'string', description: 'Folder ID' }
            },
            required: ['action']
        }
    }
};

// Map function names back to tool types
const GAS_FUNCTION_NAME_TO_TOOL = {
    'send_email_via_gas': 'gas_gmail',
    'manage_calendar_via_gas': 'gas_calendar',
    'manage_spreadsheet_via_gas': 'gas_sheets',
    'manage_drive_via_gas': 'gas_drive'
};

// List of GAS Native tool types
const GAS_NATIVE_TOOLS = ['gas_gmail', 'gas_calendar', 'gas_sheets', 'gas_drive'];

const WorkflowRunner = {
    /**
     * Main entry point - called from any trigger source
     * @param {string} input - User input or trigger data
     * @param {string} triggerType - 'manual' | 'webhook' | 'cron' | 'sheets_edit' | 'sheets_submit' | etc.
     * @param {object} triggerMeta - Additional trigger-specific metadata
     * @returns {object} { success: boolean, output?: string, error?: string }
     */
    run(input, triggerType, triggerMeta) {
        console.log(\`[WorkflowRunner] Running with trigger: \${triggerType}\`);
        console.log(\`[WorkflowRunner] Input: \${input}\`);
        console.log(\`[WorkflowRunner] Meta: \${JSON.stringify(triggerMeta)}\`);

        try {
            // Get the workflow from storage
            const workflow = this.getWorkflow();
            if (!workflow) {
                return { success: false, error: 'No workflow configured' };
            }

            // Find start node
            const startNode = workflow.nodes.find(n => n.type === 'start');
            if (!startNode) {
                return { success: false, error: 'Workflow has no start node' };
            }

            // Build execution context
            const context = {
                input: input,
                triggerType: triggerType,
                triggerMeta: triggerMeta,
                conversationHistory: [],
                variables: {},
                currentOutput: input,
                logs: [] // Capture execution logs
            };

            // Helper to log to both console and context
            context.logger = (message) => {
                console.log(message);
                context.logs.push(\`[\${new Date().toISOString().split('T')[1].slice(0, -1)}] \${message}\`);
            };

            context.logger(\`[WorkflowRunner] Starting execution with trigger: \${triggerType}\`);
            context.logger(\`[WorkflowRunner] Input: \${input}\`);

            // Execute from start node
            const result = this.executeFromNode(workflow, startNode.id, context);

            return {
                success: true,
                output: result.output,
                executedNodes: result.executedNodes,
                logs: context.logs
            };

        } catch (error) {
            console.error('[WorkflowRunner] Error:', error);
            return { success: false, error: error.toString() };
        }
    },

    /**
     * Get workflow from storage
     */
    getWorkflow() {
        // Try G8nWorkflow.gs first (as a function)
        if (typeof getWorkflow === 'function') {
            return getWorkflow();
        }
        // Fall back to Engine storage
        return Engine.getWorkflow();
    },

    /**
     * Execute workflow starting from a specific node
     */
    executeFromNode(workflow, nodeId, context) {
        const executedNodes = [];
        const maxIterations = 100; // Safety limit
        let iterations = 0;
        let currentNodeId = nodeId;

        while (currentNodeId && iterations < maxIterations) {
            iterations++;
            const node = workflow.nodes.find(n => n.id === currentNodeId);

            if (!node) {
                context.logger(\`[WorkflowRunner] Node not found: \${currentNodeId}\`);
                break;
            }

            context.logger(\`[WorkflowRunner] Executing node: \${node.data.label || node.type} (\${node.type})\`);
            executedNodes.push(node.id);

            // Execute node based on type
            const result = this.executeNode(node, context, workflow);

            if (result.output !== undefined && typeof result.output !== 'object') {
                context.logger(\`[WorkflowRunner] Node Output: \${String(result.output).substring(0, 100)}\${String(result.output).length > 100 ? '...' : ''}\`);
            }

            // Update context with output
            context.currentOutput = result.output;

            // Get next node
            if (result.nextNodeId) {
                currentNodeId = result.nextNodeId;
            } else {
                // Find connected edge
                const edge = workflow.edges.find(e => e.source === node.id);
                currentNodeId = edge ? edge.target : null;
            }

            // Terminal node
            if (node.type === 'output') {
                break;
            }
        }

        return {
            output: context.currentOutput,
            executedNodes: executedNodes
        };
    },

    /**
     * Execute a single node
     */
    executeNode(node, context, workflow) {
        switch (node.type) {
            case 'start':
                return { output: context.input };

            case 'agent':
                return this.executeAgentNode(node, context, workflow);

            case 'tool':
                return this.executeToolNode(node, context);

            case 'condition':
                return this.executeConditionNode(node, context, workflow);

            case 'output':
                return { output: context.currentOutput };

            default:
                return { output: context.currentOutput };
        }
    },

    /**
     * Execute Agent node - calls Gemini API with function calling support
     */
    executeAgentNode(node, context, workflow) {
        const systemPrompt = node.data.systemPrompt || '';
        const prompt = context.currentOutput;
        const model = node.data.model || 'gemini-2.5-flash';

        // Build conversation context
        let fullPrompt = prompt;
        if (context.conversationHistory.length > 0) {
            const history = context.conversationHistory
                .map(m => \`\${m.role === 'user' ? 'User' : 'Assistant'}: \${m.content}\`)
                .join('\\n');
            fullPrompt = \`\${history}\\nUser: \${prompt}\`;
        }

        // Collect connected GAS Native tools
        const toolEdges = workflow.edges.filter(e => e.target === node.id && e.targetHandle === 'tools');
        const connectedToolNodes = toolEdges
            .map(e => workflow.nodes.find(n => n.id === e.source))
            .filter(n => n && n.type === 'tool');

        const functionDeclarations = [];
        connectedToolNodes.forEach(toolNode => {
            const toolType = toolNode.data.toolType;
            if (GAS_NATIVE_TOOLS.includes(toolType) && GAS_NATIVE_FUNCTION_DECLARATIONS[toolType]) {
                functionDeclarations.push(GAS_NATIVE_FUNCTION_DECLARATIONS[toolType]);
            }
        });

        if (functionDeclarations.length > 0) {
            context.logger(\`[Agent] Has \${functionDeclarations.length} GAS tools available: \${functionDeclarations.map(f => f.name).join(', ')}\`);
        }

        // Call Gemini with function declarations
        let result = this.callGeminiWithTools(fullPrompt, systemPrompt, model, functionDeclarations, context);

        // Handle function calls if present
        if (result.functionCalls && result.functionCalls.length > 0) {
            const functionResults = [];

            for (const fc of result.functionCalls) {
                context.logger(\`[Agent] Executing function: \${fc.name}\`);
                const toolType = GAS_FUNCTION_NAME_TO_TOOL[fc.name];

                if (toolType) {
                    try {
                        // Map args to tool config
                        const config = this.mapFunctionArgsToConfig(toolType, fc.args);
                        const toolResult = Engine.executeTool(toolType, config);
                        functionResults.push(\`Function \${fc.name} result:\\n\${JSON.stringify(toolResult, null, 2)}\`);
                        context.logger(\`[Agent] Function \${fc.name} succeeded\`);
                    } catch (error) {
                        functionResults.push(\`Function \${fc.name} error: \${error.toString()}\`);
                        context.logger(\`[Agent] Function \${fc.name} failed: \${error.toString()}\`);
                    }
                } else {
                    functionResults.push(\`Unknown function: \${fc.name}\`);
                }
            }

            // Generate follow-up response with function results
            const functionContext = functionResults.join('\\n\\n');
            const followUpPrompt = \`\${fullPrompt}\\n\\n[System] Function executed, results:\\n\${functionContext}\\n\\nPlease respond to the user based on the results above.\`;

            result = this.callGemini(followUpPrompt, systemPrompt, model);
        } else {
            // No function calls, use the text response directly
            result = result.text || result;
        }

        // Update conversation history
        context.conversationHistory.push(
            { role: 'user', content: String(prompt) },
            { role: 'model', content: String(result) }
        );

        return { output: result };
    },

    /**
     * Map function call args to tool config
     */
    mapFunctionArgsToConfig(toolType, args) {
        switch (toolType) {
            case 'gas_gmail':
                return { action: 'send', to: args.to, subject: args.subject, body: args.body };
            case 'gas_calendar':
                return { action: args.action, title: args.title, startTime: args.startTime, endTime: args.endTime, description: args.description, daysAhead: args.daysAhead };
            case 'gas_sheets':
                return { action: args.action, spreadsheetId: args.spreadsheetId, sheetName: args.sheetName, range: args.range, values: args.values ? JSON.parse(args.values) : undefined };
            case 'gas_drive':
                return { action: args.action, query: args.query, fileName: args.fileName, content: args.content, folderId: args.folderId };
            default:
                return args;
        }
    },

    /**
     * Execute Tool node
     */
    executeToolNode(node, context) {
        const toolType = node.data.toolType || 'unknown';
        const config = node.data.config || {};

        // Add current context to config
        config.input = context.currentOutput;

        try {
            const result = Engine.executeTool(toolType, config);
            return { output: typeof result === 'string' ? result : JSON.stringify(result) };
        } catch (error) {
            return { output: \`Tool error: \${error.toString()}\` };
        }
    },

    /**
     * Execute Condition node
     */
    executeConditionNode(node, context, workflow) {
        // For now, just go to first category
        // TODO: Implement LLM-based classification
        const edges = workflow.edges.filter(e => e.source === node.id);

        if (edges.length > 0) {
            return {
                output: context.currentOutput,
                nextNodeId: edges[0].target
            };
        }

        return { output: context.currentOutput };
    },

    /**
     * Call Gemini API
     */
    callGemini(prompt, systemPrompt, model) {
        const apiKey = this.getApiKey();
        if (!apiKey) {
            throw new Error('Gemini API Key not configured. Please sync from Gemini Agent Builder.');
        }

        const url = \`https://generativelanguage.googleapis.com/v1beta/models/\${model}:generateContent?key=\${apiKey}\`;

        const payload = {
            contents: [{ role: 'user', parts: [{ text: prompt }] }]
        };

        if (systemPrompt) {
            payload.systemInstruction = { parts: [{ text: systemPrompt }] };
        }

        const options = {
            method: 'post',
            contentType: 'application/json',
            payload: JSON.stringify(payload),
            muteHttpExceptions: true
        };

        const response = UrlFetchApp.fetch(url, options);
        const data = JSON.parse(response.getContentText());

        if (data.error) {
            throw new Error(data.error.message || 'Gemini API error');
        }

        const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
        if (!text) {
            throw new Error('No response from Gemini');
        }

        return text;
    },

    /**
     * Call Gemini API with function declarations (for function calling)
     */
    callGeminiWithTools(prompt, systemPrompt, model, functionDeclarations, context) {
        const apiKey = this.getApiKey();
        if (!apiKey) {
            throw new Error('Gemini API Key not configured. Please sync from Gemini Agent Builder.');
        }

        const url = \`https://generativelanguage.googleapis.com/v1beta/models/\${model}:generateContent?key=\${apiKey}\`;

        const payload = {
            contents: [{ role: 'user', parts: [{ text: prompt }] }]
        };

        if (systemPrompt) {
            payload.systemInstruction = { parts: [{ text: systemPrompt }] };
        }

        // Add function declarations if provided
        if (functionDeclarations && functionDeclarations.length > 0) {
            payload.tools = [{
                functionDeclarations: functionDeclarations
            }];
            context.logger(\`[Gemini] Sending request with \${functionDeclarations.length} function declarations\`);
        }

        const options = {
            method: 'post',
            contentType: 'application/json',
            payload: JSON.stringify(payload),
            muteHttpExceptions: true
        };

        const response = UrlFetchApp.fetch(url, options);
        const data = JSON.parse(response.getContentText());

        if (data.error) {
            throw new Error(data.error.message || 'Gemini API error');
        }

        const candidate = data.candidates?.[0];
        if (!candidate) {
            throw new Error('No candidates in Gemini response');
        }

        // Check for function calls
        const parts = candidate.content?.parts || [];
        const functionCalls = [];
        let textResponse = '';

        for (const part of parts) {
            if (part.functionCall) {
                functionCalls.push({
                    name: part.functionCall.name,
                    args: part.functionCall.args || {}
                });
            }
            if (part.text) {
                textResponse += part.text;
            }
        }

        if (functionCalls.length > 0) {
            context.logger(\`[Gemini] Received \${functionCalls.length} function call(s): \${functionCalls.map(f => f.name).join(', ')}\`);
            return { functionCalls, text: textResponse };
        }

        return { text: textResponse, functionCalls: [] };
    },

    /**
     * Get Gemini API Key from properties
     */
    getApiKey() {
        return PropertiesService.getScriptProperties().getProperty('GEMINI_API_KEY');
    }
};

// ============================================
// Global Functions (called from HTML/triggers)
// ============================================

/**
 * Run workflow - called from TestDialog.html
 */
function runWorkflow(input, triggerType, triggerMeta) {
    return WorkflowRunner.run(input, triggerType, triggerMeta || {});
}

/**
 * Check settings - called from TestDialog.html
 */
function checkSettings() {
    const apiKey = PropertiesService.getScriptProperties().getProperty('GEMINI_API_KEY');
    return {
        hasKey: !!apiKey,
        keyPreview: apiKey ? apiKey.substring(0, 8) + '...' : null
    };
}

/**
 * Set Gemini API Key - called from frontend sync
 */
function setGeminiApiKey(apiKey) {
    PropertiesService.getScriptProperties().setProperty('GEMINI_API_KEY', apiKey);
    return { success: true };
}

/**
 * Get workflow info - called from TestDialog.html
 */
function getWorkflowInfo() {
    const workflow = WorkflowRunner.getWorkflow();
    if (workflow) {
        return {
            name: workflow.name || 'Untitled Workflow',
            description: workflow.description || ''
        };
    }
    return { name: 'G8N Workflow Test', description: '' };
}
`,pC=`<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>G8N Workflow Test</title>
    <style>
        :root {
            --bg: #0f0f0f;
            --surface: #1a1a1a;
            --surface-hover: #2a2a2a;
            --primary: #6366f1;
            --primary-hover: #818cf8;
            --text: #e5e5e5;
            --text-muted: #888;
            --border: #333;
            --success: #22c55e;
            --warning: #f59e0b;
            --error: #ef4444;
            --log-bg: #111;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            padding: 12px 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--surface);
            flex-shrink: 0;
        }

        .header h1 {
            font-size: 18px;
            font-weight: 600;
        }

        .header .status {
            margin-left: auto;
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
            background: var(--success);
            color: #000;
        }

        .main {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Sidebar - Trigger Simulation */
        .sidebar {
            width: 280px;
            border-right: 1px solid var(--border);
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            overflow-y: auto;
            background: var(--bg);
            flex-shrink: 0;
        }

        .sidebar h2 {
            font-size: 12px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .trigger-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .trigger-btn:hover {
            border-color: var(--primary);
            background: var(--surface-hover);
        }

        .trigger-btn .icon {
            font-size: 18px;
        }

        .trigger-btn .label {
            flex: 1;
            text-align: left;
        }

        /* Chat Area */
        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            max-width: 85%;
            padding: 12px 16px;
            border-radius: 8px;
            line-height: 1.5;
            white-space: pre-wrap;
            font-size: 14px;
            position: relative;
        }

        .message.user {
            align-self: flex-end;
            background: var(--primary);
            color: #fff;
        }

        .message.assistant {
            align-self: flex-start;
            background: var(--surface);
            border: 1px solid var(--border);
        }

        .message.system {
            align-self: center;
            background: transparent;
            color: var(--text-muted);
            font-size: 12px;
            border: 1px dashed var(--border);
            padding: 8px 16px;
        }

        .message.error {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--error);
            color: var(--error);
            align-self: flex-start;
        }

        /* Logs Section */
        .logs-panel {
            height: 200px;
            border-top: 1px solid var(--border);
            background: var(--log-bg);
            display: flex;
            flex-direction: column;
            transition: height 0.3s ease;
        }

        .logs-panel.minimized {
            height: 32px;
        }

        .logs-header {
            padding: 6px 16px;
            height: 32px;
            display: flex;
            align-items: center;
            gap: 8px;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            user-select: none;
            background: var(--surface);
        }

        .logs-header:hover {
            background: var(--surface-hover);
        }

        .logs-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            flex: 1;
        }

        .logs-content {
            flex: 1;
            overflow-y: auto;
            padding: 8px;
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
            font-size: 11px;
            color: #9ca3af;
        }

        .log-entry {
            padding: 2px 4px;
            border-radius: 2px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .log-entry:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .log-time {
            color: #6b7280;
            margin-right: 8px;
        }

        /* Input Area */
        .input-area {
            padding: 16px 20px;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 12px;
            background: var(--bg);
        }

        .input-area input {
            flex: 1;
            padding: 10px 16px;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-size: 14px;
            outline: none;
        }

        .input-area input:focus {
            border-color: var(--primary);
        }

        .input-area button {
            padding: 10px 20px;
            background: var(--primary);
            border: none;
            border-radius: 6px;
            color: #fff;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s;
        }

        .input-area button:hover {
            background: var(--primary-hover);
        }

        .input-area button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Loading */
        .loading {
            display: flex;
            gap: 4px;
            padding: 12px 16px;
            align-self: flex-start;
        }

        .loading span {
            width: 8px;
            height: 8px;
            background: var(--text-muted);
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out;
        }

        .loading span:nth-child(1) {
            animation-delay: -0.32s;
        }

        .loading span:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes bounce {

            0%,
            80%,
            100% {
                transform: scale(0);
            }

            40% {
                transform: scale(1);
            }
        }
    </style>
</head>

<body>
    <div class="header">
        <span style="font-size: 24px;"></span>
        <h1 id="workflowTitle">G8N Workflow Test</h1>
        <div class="status" id="status">Connected</div>
    </div>

    <div class="main">
        <!-- Sidebar -->
        <div class="sidebar">
            <h2>Simulate Triggers</h2>
            <button class="trigger-btn" onclick="simulateTrigger('manual', {})">
                <span class="icon"></span>
                <span class="label">Manual Chat</span>
            </button>
            <button class="trigger-btn" onclick="simulateTrigger('webhook', {method: 'POST', body: '{}'})">
                <span class="icon"></span>
                <span class="label">Webhook POST</span>
            </button>
            <button class="trigger-btn" onclick="simulateTrigger('cron', {schedule: '0 9 * * *'})">
                <span class="icon"></span>
                <span class="label">Cron Job</span>
            </button>
            <button class="trigger-btn" onclick="simulateTrigger('sheets_edit', {range: 'A1', value: 'New Value'})">
                <span class="icon"></span>
                <span class="label">Sheets Edit</span>
            </button>
            <button class="trigger-btn" onclick="simulateTrigger('sheets_submit', {values: ['Name', 'Email']})">
                <span class="icon"></span>
                <span class="label">Form Submit</span>
            </button>

            <div style="margin-top: auto; padding-top: 16px; border-top: 1px solid var(--border);">
                <h2 style="margin-bottom: 8px;">Settings</h2>
                <button class="trigger-btn" onclick="checkApiKey()">
                    <span class="icon"></span>
                    <span class="label">Check API Key</span>
                </button>
            </div>
        </div>

        <!-- Right Side: Chat + Logs -->
        <div class="content-area">
            <div class="chat-container">
                <div class="messages" id="messages">
                    <div class="message system">
                         Welcome! Logs will appear in the panel below during execution.
                    </div>
                </div>

                <div class="input-area">
                    <input type="text" id="input" placeholder="Type your message..." onkeypress="handleKeyPress(event)">
                    <button id="sendBtn" onclick="sendMessage()">Send</button>
                </div>
            </div>

            <!-- Logs Panel -->
            <div class="logs-panel" id="logsPanel">
                <div class="logs-header" onclick="toggleLogs()">
                    <span class="logs-title"> Execution Logs</span>
                    <span style="font-size: 12px; transform: rotate(0deg); transition: transform 0.2s;"
                        id="logsIcon"></span>
                </div>
                <div class="logs-content" id="logsContent">
                    <div class="log-entry"><span class="log-time">System</span> Ready for execution...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const messagesEl = document.getElementById('messages');
        const inputEl = document.getElementById('input');
        const sendBtn = document.getElementById('sendBtn');
        const logsPanel = document.getElementById('logsPanel');
        const logsContent = document.getElementById('logsContent');
        const logsIcon = document.getElementById('logsIcon');

        function toggleLogs() {
            logsPanel.classList.toggle('minimized');
            logsIcon.style.transform = logsPanel.classList.contains('minimized') ? 'rotate(180deg)' : 'rotate(0deg)';
        }

        function addLog(message) {
            const div = document.createElement('div');
            div.className = 'log-entry';

            // Highlight specific log types
            if (message.includes('Error')) div.style.color = '#ef4444';
            if (message.includes('Executing node')) div.style.color = '#6366f1';

            div.textContent = message;
            logsContent.appendChild(div);
            logsContent.scrollTop = logsContent.scrollHeight;
        }

        function clearLogs() {
            logsContent.innerHTML = '';
        }

        function addMessage(content, type = 'assistant') {
            const div = document.createElement('div');
            div.className = \`message \${type}\`;
            div.textContent = content;
            messagesEl.appendChild(div);
            messagesEl.scrollTop = messagesEl.scrollHeight;
            return div;
        }

        function addLoading() {
            const div = document.createElement('div');
            div.className = 'loading';
            div.innerHTML = '<span></span><span></span><span></span>';
            messagesEl.appendChild(div);
            messagesEl.scrollTop = messagesEl.scrollHeight;
            return div;
        }

        function handleKeyPress(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        }

        function processResult(result) {
            // Display Logs
            if (result.logs && Array.isArray(result.logs)) {
                result.logs.forEach(log => addLog(log));
            }

            // Display Output or Error
            if (result.success) {
                addMessage(result.output || 'Done');
            } else {
                addMessage(result.error || 'Unknown error', 'error');
                addLog(\`ERROR: \${result.error}\`);
            }
        }

        function sendMessage() {
            const input = inputEl.value.trim();
            if (!input) return;

            addMessage(input, 'user');
            inputEl.value = '';
            sendBtn.disabled = true;

            const loading = addLoading();
            clearLogs();
            addLog(\`[Client] Sending request: \${input}\`);

            google.script.run
                .withSuccessHandler(function (result) {
                    loading.remove();
                    sendBtn.disabled = false;
                    processResult(result);
                })
                .withFailureHandler(function (error) {
                    loading.remove();
                    sendBtn.disabled = false;
                    addMessage(error.message || 'Request failed', 'error');
                    addLog(\`[Client Error] \${error.message}\`);
                })
                .runWorkflow(input, 'manual', {});
        }

        function simulateTrigger(triggerType, meta) {
            addMessage(\`[Simulating \${triggerType} trigger]\\n\${JSON.stringify(meta, null, 2)}\`, 'system');

            clearLogs();
            addLog(\`[Client] Simulating trigger: \${triggerType}\`);

            const loading = addLoading();

            let input = '';
            if (triggerType === 'manual') {
                inputEl.focus();
                loading.remove();
                return;
            } else if (triggerType === 'webhook') {
                input = '{"action": "test", "data": "Sample webhook payload"}';
            } else if (triggerType === 'cron') {
                input = 'Scheduled task triggered at ' + new Date().toISOString();
            } else if (triggerType === 'sheets_edit') {
                input = 'Cell ' + meta.range + ' changed to: ' + meta.value;
            } else if (triggerType === 'sheets_submit') {
                input = 'Form submitted with: ' + meta.values.join(', ');
            }

            google.script.run
                .withSuccessHandler(function (result) {
                    loading.remove();
                    processResult(result);
                })
                .withFailureHandler(function (error) {
                    loading.remove();
                    addMessage(error.message || 'Trigger failed', 'error');
                    addLog(\`[Client Error] \${error.message}\`);
                })
                .runWorkflow(input, triggerType, meta);
        }

        function checkApiKey() {
            clearLogs();
            addLog('[Client] Checking API Key...');
            google.script.run
                .withSuccessHandler(function (result) {
                    if (result && result.hasKey) {
                        addMessage(' Gemini API Key is configured', 'system');
                        addLog('[System] API Key present');
                    } else {
                        addMessage(' Gemini API Key is NOT configured. Please sync from Gemini Agent Builder.', 'system');
                        addLog('[System] API Key MISSING');
                    }
                })
                .withFailureHandler(function (error) {
                    addMessage('Failed to check API key: ' + error.message, 'error');
                    addLog(\`[Error] \${error.message}\`);
                })
                .checkSettings();
        }

        // Load workflow name on page load
        function loadWorkflowName() {
            google.script.run
                .withSuccessHandler(function (result) {
                    if (result && result.name) {
                        document.getElementById('workflowTitle').textContent = result.name;
                        document.title = result.name + ' - G8N Test';
                    }
                })
                .withFailureHandler(function (error) {
                    console.log('Failed to load workflow name:', error);
                })
                .getWorkflowInfo();
        }

        // Initialize on page load
        loadWorkflowName();
    <\/script>
</body>

</html>`,Qa="https://script.googleapis.com/v1",mC=JSON.stringify({timeZone:"Asia/Taipei",dependencies:{},exceptionLogging:"STACKDRIVER",runtimeVersion:"V8",oauthScopes:["https://www.googleapis.com/auth/calendar","https://www.googleapis.com/auth/spreadsheets","https://www.googleapis.com/auth/gmail.send","https://www.googleapis.com/auth/gmail.readonly","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/script.external_request"],webapp:{executeAs:"USER_DEPLOYING",access:"ANYONE_ANONYMOUS"}},null,2),fn={getGasFiles(){return[{name:"Code",type:"SERVER_JS",source:fC},{name:"Router",type:"SERVER_JS",source:dC},{name:"Engine",type:"SERVER_JS",source:gC},{name:"WorkflowRunner",type:"SERVER_JS",source:hC},{name:"TestDialog",type:"HTML",source:pC},{name:"appsscript",type:"JSON",source:mC}]},async createProject(n,i){const l=await fetch(`${Qa}/projects`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({title:n})});if(!l.ok){const r=await l.json();throw new Error(r.error?.message||"Failed to create project")}const s=await l.json();return{scriptId:s.scriptId,title:s.title}},async pushFiles(n,i,l){const s={files:i.map(f=>({name:f.name,type:f.type,source:f.source}))};console.log("[GasDeployService] Pushing files:",s.files.map(f=>({name:f.name,type:f.type,sourceLength:f.source.length})));const r=await fetch(`${Qa}/projects/${n}/content`,{method:"PUT",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok){const f=await r.json();throw console.error("[GasDeployService] pushFiles error:",f),new Error(f.error?.message||JSON.stringify(f)||"Failed to push files")}},async createVersion(n,i,l){const s=await fetch(`${Qa}/projects/${n}/versions`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({description:i})});if(!s.ok){const f=await s.json();throw new Error(f.error?.message||"Failed to create version")}return(await s.json()).versionNumber},async deployWebApp(n,i,l,s){let r;if(s?r=await fetch(`${Qa}/projects/${n}/deployments/${s}`,{method:"PUT",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({deploymentConfig:{versionNumber:i,manifestFileName:"appsscript",description:`G8N Deployment v${i}`}})}):r=await fetch(`${Qa}/projects/${n}/deployments`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({versionNumber:i,manifestFileName:"appsscript",description:`G8N Deployment v${i}`})}),!r.ok){const d=await r.json();throw console.error("[GasDeployService] deployWebApp error:",d),new Error(d.error?.message||"Failed to deploy")}const f=await r.json();return{deploymentId:f.deploymentId,version:i,webAppUrl:f.entryPoints?.find(d=>d.entryPointType==="WEB_APP")?.webApp?.url||""}},async fullDeploy(n,i,l){let s=l,r;s?r={scriptId:s,title:n}:(r=await this.createProject(n,i),s=r.scriptId);const f=this.getGasFiles();await this.pushFiles(s,f,i);const d=await this.createVersion(s,`Deployed from Gemini Agent Builder at ${new Date().toISOString()}`,i),g=await this.deployWebApp(s,d,i);return{project:r,deployment:g}},async listDeployments(n,i){const l=await fetch(`${Qa}/projects/${n}/deployments`,{headers:{Authorization:`Bearer ${i}`}});if(!l.ok){const r=await l.json();throw new Error(r.error?.message||"Failed to list deployments")}return((await l.json()).deployments||[]).map(r=>({deploymentId:r.deploymentId,version:r.deploymentConfig?.versionNumber||0,webAppUrl:r.entryPoints?.find(f=>f.entryPointType==="WEB_APP")?.webApp?.url||""}))},async listG8nProjects(n){const i=await fetch("https://www.googleapis.com/drive/v3/files?q=mimeType='application/vnd.google-apps.script' and name contains 'G8N-' and trashed=false&fields=files(id,name,createdTime,modifiedTime)",{headers:{Authorization:`Bearer ${n}`}});if(!i.ok){const s=await i.json();throw new Error(s.error?.message||"Failed to list projects")}return((await i.json()).files||[]).map(s=>({scriptId:s.id,title:s.name,createTime:s.createdTime,updateTime:s.modifiedTime}))},async getProjectContent(n,i){const l=await fetch(`${Qa}/projects/${n}/content`,{headers:{Authorization:`Bearer ${i}`}});if(!l.ok){const r=await l.json();throw new Error(r.error?.message||"Failed to get project content")}return((await l.json()).files||[]).map(r=>({name:r.name,type:r.type,source:r.source}))},async getWorkflowFromProject(n,i){const l=await this.getProjectContent(n,i),s=l.find(f=>f.name==="G8nWorkflow")||l.find(f=>f.name==="WorkflowData");if(!s)return console.log("[GasDeployService] No workflow file found. Files:",l.map(f=>f.name)),null;console.log("[GasDeployService] Found workflow file:",s.name);const r=[/const\s+WORKFLOW_DATA\s*=\s*(\{[\s\S]*\});/,/var\s+G8N_WORKFLOW\s*=\s*(\{[\s\S]*\});/];for(const f of r){const d=s.source.match(f);if(d)try{const g=JSON.parse(d[1]);return console.log("[GasDeployService] Parsed workflow:",g.name),g}catch(g){console.error("[GasDeployService] Failed to parse workflow data:",g)}}return console.log("[GasDeployService] No matching pattern found in workflow file"),null},generateWorkflowDataFile(n){const i=JSON.stringify(n,null,2);return`// G8N Workflow Data - Auto-generated, do not edit manually
// Generated by Gemini Agent Builder
// Updated: ${new Date().toISOString()}
var G8N_WORKFLOW = ${i};

function getWorkflow() {
    return G8N_WORKFLOW;
}
`},async saveWorkflowToProject(n,i,l){const s=await this.getProjectContent(n,l),f={name:"G8nWorkflow",type:"SERVER_JS",source:this.generateWorkflowDataFile(i)},g=[...s.filter(p=>p.name!=="WorkflowData"&&p.name!=="G8nWorkflow"),f];await this.pushFiles(n,g,l)},async createG8nProject(n,i,l){const s=n.startsWith("G8N-")?n:`G8N-${n}`,r=await this.createProject(s,l),f=this.getGasFiles(),d={name:"WorkflowData",type:"SERVER_JS",source:this.generateWorkflowDataFile(i)};return await this.pushFiles(r.scriptId,[...f,d],l),{scriptId:r.scriptId,title:s,createTime:new Date().toISOString(),updateTime:new Date().toISOString()}},async deleteProject(n,i){const l=await fetch(`https://www.googleapis.com/drive/v3/files/${n}`,{method:"DELETE",headers:{Authorization:`Bearer ${i}`}});if(!l.ok&&l.status!==204){const s=await l.json();throw new Error(s.error?.message||"Failed to delete project")}},async syncBackendCode(n,i){const s=(await this.getProjectContent(n,i)).find(f=>f.name==="WorkflowData"||f.name==="G8nWorkflow"),r=this.getGasFiles();s&&r.push(s),await this.pushFiles(n,r,i)},async syncAll(n,i,l){const s=this.getGasFiles();s.push({name:"G8nWorkflow",type:"SERVER_JS",source:this.generateWorkflowDataFile(i)}),await this.pushFiles(n,s,l)},async deployProject(n,i){const l=await this.createVersion(n,`G8N Deploy ${new Date().toISOString()}`,i);return await this.deployWebApp(n,l,i)},async syncApiKey(n,i,l){try{return await(await fetch(n,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"system.set_api_key",payload:{apiKey:i},token:l})})).json()}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to sync API key"}}}},yC=[{type:"start",label:"Start",icon:"",color:"#43b581"},{type:"agent",label:"Agent",icon:"",color:"#5865f2"},{type:"tool",label:"Tool",icon:"",color:"#faa61a"},{type:"memory",label:"Memory",icon:"",color:"#9b59b6"},{type:"condition",label:"Classify",icon:"",color:"#f04747"},{type:"output",label:"Output",icon:"",color:"#808090"}];function vC(){const{addNode:n,saveWorkflow:i,newWorkflow:l,workflowName:s,settings:r,updateSettings:f,execution:d,resetExecution:g,nodes:p}=gt(),[h,b]=W.useState(""),[x,m]=W.useState(!1),[S,w]=W.useState(null),[N,D]=W.useState("gemini-2.5-flash"),j=T=>{if(p.length===0){n(T,{x:100,y:150});return}const Y=p.reduce(($,ie)=>ie.position.x>$.position.x?ie:$,p[0]),se=Y.position.x+200+30,J=Y.position.y;n(T,{x:se,y:J})},[H,_]=W.useState(null),M=async()=>{if(!h.trim()){w("Please describe what you want to build.");return}if(!r.geminiApiKey){w("Please add your Gemini API key in Settings first.");return}m(!0),w(null),_(null);try{const T=await cC(h,N);uC(T),b("");const G=T.nodes.filter(B=>B.type==="tool"&&Av(B.data.toolType)).map(B=>B.data.label);G.length>0&&_(` Note: This workflow uses tools that require OAuth login: ${G.join(", ")}. Please click the nodes to authorize.`)}catch(T){w(T instanceof Error?T.message:"Generation failed")}finally{m(!1)}},A=d.status==="running";return y.jsxs("div",{className:"toolbar",children:[y.jsxs("div",{className:"toolbar-section ai-generator",children:[y.jsx("h3",{className:"toolbar-title",children:" AI Generate"}),y.jsxs("div",{className:"model-selector",children:[y.jsx("label",{children:"Model:"}),y.jsx("select",{value:N,onChange:T=>D(T.target.value),disabled:x,children:cT.map(T=>y.jsx("option",{value:T,children:T},T))})]}),y.jsx("textarea",{className:"ai-prompt-input",value:h,onChange:T=>b(T.target.value),placeholder:`Describe your workflow in natural language...

Examples:
 Search Google for AI news and summarize
 Check my calendar and send email reminders
 Analyze a YouTube video`,rows:4,disabled:x}),S&&y.jsx("div",{className:"ai-error",children:S}),H&&y.jsx("div",{className:"ai-warning",children:H}),y.jsx("button",{className:`action-button generate ${x?"generating":""}`,onClick:M,disabled:x,children:x?" Generating...":" Generate Workflow"})]}),y.jsxs("div",{className:"toolbar-section",children:[y.jsx("h3",{className:"toolbar-title",children:"Nodes"}),y.jsx("div",{className:"node-palette",children:yC.map(T=>y.jsxs("button",{className:"node-button",onClick:()=>j(T.type),style:{"--node-color":T.color},title:`Add ${T.label} Node`,children:[y.jsx("span",{className:"node-button-icon",children:T.icon}),y.jsx("span",{className:"node-button-label",children:T.label})]},T.type))})]}),y.jsxs("div",{className:"toolbar-section",children:[y.jsx("h3",{className:"toolbar-title",children:"Workflow"}),y.jsx("div",{className:"workflow-info",children:y.jsx("input",{type:"text",className:"workflow-name-input",value:s,onChange:T=>gt.setState({workflowName:T.target.value}),placeholder:"Workflow name..."})}),y.jsxs("div",{className:"toolbar-actions",style:{flexWrap:"wrap"},children:[y.jsx("button",{className:`action-button run ${A?"running":""}`,onClick:()=>Rv.run(),disabled:A,children:A?" ...":" Run"}),d.history.length>0&&y.jsx("button",{className:"action-button reset",onClick:g,children:""}),y.jsx("button",{className:"action-button save",onClick:i,children:""}),y.jsx("button",{className:"action-button new",onClick:l,children:""})]})]}),y.jsxs("div",{className:"toolbar-section",children:[y.jsx("h3",{className:"toolbar-title",children:"Settings"}),y.jsxs("div",{className:"settings-group",children:[y.jsx("label",{className:"settings-label",children:"Gemini API Key"}),y.jsxs("div",{className:"api-key-row",children:[y.jsx("input",{type:"password",className:"settings-input",value:r.geminiApiKey,onChange:T=>f({geminiApiKey:T.target.value}),placeholder:"Enter your API key..."}),y.jsx("button",{className:"save-key-btn",onClick:()=>{localStorage.setItem("gemini-agent-builder-storage",JSON.stringify({state:{savedWorkflows:gt.getState().savedWorkflows,settings:gt.getState().settings}})),alert("API Key saved!")},title:"Save API Key",children:""})]})]}),y.jsxs("div",{className:"settings-group",children:[y.jsx("label",{className:"settings-label",children:"GCP Client ID"}),y.jsx("input",{type:"text",className:"settings-input",value:r.gcpClientId||"",onChange:T=>f({gcpClientId:T.target.value}),placeholder:"OAuth Client ID for GCP APIs..."}),y.jsx("small",{style:{color:"#888",fontSize:"10px"},children:"Required for YouTube, Calendar, Gmail, Drive APIs"})]}),y.jsxs("div",{className:"settings-group",children:[y.jsx("label",{className:"settings-label",children:"GCP API Key"}),y.jsx("input",{type:"password",className:"settings-input",value:r.gcpApiKey||"",onChange:T=>f({gcpApiKey:T.target.value}),placeholder:"API Key for GCP services..."}),y.jsx("small",{style:{color:"#888",fontSize:"10px"},children:"For Places API and other API Key-based services"})]})]})]})}const Ry=[{value:"gemini-3-pro-preview",label:"Gemini 3 Pro (Preview)"},{value:"gemini-3-flash-preview",label:"Gemini 3 Flash (Preview)"},{value:"gemini-2.5-pro",label:"Gemini 2.5 Pro"},{value:"gemini-2.5-flash",label:"Gemini 2.5 Flash"},{value:"gemini-2.5-flash-lite",label:"Gemini 2.5 Flash-Lite"},{value:"gemini-2.0-flash",label:"Gemini 2.0 Flash"}],xC=[{value:"gemini_builtin",label:"Gemini Built-in",icon:""},{value:"gcp_api",label:"GCP API (OAuth)",icon:""},{value:"custom_mcp",label:"Custom / MCP",icon:""},{value:"gas_native",label:"GAS Native",icon:""}],Hy={gemini_builtin:[{value:"google_search",label:" Google Search"},{value:"code_execution",label:" Code Execution"},{value:"file_search",label:" File Search"},{value:"url_context",label:" URL Context"},{value:"google_maps",label:" Google Maps Grounding"}],gcp_api:[{value:"youtube_data",label:" YouTube Data API"},{value:"google_calendar",label:" Google Calendar"},{value:"gmail",label:" Gmail"},{value:"google_drive",label:" Google Drive"},{value:"places_api",label:" Places API"}],custom_mcp:[{value:"mcp",label:" MCP Server"},{value:"function_calling",label:" Function Calling"}],gas_native:[{value:"gas_gmail",label:" Gmail (MailApp)"},{value:"gas_calendar",label:" Calendar"},{value:"gas_sheets",label:" Sheets"},{value:"gas_drive",label:" Drive"}]};function bC(){const{nodes:n,selectedNodeId:i,updateNodeData:l,deleteNode:s,execution:r,gasConfig:f}=gt(),[d,g]=W.useState(0),[p,h]=W.useState(null),[b,x]=W.useState(!1),m=n.find(A=>A.id===i),S=r.history.filter(A=>A.nodeId===i);if(!m)return y.jsx("div",{className:"properties-panel empty",children:y.jsxs("div",{className:"empty-state",children:[y.jsx("span",{className:"empty-icon",children:""}),y.jsx("p",{children:"Select a node to edit its properties"})]})});const w=A=>{l(m.id,A)},N=A=>y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Label"}),y.jsx("input",{type:"text",value:A.label,onChange:T=>w({label:T.target.value})})]}),y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Input Variables"}),y.jsxs("div",{className:"variables-list",children:[A.inputVariables?.map((T,G)=>y.jsxs("div",{className:"variable-item",children:[y.jsx("input",{type:"text",value:T.name,placeholder:"Name",onChange:B=>{const Y=[...A.inputVariables||[]];Y[G]={...Y[G],name:B.target.value},w({inputVariables:Y})}}),y.jsxs("select",{value:T.type,onChange:B=>{const Y=[...A.inputVariables||[]];Y[G]={...Y[G],type:B.target.value},w({inputVariables:Y})},children:[y.jsx("option",{value:"string",children:"String"}),y.jsx("option",{value:"number",children:"Number"}),y.jsx("option",{value:"boolean",children:"Boolean"}),y.jsx("option",{value:"object",children:"Object"})]})]},G)),y.jsx("button",{className:"add-variable-btn",onClick:()=>w({inputVariables:[...A.inputVariables||[],{name:"",type:"string"}]}),children:"+ Add Variable"})]})]})]}),D=A=>y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Label"}),y.jsx("input",{type:"text",value:A.label,onChange:T=>w({label:T.target.value})})]}),y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Model"}),y.jsx("select",{value:A.model,onChange:T=>w({model:T.target.value}),children:Ry.map(T=>y.jsx("option",{value:T.value,children:T.label},T.value))})]}),y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"System Prompt"}),y.jsx("textarea",{value:A.systemPrompt,onChange:T=>w({systemPrompt:T.target.value}),rows:4,placeholder:"Enter system instructions..."})]}),y.jsxs("div",{className:"prop-group",children:[y.jsxs("label",{children:["Temperature: ",A.temperature]}),y.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:A.temperature,onChange:T=>w({temperature:parseFloat(T.target.value)})})]}),y.jsx("div",{className:"prop-group",children:y.jsxs("label",{className:"checkbox-label",style:{fontWeight:"bold"},children:[y.jsx("input",{type:"checkbox",checked:A.deepResearch||!1,onChange:T=>w({deepResearch:T.target.checked})}),"Enable Deep Research "]})}),y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Tools"}),y.jsxs("div",{style:{fontSize:"11px",color:"#888",fontStyle:"italic",padding:"8px",background:"rgba(255,255,255,0.05)",borderRadius:"4px"},children:["Connect ",y.jsx("b",{children:"Tool Nodes"})," to the ",y.jsx("b",{children:"Tools"})," input handle on the Agent node to enable capabilities."]})]})]}),j=A=>{const G=Nv.includes(A.toolType)?"gemini_builtin":Dr.includes(A.toolType)?"gcp_api":ei.includes(A.toolType)?"gas_native":"custom_mcp",B=Dr.includes(A.toolType),{settings:Y}=gt.getState(),se=$=>{const ie=Hy[$][0];w({toolType:ie.value,config:{}}),h(null)},J=async()=>{if(!Y.gcpClientId){h("Please set GCP Client ID in Settings first");return}x(!0),h(null);try{await jr.requestAccessForTool(A.toolType,Y.gcpClientId),g($=>$+1)}catch($){h(`Authorization failed: ${$.message}`)}finally{x(!1)}};return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Label"}),y.jsx("input",{type:"text",value:A.label,onChange:$=>w({label:$.target.value})})]}),y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Category"}),y.jsx("select",{value:G,onChange:$=>se($.target.value),children:xC.map($=>y.jsxs("option",{value:$.value,children:[$.icon," ",$.label]},$.value))})]}),y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Tool Type"}),y.jsx("select",{value:A.toolType,onChange:$=>{w({toolType:$.target.value,config:{}}),h(null)},children:Hy[G].map($=>y.jsx("option",{value:$.value,children:$.label},$.value))})]}),B&&(()=>{const $=Av(A.toolType),ie=!!Y.gcpApiKey,z=$&&jr.isToolAuthorized(A.toolType);return $?z?y.jsxs("div",{className:"prop-group",children:[y.jsx("div",{style:{padding:"8px",background:"rgba(67, 181, 129, 0.1)",border:"1px solid #43b581",borderRadius:"6px",fontSize:"12px",color:"#43b581"},children:" OAuth Authorized"}),y.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"rgba(250, 166, 26, 0.1)",border:"1px solid #faa61a",borderRadius:"6px",fontSize:"11px",color:"#faa61a"},children:" This tool only supports local execution and cannot be called on GAS"})]}):y.jsx("div",{className:"prop-group",children:y.jsxs("div",{style:{padding:"12px",background:"rgba(250, 166, 26, 0.1)",border:"1px solid #faa61a",borderRadius:"6px",textAlign:"center"},children:[y.jsx("div",{style:{color:"#faa61a",marginBottom:"8px",fontSize:"12px"},children:" This tool requires OAuth authorization"}),y.jsx("button",{onClick:J,disabled:b,style:{background:b?"#666":"#4285f4",color:"white",border:"none",borderRadius:"4px",padding:"8px 16px",cursor:b?"wait":"pointer",fontSize:"13px"},children:b?" Authorizing...":" Login to Google to Authorize"}),p&&y.jsx("div",{style:{color:"#f04747",marginTop:"8px",fontSize:"11px"},children:p})]})}):ie?y.jsx("div",{className:"prop-group",children:y.jsx("div",{style:{padding:"8px",background:"rgba(67, 181, 129, 0.1)",border:"1px solid #43b581",borderRadius:"6px",fontSize:"12px",color:"#43b581"},children:" API Key Set"})}):y.jsx("div",{className:"prop-group",children:y.jsxs("div",{style:{padding:"12px",background:"rgba(250, 166, 26, 0.1)",border:"1px solid #faa61a",borderRadius:"6px",textAlign:"center"},children:[y.jsx("div",{style:{color:"#faa61a",marginBottom:"4px",fontSize:"12px"},children:" This tool requires an API Key"}),y.jsx("div",{style:{color:"#888",fontSize:"11px"},children:"Please set GCP API Key in Settings on the left"})]})})})(),A.toolType==="function_calling"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Function Name"}),y.jsx("input",{type:"text",value:A.config?.functionName||"",onChange:$=>w({config:{...A.config,functionName:$.target.value}}),placeholder:"my_function"})]}),y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Description"}),y.jsx("textarea",{value:A.config?.functionDescription||"",onChange:$=>w({config:{...A.config,functionDescription:$.target.value}}),rows:2,placeholder:"What this function does..."})]})]}),A.toolType==="file_search"&&y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"File URIs (One per line)"}),y.jsx("textarea",{value:A.config?.fileUris?.join(`
`)||"",onChange:$=>w({config:{...A.config,fileUris:$.target.value.split(`
`).filter(ie=>ie.trim()!=="")}}),rows:4,placeholder:"gs://... or https://..."}),y.jsx("small",{style:{color:"#888"},children:"Enter URIs of files uploaded to Google AI Studio"})]}),A.toolType==="mcp"&&y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"MCP Server URL"}),y.jsx("input",{type:"url",value:A.config?.mcpServerUrl||"",onChange:$=>w({config:{...A.config,mcpServerUrl:$.target.value}}),placeholder:"http://localhost:3000/sse"})]}),A.toolType==="url_context"&&y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Target URL"}),y.jsx("input",{type:"url",value:A.config?.targetUrl||"",onChange:$=>w({config:{...A.config,targetUrl:$.target.value}}),placeholder:"https://..."})]}),ei.includes(A.toolType)&&(f.webAppUrl?y.jsx("div",{className:"prop-group",children:y.jsx("div",{style:{padding:"8px",background:"rgba(52, 168, 83, 0.1)",border:"1px solid #34a853",borderRadius:"6px",fontSize:"12px",color:"#34a853"},children:" Ready - Will call GAS Web App for local testing"})}):y.jsx("div",{className:"prop-group",children:y.jsxs("div",{style:{padding:"12px",background:"rgba(250, 166, 26, 0.1)",border:"1px solid #faa61a",borderRadius:"6px",textAlign:"center"},children:[y.jsx("div",{style:{color:"#faa61a",marginBottom:"4px",fontSize:"12px"},children:" Deploy Required for Local Testing"}),y.jsx("div",{style:{color:"#888",fontSize:"11px"},children:"GAS native tools require a deployed Web App to test locally. Use GAS Project Manager  Deploy first."})]})})),ei.includes(A.toolType)&&y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"How It Works"}),y.jsxs("div",{style:{padding:"12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",fontSize:"12px",color:"#aaa",lineHeight:"1.5"},children:[A.toolType==="gas_gmail"&&y.jsxs(y.Fragment,{children:[y.jsx("strong",{style:{color:"#34a853"},children:" Gmail Tool"}),y.jsx("p",{style:{margin:"8px 0 0 0"},children:"Connect this tool to an Agent node. When you ask the AI to send an email, it will automatically call this tool with the recipient, subject, and body."}),y.jsx("p",{style:{margin:"8px 0 0 0",fontStyle:"italic"},children:'Example: " test@example.com"'})]}),A.toolType==="gas_calendar"&&y.jsxs(y.Fragment,{children:[y.jsx("strong",{style:{color:"#34a853"},children:" Calendar Tool"}),y.jsx("p",{style:{margin:"8px 0 0 0"},children:"Connect this tool to an Agent node. The AI can create, list, or delete calendar events."}),y.jsx("p",{style:{margin:"8px 0 0 0",fontStyle:"italic"},children:'Example: " 3 "'})]}),A.toolType==="gas_sheets"&&y.jsxs(y.Fragment,{children:[y.jsx("strong",{style:{color:"#34a853"},children:" Sheets Tool"}),y.jsx("p",{style:{margin:"8px 0 0 0"},children:"Connect this tool to an Agent node. The AI can read or write data to Google Sheets."}),y.jsx("p",{style:{margin:"8px 0 0 0",fontStyle:"italic"},children:'Example: " ID xxx  A1:D10 "'})]}),A.toolType==="gas_drive"&&y.jsxs(y.Fragment,{children:[y.jsx("strong",{style:{color:"#34a853"},children:" Drive Tool"}),y.jsx("p",{style:{margin:"8px 0 0 0"},children:"Connect this tool to an Agent node. The AI can search, list, or create files in Drive."}),y.jsx("p",{style:{margin:"8px 0 0 0",fontStyle:"italic"},children:'Example: " Drive  report "'})]})]})]})]})},H=A=>y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Label"}),y.jsx("input",{type:"text",value:A.label,onChange:T=>w({label:T.target.value})})]}),y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Model"}),y.jsx("select",{value:A.model,onChange:T=>w({model:T.target.value}),children:Ry.map(T=>y.jsx("option",{value:T.value,children:T.label},T.value))})]}),y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Input Variable"}),y.jsx("input",{type:"text",value:A.inputVariable||"last_output",onChange:T=>w({inputVariable:T.target.value}),placeholder:"last_output"})]}),y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Categories"}),y.jsxs("div",{className:"list-container",children:[A.categories?.map((T,G)=>y.jsxs("div",{className:"list-item",children:[y.jsx("input",{type:"text",value:T,onChange:B=>{const Y=[...A.categories||[]];Y[G]=B.target.value,w({categories:Y})}}),y.jsx("button",{className:"remove-btn",onClick:()=>w({categories:A.categories.filter((B,Y)=>Y!==G)}),children:""})]},G)),y.jsx("button",{className:"add-btn",onClick:()=>w({categories:[...A.categories||[],`Category ${A.categories?.length+1}`]}),children:"+ Add Category"})]})]}),y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Examples (Few-Shot)"}),y.jsxs("div",{className:"examples-list",children:[A.examples?.map((T,G)=>y.jsxs("div",{className:"example-item",style:{border:"1px solid #444",padding:"8px",marginBottom:"8px",borderRadius:"4px"},children:[y.jsx("input",{type:"text",placeholder:"Input text...",value:T.text,onChange:B=>{const Y=[...A.examples||[]];Y[G]={...T,text:B.target.value},w({examples:Y})},style:{marginBottom:"4px",width:"100%"}}),y.jsxs("select",{value:T.category,onChange:B=>{const Y=[...A.examples||[]];Y[G]={...T,category:B.target.value},w({examples:Y})},style:{width:"100%"},children:[y.jsx("option",{value:"",disabled:!0,children:"Select Category"}),A.categories?.map(B=>y.jsx("option",{value:B,children:B},B))]}),y.jsx("button",{className:"remove-btn-small",onClick:()=>w({examples:A.examples.filter((B,Y)=>Y!==G)}),style:{marginTop:"4px",fontSize:"0.8em",padding:"2px 6px"},children:"Remove Example"})]},T.id)),y.jsx("button",{className:"add-btn",onClick:()=>w({examples:[...A.examples||[],{id:Date.now().toString(),text:"",category:A.categories?.[0]||""}]}),children:"+ Add Example"})]})]})]}),_=A=>y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Label"}),y.jsx("input",{type:"text",value:A.label,onChange:T=>w({label:T.target.value})})]}),y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Output Format"}),y.jsxs("select",{value:A.outputFormat,onChange:T=>w({outputFormat:T.target.value}),children:[y.jsx("option",{value:"text",children:"Text"}),y.jsx("option",{value:"json",children:"JSON"}),y.jsx("option",{value:"markdown",children:"Markdown"})]})]})]}),M=A=>y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Label"}),y.jsx("input",{type:"text",value:A.label,onChange:T=>w({label:T.target.value})})]}),y.jsxs("div",{className:"prop-group",children:[y.jsx("label",{children:"Storage Key"}),y.jsx("input",{type:"text",value:A.storageKey||"chat_history",onChange:T=>w({storageKey:T.target.value}),placeholder:"chat_history"}),y.jsx("small",{style:{color:"#888"},children:"localStorage key for conversation history"}),y.jsxs("div",{style:{marginTop:"8px",padding:"8px",background:"rgba(250, 166, 26, 0.1)",border:"1px solid #faa61a",borderRadius:"6px",fontSize:"11px",color:"#faa61a"},children:[" ",y.jsx("b",{children:"Note for Deployment:"}),y.jsx("br",{}),"When running on Google Apps Script, this data is saved to ",y.jsx("b",{children:"Script Properties"})," (max 9KB limit)."]})]}),y.jsxs("div",{className:"prop-group",children:[y.jsxs("label",{children:["Max Messages: ",A.maxMessages||10]}),y.jsx("input",{type:"range",min:"1",max:"50",step:"1",value:A.maxMessages||10,onChange:T=>w({maxMessages:parseInt(T.target.value)})})]}),y.jsx("div",{className:"prop-group",children:y.jsx("button",{className:"action-button",style:{background:"#f04747",marginTop:"8px"},onClick:()=>{localStorage.removeItem(A.storageKey||"chat_history"),alert("Memory cleared!")},children:" Clear Memory"})})]});return y.jsxs("div",{className:"properties-panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsxs("h3",{children:[m.type?.toUpperCase()," Node"]}),y.jsx("button",{className:"delete-node-btn",onClick:()=>s(m.id),title:"Delete Node",children:""})]}),y.jsxs("div",{className:"panel-content",children:[m.type==="start"&&N(m.data),m.type==="agent"&&D(m.data),m.type==="tool"&&j(m.data),m.type==="condition"&&H(m.data),m.type==="output"&&_(m.data),m.type==="memory"&&M(m.data),S.length>0&&y.jsxs("div",{className:"prop-group history-section",children:[y.jsx("label",{className:"history-label",children:"Execution Results"}),y.jsx("div",{className:"history-list",children:S.map((A,T)=>y.jsxs("div",{className:"history-item",children:[y.jsxs("div",{className:"history-header",children:[y.jsx("span",{className:"history-time",children:new Date(A.startTime).toLocaleTimeString()}),A.endTime&&y.jsxs("span",{className:"history-duration",children:[A.endTime-A.startTime,"ms"]})]}),y.jsx("pre",{className:"history-data",children:typeof A.output=="string"?A.output:typeof A.output=="object"&&A.output!==null&&"text"in A.output?A.output.text:JSON.stringify(A.output,null,2)})]},T))})]})]})]})}const SC=["https://www.googleapis.com/auth/script.projects","https://www.googleapis.com/auth/drive"];function wC(){const{settings:n,updateGasConfig:i,gasAuth:l,setGasAuth:s,gasLogout:r,exportWorkflow:f,loadWorkflowFromGas:d,workflowName:g,nodes:p}=gt(),[h,b]=W.useState([]),[x,m]=W.useState(null),[S,w]=W.useState(""),[N,D]=W.useState(!1),[j,H]=W.useState(null),[_,M]=W.useState(!1),[A,T]=W.useState(null),[G,B]=W.useState(null),[Y,se]=W.useState(null),[J,$]=W.useState(()=>localStorage.getItem("gas-auth-hint-dismissed")==="true"),ie=W.useMemo(()=>p.some(q=>{if(q.type==="tool"){const le=q.data;return ei.includes(le.toolType)}return!1}),[p]),z=l.isLoggedIn&&l.expiresAt&&Date.now()<l.expiresAt,X=W.useCallback(async()=>{if(l.accessToken){D(!0),T(null);try{const q=await fn.listG8nProjects(l.accessToken);b(q)}catch(q){T(q instanceof Error?q.message:"Failed to load projects")}finally{D(!1)}}},[l.accessToken]);W.useEffect(()=>{z&&X()},[z,X]);const C=async()=>{if(!n.gcpClientId){T("Please set GCP Client ID in Settings first");return}M(!0),T(null);try{const q=await jr.requestAccess(SC,n.gcpClientId);s({isLoggedIn:!0,accessToken:q,expiresAt:Date.now()+3600*1e3}),B("Login successful!"),setTimeout(()=>B(null),3e3)}catch(q){T(q instanceof Error?q.message:"Login failed")}finally{M(!1)}},k=()=>{r(),b([]),m(null)},I=async()=>{if(!(!x||!l.accessToken)){D(!0),H("Loading workflow..."),T(null),d({id:"",name:"Loading...",description:"",nodes:[],edges:[],createdAt:"",updatedAt:""});try{const q=await fn.getWorkflowFromProject(x.scriptId,l.accessToken);if(q){d(q);try{const ue=(await fn.listDeployments(x.scriptId,l.accessToken)).find(ce=>ce.webAppUrl);ue?.webAppUrl?(se(ue.webAppUrl),i({webAppUrl:ue.webAppUrl}),$(!1),localStorage.removeItem("gas-auth-hint-dismissed")):se(null)}catch{se(null)}B(`Loaded: ${q.name}`),setTimeout(()=>B(null),3e3)}else T("No workflow data found in this project")}catch(q){T(q instanceof Error?q.message:"Failed to load workflow")}finally{D(!1),H(null)}}},K=async()=>{if(!(!x||!l.accessToken)){D(!0),H("Saving workflow..."),T(null);try{const q=f();q.name=x.title.replace(/^G8N[-_]?/i,"")||q.name,await fn.saveWorkflowToProject(x.scriptId,q,l.accessToken),B("Saved successfully!"),setTimeout(()=>B(null),3e3)}catch(q){T(q instanceof Error?q.message:"Failed to save")}finally{D(!1),H(null)}}},te=async()=>{if(!(!S.trim()||!l.accessToken)){D(!0),H("Creating project..."),T(null);try{const q=f(),le=await fn.createG8nProject(S.trim(),q,l.accessToken);b([le,...h]),m(le),w(""),B(`Created: ${le.title}`),setTimeout(()=>B(null),3e3)}catch(q){T(q instanceof Error?q.message:"Failed to create project")}finally{D(!1),H(null)}}},O=async()=>{if(!(!x||!l.accessToken||!window.confirm(`Are you sure you want to delete project "${x.title}"?
This action cannot be undone!`))){D(!0),T(null);try{await fn.deleteProject(x.scriptId,l.accessToken),b(h.filter(le=>le.scriptId!==x.scriptId)),m(null),B("Project deleted"),setTimeout(()=>B(null),3e3)}catch(le){T(le instanceof Error?le.message:"Failed to delete project")}finally{D(!1)}}},U=async()=>{if(!(!x||!l.accessToken)){D(!0),H("Syncing code + workflow..."),T(null);try{const q=f();if(q.name=x.title.replace(/^G8N[-_]?/i,"")||q.name,await fn.syncAll(x.scriptId,q,l.accessToken),Y&&n.geminiApiKey){H("Syncing API Key...");const le=await fn.syncApiKey(Y,n.geminiApiKey,l.accessToken);le.success||console.warn("API Key sync warning:",le.error)}B("Synced code + workflow + API Key!"),setTimeout(()=>B(null),3e3)}catch(q){T(q instanceof Error?q.message:"Sync failed")}finally{D(!1),H(null)}}},ee=async()=>{if(!(!x||!l.accessToken)){D(!0),H("Deploying Web App..."),T(null);try{const q=await fn.deployProject(x.scriptId,l.accessToken);se(q.webAppUrl),n.geminiApiKey&&(H("Syncing API Key..."),await fn.syncApiKey(q.webAppUrl,n.geminiApiKey,l.accessToken)),i({webAppUrl:q.webAppUrl}),B(`Deployed v${q.version} & Synced Key!`),setTimeout(()=>B(null),5e3)}catch(q){T(q instanceof Error?q.message:"Deploy failed")}finally{D(!1),H(null)}}};return z?y.jsxs("div",{className:"gas-project-manager",children:[j&&y.jsxs("div",{className:"gas-loading-overlay",children:[y.jsx("div",{className:"gas-loading-spinner"}),y.jsx("div",{className:"gas-loading-text",children:j})]}),y.jsxs("div",{className:"gas-header",children:[y.jsx("h3",{children:" GAS Project Manager"}),y.jsx("button",{className:"gas-logout-btn",onClick:k,children:"Logout"})]}),A&&y.jsx("div",{className:"gas-error",children:A}),G&&y.jsx("div",{className:"gas-success",children:G}),y.jsxs("div",{className:"gas-section",children:[y.jsxs("div",{className:"gas-section-header",children:[y.jsx("span",{children:" Your G8N Projects"}),y.jsx("button",{className:"gas-refresh-btn",onClick:X,disabled:N,children:""})]}),N&&h.length===0?y.jsx("div",{className:"gas-loading",children:"Loading projects..."}):h.length===0?y.jsx("div",{className:"gas-empty",children:"No G8N projects found"}):y.jsx("div",{className:"gas-project-list",children:h.map(q=>y.jsxs("div",{className:`gas-project-item ${x?.scriptId===q.scriptId?"selected":""}`,onClick:()=>m(q),children:[y.jsx("span",{className:"project-name",children:q.title}),q.updateTime&&y.jsx("span",{className:"project-date",children:new Date(q.updateTime).toLocaleDateString()})]},q.scriptId))}),x&&y.jsxs("div",{className:"gas-project-actions",children:[y.jsx("button",{className:"gas-btn load",onClick:I,disabled:N,children:" Load"}),y.jsx("button",{className:"gas-btn save",onClick:K,disabled:N,children:" Save"}),y.jsx("button",{className:"gas-btn delete",onClick:O,disabled:N,title:"Delete project",children:""})]}),x&&y.jsxs("div",{className:"gas-project-actions",children:[y.jsx("button",{className:"gas-btn sync-all",onClick:U,disabled:N,title:"Sync backend code + workflow",children:" Sync All"}),y.jsx("button",{className:"gas-btn deploy",onClick:ee,disabled:N,title:"Deploy as Web App",children:" Deploy"})]}),Y&&y.jsxs("div",{className:"gas-webapp-url",children:[y.jsx("span",{children:" Web App:"}),y.jsxs("a",{href:Y,target:"_blank",rel:"noopener noreferrer",children:[Y.slice(0,50),"..."]}),ie&&!J&&y.jsxs("div",{className:"gas-auth-hint",children:[y.jsx("span",{children:" This workflow uses GAS Native tools. Click the Web App link above to authorize first."}),y.jsx("button",{className:"gas-auth-dismiss-btn",onClick:()=>{$(!0),localStorage.setItem("gas-auth-hint-dismissed","true")},children:"Authorized "})]})]})]}),y.jsxs("div",{className:"gas-section",children:[y.jsx("div",{className:"gas-section-header",children:y.jsx("span",{children:" Create New Project"})}),y.jsxs("div",{className:"gas-current-workflow",children:["Current: ",y.jsx("strong",{children:g||"Untitled"})]}),y.jsxs("div",{className:"gas-create-form",children:[y.jsx("input",{type:"text",placeholder:"Project name (G8N- prefix auto-added)",value:S,onChange:q=>w(q.target.value)}),y.jsxs("button",{className:"gas-btn create",onClick:te,disabled:N||!S.trim(),children:[N?"":""," Create"]})]})]})]}):y.jsxs("div",{className:"gas-project-manager",children:[y.jsx("h3",{children:" GAS Project Manager"}),!n.gcpClientId&&y.jsxs("div",{className:"gas-warning",children:[" Please set ",y.jsx("strong",{children:"GCP Client ID"})," in Settings first"]}),y.jsx("button",{className:"gas-login-btn",onClick:C,disabled:_||!n.gcpClientId,children:_?" Logging in...":" Login with Google"}),A&&y.jsx("div",{className:"gas-error",children:A})]})}function EC(){const{chatMessages:n,addChatMessage:i,clearChatMessages:l,execution:s,settings:r,resetExecution:f}=gt(),[d,g]=W.useState(""),p=s.status==="running",h=async()=>{if(!(!d.trim()||p)){i({role:"user",content:d.trim()}),g("");try{const m=await Rv.run(d.trim());if(m)if(typeof m=="object"&&m.error===!0)i({role:"assistant",content:m.message||" Execution failed"});else{const S=typeof m=="string"?m:typeof m=="object"&&"text"in m?m.text:JSON.stringify(m,null,2);i({role:"assistant",content:S})}else i({role:"assistant",content:" Workflow returned no result"})}catch(m){i({role:"assistant",content:` Unexpected error: ${m?.message||"Unknown error"}`})}}},b=()=>{l(),f()},x=m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),h())};return y.jsxs("div",{className:"chat-panel",children:[y.jsxs("div",{className:"chat-header",children:[y.jsx("h3",{children:" Chat"}),y.jsxs("div",{className:"chat-header-actions",children:[n.length>0&&y.jsx("button",{className:"chat-reset-btn",onClick:b,title:"New Chat",children:""}),!r.geminiApiKey&&y.jsx("span",{className:"api-warning",children:" API Key missing"})]})]}),y.jsxs("div",{className:"chat-messages",children:[n.length===0?y.jsxs("div",{className:"chat-empty",children:[y.jsx("span",{className:"chat-empty-icon",children:""}),y.jsx("p",{children:"Send a message to run your workflow"})]}):n.map(m=>y.jsxs("div",{className:`chat-message ${m.role}`,children:[y.jsx("div",{className:"message-avatar",children:m.role==="user"?"":""}),y.jsx("div",{className:"message-content",children:y.jsx("pre",{children:m.content})})]},m.id)),p&&y.jsxs("div",{className:"chat-message assistant",children:[y.jsx("div",{className:"message-avatar",children:""}),y.jsxs("div",{className:"message-content typing",children:[y.jsx("span",{className:"dot"}),y.jsx("span",{className:"dot"}),y.jsx("span",{className:"dot"})]})]})]}),y.jsxs("div",{className:"chat-input-container",children:[y.jsx("textarea",{className:"chat-input",placeholder:"Type your message...",value:d,onChange:m=>g(m.target.value),onKeyDown:x,disabled:p,rows:2}),y.jsx("button",{className:"chat-send-btn",onClick:h,disabled:p||!d.trim(),children:p?"":""})]})]})}function _C(){const{appMode:n,setAppMode:i,clearChatMessages:l,resetExecution:s}=gt(),r=f=>{f==="edit"&&n==="run"&&s(),f==="run"&&n==="edit"&&(l(),s()),i(f)};return y.jsx(Sv,{children:y.jsxs("div",{className:"app",children:[y.jsxs("header",{className:"app-header",children:[y.jsxs("div",{className:"app-logo",children:[y.jsx("span",{className:"logo-icon",children:""}),y.jsx("h1",{children:"G8N: Gemini Workflow Orchestrator"})]}),y.jsxs("div",{className:"mode-toggle",children:[y.jsx("button",{className:`mode-btn ${n==="edit"?"active":""}`,onClick:()=>r("edit"),children:" Edit"}),y.jsx("button",{className:`mode-btn ${n==="run"?"active":""}`,onClick:()=>r("run"),children:" Run"})]})]}),y.jsxs("main",{className:"app-main",children:[n==="edit"&&y.jsxs("div",{className:"left-panel",children:[y.jsx(vC,{}),y.jsx(wC,{})]}),y.jsx(AT,{}),n==="edit"?y.jsx(bC,{}):y.jsx(EC,{})]})]})})}Zb.createRoot(document.getElementById("root")).render(y.jsx(W.StrictMode,{children:y.jsx(_C,{})}));
